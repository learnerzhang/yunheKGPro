var u=(f,l,a)=>new Promise((r,o)=>{var p=t=>{try{i(a.next(t))}catch(n){o(n)}},m=t=>{try{i(a.throw(t))}catch(n){o(n)}},i=t=>t.done?r(t.value):Promise.resolve(t.value).then(p,m);i((a=a.apply(f,l)).next())});import{u as w,_ as y}from"./useForm-Hn6EoxrV.js";import"./BasicForm.vue_vue_type_style_index_0_lang-qpF-DMKT.js";import"./antd-DuSlDOy9.js";import{a as P,B as F}from"./index-dXxTZxnK.js";import{u as M}from"./rule-oooZlTFW.js";import{y as R}from"./temp-BXVrim_O.js";import{d as b,f as v,c as B,u as s,Z as C,a4 as k,a5 as x,k as I,a9 as L}from"./vue-7EN2lk9e.js";const T=[{field:"name",label:"板块名称",required:!0,component:"Input",colProps:{span:24}},{field:"description",label:"参考描述",required:!0,component:"InputTextArea",componentProps:{autoSize:{minRows:2}},colProps:{span:24}}],N=b({__name:"CreateUpdateConditionModal",emits:["success","register"],setup(f,{emit:l}){const a=l,r=v(!0);let o=null;const p=B(()=>s(r)?"编辑板块":"新增板块"),[m,{resetFields:i,setFieldsValue:t,validate:n}]=w({labelWidth:120,layout:"vertical",rowProps:{gutter:20},baseColProps:{span:24},schemas:T,showActionButtonGroup:!1}),[g,{setModalProps:d,closeModal:_}]=P(e=>u(this,null,function*(){i(),d({confirmLoading:!1}),r.value=!!(e!=null&&e.isUpdate),s(r)&&(o=e.record,t({name:o.name,description:o.description}))}));function h(){return u(this,null,function*(){try{let e=yield n();if(d({confirmLoading:!0}),s(r)){const c={attr_id:o.id,name:e.name,description:e.description,type:"2"};yield M(c)}else{const c={name:e.name,description:e.description};o=yield R(c)}_(),a("success")}finally{d({confirmLoading:!1})}})}return(e,c)=>(C(),k(s(F),L(e.$attrs,{onRegister:s(g),showFooter:"",title:p.value,width:"500px",onOk:h}),{default:x(()=>[I(s(y),{onRegister:s(m)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{N as _};
