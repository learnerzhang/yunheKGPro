var d=(f,u,s)=>new Promise((r,a)=>{var c=t=>{try{i(s.next(t))}catch(n){a(n)}},p=t=>{try{i(s.throw(t))}catch(n){a(n)}},i=t=>t.done?r(t.value):Promise.resolve(t.value).then(c,p);i((s=s.apply(f,u)).next())});import{u as _,_ as v}from"./useForm-aNhbSFae.js";import"./BasicForm.vue_vue_type_style_index_0_lang-BdxNsio9.js";import"./antd-DuSlDOy9.js";import{a as T,B as w}from"./index-C6GdxVlT.js";import{u as z,c as N}from"./rule-Ct2F4qWd.js";import{d as P,f as R,c as F,u as o,Z as M,a4 as b,a5 as B,k as C,a9 as k}from"./vue-7EN2lk9e.js";const x=[{field:"zhName",label:"板块名称",required:!0,component:"Input",colProps:{span:24}},{field:"valueType",label:"参考描述",required:!0,component:"InputTextArea",componentProps:{autoSize:{minRows:2}},colProps:{span:24}}],$=P({__name:"CreateUpdateConditionModal",emits:["success","register"],setup(f,{emit:u}){const s=u,r=R(!0);let a=null;const c=F(()=>o(r)?"编辑板块":"新增板块"),[p,{resetFields:i,setFieldsValue:t,validate:n}]=_({labelWidth:120,layout:"vertical",rowProps:{gutter:20},baseColProps:{span:24},schemas:x,showActionButtonGroup:!1}),[h,{setModalProps:m,closeModal:g}]=T(e=>d(this,null,function*(){i(),m({confirmLoading:!1}),r.value=!!(e!=null&&e.isUpdate),o(r)&&(a=e.record,t({zhName:a.zhName,valueType:a.valueType}))}));function y(){return d(this,null,function*(){try{let e=yield n();if(m({confirmLoading:!0}),o(r)){const l={attr_id:a.id,zhName:e.zhName,valueType:e.valueType,type:"2"};yield z(l)}else{const l={zhName:e.zhName,valueType:e.valueType,type:"2"};a=yield N(l)}g(),s("success")}finally{m({confirmLoading:!1})}})}return(e,l)=>(M(),b(o(w),k(e.$attrs,{onRegister:o(h),showFooter:"",title:c.value,width:"500px",onOk:y}),{default:B(()=>[C(o(v),{onRegister:o(p)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{$ as _};
