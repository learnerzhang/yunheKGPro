var f=(s,m,l)=>new Promise((r,a)=>{var u=t=>{try{n(l.next(t))}catch(i){a(i)}},d=t=>{try{n(l.throw(t))}catch(i){a(i)}},n=t=>t.done?r(t.value):Promise.resolve(t.value).then(u,d);n((l=l.apply(s,m)).next())});import{u as y,_ as h}from"./useForm-Hn6EoxrV.js";import"./BasicForm.vue_vue_type_style_index_0_lang-qpF-DMKT.js";import{n as v}from"./antd-DuSlDOy9.js";import{a as w,B as P}from"./index-dXxTZxnK.js";import{u as x,c as I}from"./graph-DcHcNpwl.js";import{d as M,f as R,c as j,u as o,Z as B,a4 as F,a5 as S,k,a9 as C}from"./vue-7EN2lk9e.js";const Y=[{label:"string",value:"string"},{label:"integer",value:"integer"},{label:"number",value:"number"},{label:"array",value:"array"},{label:"object",value:"object"},{label:"file",value:"file"},{label:"json",value:"json"}],V=[{title:"属性名称",dataIndex:"attname",width:200},{title:"数据类型",dataIndex:"atttype",width:200},{title:"单多值",dataIndex:"multi_flag",width:200,customRender:({record:s})=>s.multi_flag==0?"单值":"多值"},{title:"属性描述",dataIndex:"desc",width:200},{title:"更新时间",dataIndex:"update_time",width:140,customRender:({record:s})=>v(s.update_time).format("YYYY-MM-DD HH:mm")}],q=[{field:"name",label:"属性名称",required:!0,component:"Input",colProps:{span:24}},{field:"type",label:"数据类型",required:!0,component:"Select",componentProps:{options:Y},colProps:{span:12}},{field:"multi_flag",label:"单多值",required:!0,component:"Select",componentProps:{options:[{label:"单值",value:0},{label:"多值",value:1}]},colProps:{span:12}},{field:"desc",label:"属性描述",component:"InputTextArea",componentProps:{autoSize:{minRows:2}},colProps:{span:24}}],$=M({__name:"CreateUpdateModal",emits:["success","register"],setup(s,{emit:m}){const l=m,r=R(!0);let a=null;const u=j(()=>o(r)?"编辑属性":"新增属性"),[d,{resetFields:n,setFieldsValue:t,validate:i}]=y({labelWidth:90,layout:"vertical",rowProps:{gutter:20},baseColProps:{span:24},schemas:q,showActionButtonGroup:!1}),[g,{setModalProps:p,closeModal:_}]=w(e=>f(this,null,function*(){n(),p({confirmLoading:!1}),r.value=!!(e!=null&&e.isUpdate),a=e.record,o(r)&&t({name:e.record.name,desc:e.record.desc,type:e.record.type,multi_flag:e.record.multi_flag})}));function b(){return f(this,null,function*(){try{let e=yield i();if(p({confirmLoading:!0}),o(r)){const c={esid:a.esid,esaid:a.esaid,name:e.name,desc:e.desc,type:e.type,multi_flag:e.multi_flag};yield x(c)}else{const c={esid:a.esid,name:e.name,desc:e.desc,type:e.type,multi_flag:e.multi_flag};a=yield I(c)}_(),l("success")}finally{p({confirmLoading:!1})}})}return(e,c)=>(B(),F(o(P),C(e.$attrs,{onRegister:o(g),showFooter:"",title:u.value,width:"600px",onOk:b}),{default:S(()=>[k(o(h),{onRegister:o(d)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{$ as _,V as c};
