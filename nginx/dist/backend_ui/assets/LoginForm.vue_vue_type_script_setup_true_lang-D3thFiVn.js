var S=(y,d,n)=>new Promise((m,s)=>{var p=a=>{try{r(n.next(a))}catch(l){s(l)}},f=a=>{try{r(n.throw(a))}catch(l){s(l)}},r=a=>a.done?m(a.value):Promise.resolve(a.value).then(p,f);r((n=n.apply(y,d)).next())});import{d as B,f as h,r as C,c as D,u as e,Z as N,_ as E,m as F,A as k,k as t,a5 as c,G as T,a3 as V,al as $,F as z}from"./vue-7EN2lk9e.js";import{u as A,a as M,b as U,L as G,_ as K}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang-B-56sF_v.js";import{u as P,f as q,ah as O,an as Z,aB as j}from"./entry/index-CMbP4qrD-1735889696146.js";import{ae as I,A as L,V as H}from"./antd-DuSlDOy9.js";const ee=B({__name:"LoginForm",setup(y){const d=H,n=I.Item,m=L.Password,{t:s}=P(),{notification:p,createErrorModal:f}=j(),{prefixCls:r}=q("login"),a=O(),{getLoginState:l}=A(),{getFormRules:R}=M(),v=h(),g=h(!1),i=C({account:"",password:""}),{validForm:b}=U(v),_=D(()=>e(l)===G.LOGIN);function x(){return S(this,null,function*(){const u=yield b();if(u)try{g.value=!0;const o=yield a.login({password:u.password,username:u.account,mode:"none"});o&&p.success({message:s("sys.login.loginSuccessTitle"),description:`${s("sys.login.loginSuccessDesc")}: ${o.realName}`,duration:3})}catch(o){f({title:s("sys.api.errorTip"),content:o.message||s("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${r}`)||document.body})}finally{g.value=!1}})}return(u,o)=>(N(),E(z,null,[F(t(K,{class:"enter-x"},null,512),[[k,_.value]]),F(t(e(I),{class:"p-4 enter-x",model:i,rules:e(R),ref_key:"formRef",ref:v,onKeypress:$(x,["enter"])},{default:c(()=>[t(e(n),{name:"account",class:"enter-x"},{default:c(()=>[t(e(L),{size:"large",value:i.account,"onUpdate:value":o[0]||(o[0]=w=>i.account=w),placeholder:e(s)("sys.login.userName"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),t(e(n),{name:"password",class:"enter-x"},{default:c(()=>[t(e(m),{size:"large",visibilityToggle:"",value:i.password,"onUpdate:value":o[1]||(o[1]=w=>i.password=w),placeholder:e(s)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),t(e(n),{class:"enter-x"},{default:c(()=>[t(e(Z),{type:"primary",size:"large",class:"w-full",block:"",onClick:x,loading:g.value},{default:c(()=>[T(V(e(s)("sys.login.loginButton")),1)]),_:1},8,["loading"])]),_:1}),t(e(d),{class:"enter-x"})]),_:1},8,["model","rules"]),[[k,_.value]])],64))}});export{ee as _};
