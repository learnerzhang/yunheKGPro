var f=(e,u,o)=>new Promise((r,i)=>{var c=t=>{try{n(o.next(t))}catch(l){i(l)}},d=t=>{try{n(o.throw(t))}catch(l){i(l)}},n=t=>t.done?r(t.value):Promise.resolve(t.value).then(c,d);n((o=o.apply(e,u)).next())});import{u as q,_}from"./useForm-D6frmkhD.js";import"./BasicForm.vue_vue_type_style_index_0_lang-Cztz7x8L.js";import{n as x}from"./antd-DuSlDOy9.js";import{a as P,B as k}from"./index-CfGFDaHn.js";import{a as p}from"./entry/index-BcL7-Cog-1735891856356.js";import{d as y,f as b,c as I,u as a,Z as R,a4 as A,a5 as U,k as B,a9 as L}from"./vue-7EN2lk9e.js";const H=[{title:"指令",dataIndex:"question",width:300,ellipsis:!0},{title:"回复",dataIndex:"answer",width:300,ellipsis:!0},{title:"回复来源",dataIndex:"doc",width:200,ellipsis:!0},{title:"更新时间",dataIndex:"update_time",width:140,customRender:({record:e})=>x(e.update_time).format("YYYY-MM-DD HH:mm")}],j=[{field:"question",label:"指令",required:!0,component:"InputTextArea",componentProps:{autoSize:{minRows:4}},colProps:{span:24}},{field:"answer",label:"回复",required:!0,component:"InputTextArea",componentProps:{autoSize:{minRows:4}},colProps:{span:24}}];function z(e){return p.post({url:"/kg-api/kgapp/prodqalist/batchdelete",data:e},{joinPrefix:!1,apiUrl:"",successMessageMode:"message"})}function v(e){return p.post({url:"/kg-api/kgapp/prodqalist/update",data:e},{joinPrefix:!1,apiUrl:"",successMessageMode:"message"})}function V(e){return p.get({url:"/kg-api/kgapp/prodqalist/",params:e},{joinPrefix:!1,apiUrl:"",isTransformResponse:!1})}function $(e){return p.post({url:"/kg-api/kgapp/prodqalist/synToLLM",data:e},{joinPrefix:!1,apiUrl:"",successMessageMode:"message"})}const G=y({__name:"UpdateModal",emits:["success","register"],setup(e,{emit:u}){const o=u,r=b(!0);let i=null;const c=I(()=>(a(r),"编辑问答")),[d,{resetFields:n,setFieldsValue:t,validate:l}]=q({labelWidth:90,layout:"vertical",rowProps:{gutter:20},baseColProps:{span:24},schemas:j,showActionButtonGroup:!1}),[w,{setModalProps:m,closeModal:h}]=P(s=>f(this,null,function*(){n(),m({confirmLoading:!1}),r.value=!!(s!=null&&s.isUpdate),a(r)&&(i=s.record,t({question:s.record.question,answer:s.record.answer}))}));function M(){return f(this,null,function*(){try{let s=yield l();if(m({confirmLoading:!0}),a(r)){const g={answer:s.answer,question:s.question,qid:i.id};yield v(g)}h(),o("success")}finally{m({confirmLoading:!1})}})}return(s,g)=>(R(),A(a(k),L(s.$attrs,{onRegister:a(w),showFooter:"",title:c.value,width:"500px",onOk:M}),{default:U(()=>[B(a(_),{onRegister:a(d)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{G as _,z as b,H as c,V as g,$ as s};
