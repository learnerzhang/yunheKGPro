var ga=Object.defineProperty,ha=Object.defineProperties;var ya=Object.getOwnPropertyDescriptors;var ze=Object.getOwnPropertySymbols;var ht=Object.prototype.hasOwnProperty,yt=Object.prototype.propertyIsEnumerable;var gt=(n,a,e)=>a in n?ga(n,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[a]=e,N=(n,a)=>{for(var e in a||(a={}))ht.call(a,e)&&gt(n,e,a[e]);if(ze)for(var e of ze(a))yt.call(a,e)&&gt(n,e,a[e]);return n},ee=(n,a)=>ha(n,ya(a));var pe=(n,a)=>{var e={};for(var t in n)ht.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&ze)for(var t of ze(n))a.indexOf(t)<0&&yt.call(n,t)&&(e[t]=n[t]);return e};var ve=(n,a,e)=>new Promise((t,i)=>{var r=d=>{try{l(e.next(d))}catch(s){i(s)}},o=d=>{try{l(e.throw(d))}catch(s){i(s)}},l=d=>d.done?t(d.value):Promise.resolve(d.value).then(r,o);l((e=e.apply(n,a)).next())});import{X as qt,_ as ma,an as ba}from"./entry/index-BcL7-Cog-1735891856356.js";import{F as xa}from"./FormBorder-EsrxF1hX.js";import{d as U,Z as W,_ as Q,$ as w,ab as _a,p as Sa,e as wa,o as ae,b as re,f as X,ar as Re,w as be,am as De,J as mt,l as I,F as Ne,h as ka,Y as Oa,y as Ca,a6 as Na,n as Ea,a4 as Oe,a5 as F,k as T,u as C,G as Y,m as bt,a7 as Ae,a3 as V,a8 as ge}from"./vue-7EN2lk9e.js";import{i as Ma,j as Ta,k as Aa,l as Pa,m as ja}from"./graph-C7YSeTKN.js";import{P as Da}from"./index-Dc6KXk-k.js";import{u as xt}from"./index-CfGFDaHn.js";import{_ as La}from"./UpdateEntityModal.vue_vue_type_script_setup_true_lang-BXvJcAiN.js";import{_ as Ia}from"./SettingModal.vue_vue_type_script_setup_true_lang-DfjQ-9Xo.js";import{_ as $a}from"./FolderTree.vue_vue_type_style_index_0_lang-C4M46HUS.js";import{G as ie}from"./index-Duj5iC7n.js";import{aG as Jt,a as Ba,f as za,T as Ra,a5 as tt,aA as Ee,ae as _t,af as Ye,ap as Fa,ba as St,A as Wa,S as Ha,V as Za,U as Va,Z as Ga,bb as Xa,P as Ya,ar as Ua,ac as Fe,aR as Ka,w as Qa,ai as Ue,bc as qa,bd as wt,aM as Ja}from"./antd-DuSlDOy9.js";import"./useContentViewHeight-DJ0myx8Z.js";import"./useWindowSizeFn-BG4Rc7k1.js";import"./onMountedOrActivated-8STL9zTa.js";import"./useForm-D6frmkhD.js";import"./BasicForm.vue_vue_type_style_index_0_lang-Cztz7x8L.js";import"./index-MTdn1QqL.js";import"./useSortable-DorIa95B.js";import"./download-CffIuy2i.js";import"./index-Csyp8HpR.js";import"./copyTextToClipboard-CeRVlT3D.js";import"./preview.data-Bq_sTmCl.js";import"./index-BX9C0oMS.js";import"./UpdateEntityStyleModal.vue_vue_type_script_setup_true_lang-BGJ5l_Kd.js";import"./tinycolor-Begke6kS.js";const en="/assets/kg-title-DKZqfE7g.png",tn={class:"cool-card relative"},an={class:"cool-card-inbox"},nn={class:"cool-card-content"},rn=U({name:"CoolCard",__name:"CoolCard",setup(n){return(a,e)=>(W(),Q("div",tn,[w("div",an,[e[0]||(e[0]=w("div",{class:"tl absolute"},null,-1)),e[1]||(e[1]=w("div",{class:"br absolute"},null,-1)),w("div",nn,[_a(a.$slots,"default",{},void 0,!0)])]),e[2]||(e[2]=w("div",{class:"tr absolute"},[w("div",{class:"rectangle"})],-1)),e[3]||(e[3]=w("div",{class:"bl absolute"},[w("div",{class:"rectangle"})],-1))]))}}),on=qt(rn,[["__scopeId","data-v-e88faaf7"]]);var sn=function(a){return function(){if(!(!a||a.destroyed)){var e=a.getZoom(),t=a.get("canvas"),i=t.getPointByClient(t.get("width")/2,t.get("height")/2),r=t.get("pixelRatio")||1,o=1+.05*5;if(!(o*e>5))return a.zoom(o,{x:i.x/r,y:i.y/r},!0,{easing:"easeCubic",duration:150}),{text:"".concat(Math.round(o*e*100),"%"),ratio:o*e}}}},ln=function(a){return function(){if(!(!a||a.destroyed)){var e=a.getZoom(),t=a.get("canvas"),i=t.getPointByClient(t.get("width")/2,t.get("height")/2),r=t.get("pixelRatio")||1,o=1-.05*5;if(!(o*e<.3))return a.zoom(o,{x:i.x/r,y:i.y/r},!0,{easing:"easeCubic",duration:150}),{text:"".concat(Math.round(o*e*100),"%"),ratio:o*e}}}},dn=function(a){return function(e){var t=e.text,i=e.ratio;if(!(!a||a.destroyed)){var r=a.get("canvas"),o=r.getPointByClient(r.get("width")/2,r.get("height")/2),l=r.get("pixelRatio")||1;return a.zoomTo(i,{x:o.x/l,y:o.y/l},!0,{easing:"easeCubic",duration:150}),{text:t,ratio:i}}}},un=function(a){return function(){if(!(!a||a.destroyed)){var e=a.getZoom();return a.zoom(1/e),a.fitCenter(),{text:"100%",ratio:1}}}},cn=function(a){return function(){if(!(!a||a.destroyed)){var e=a.getNodes();e.length>0&&a.fitView([20,20],{},!0);var t=a.getZoom();return{text:"".concat(Math.round(t*100),"%"),ratio:t}}}};const fn=Object.freeze(Object.defineProperty({__proto__:null,handleAutoZoom:cn,handleChangeZoom:dn,handleRealZoom:un,handleZoomIn:ln,handleZoomOut:sn},Symbol.toStringTag,{value:"Module"}));var pn=function(a){return function(e){a.getNodes().forEach(function(t){a.clearItemStates(t,["active","inactive"]),e.indexOf(t.get("id"))!==-1?a.setItemState(t,"active",!0):a.setItemState(t,"active",!1)})}},vn=function(a){return function(e){if(!(!a||typeof e!="string")){var t=a.findById(e);t&&(a.focusItem(e,!0,{duration:200,easing:"easeCubic"}),a.setItemState(t,"selected",!0),t.toFront())}}};const gn=Object.freeze(Object.defineProperty({__proto__:null,focusNodeById:vn,highlightNodeById:pn},Symbol.toStringTag,{value:"Module"}));function hn(n,a,e){return a in n?Object.defineProperty(n,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[a]=e,n}var kt=Object.assign(Object.assign({},fn),gn),Ot=function(a){var e=Object.keys(kt);return e.reduce(function(t,i){return Object.assign(Object.assign({},t),hn({},i,kt[i](a)))},{})};const oe=String(Symbol("contextSymbol")),yn=n=>{Sa(oe,n)},J=()=>{const n=wa(oe);if(!n)throw new Error("context must be used after useProvide");return n};function he(n){return U({name:n.name,inject:[oe],setup(a,e){const{type:t,defaultConfig:i,mode:r="default"}=n,{graph:o}=J(),s=e.attrs,{disabled:l}=s,d=pe(s,["disabled"]);return ae(()=>{if(o.removeBehaviors(t,r),l)return;const c=N(N({},i),d);o.addBehaviors(N({type:t},c),r)}),re(()=>{o.destroyed||o.removeBehaviors(t,r)}),()=>null}})}const mn={direction:"both",enableOptimize:!1,scalableRange:0,shouldBegin:()=>!0,disabled:!1},bn=he({name:"DragCanvas",type:"drag-canvas",defaultConfig:mn}),xn={sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},disabled:!1},_n=he({name:"ZoomCanvas",type:"zoom-canvas",defaultConfig:xn}),Sn="shift",wn={disabled:!1,multiple:!0,trigger:Sn,selectedState:"selected"},kn=he({name:"ClickSelect",type:"click-select",defaultConfig:wn}),On="shift",Cn={disabled:!1,brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#81A7F8",lineWidth:1,lineDash:[2,4]},onSelect:()=>{},onDeselect:()=>{},selectedState:"selected",trigger:On,includeEdges:!0},Nn=he({name:"BrushSelect",type:"brush-select",defaultConfig:Cn}),En={disabled:!1,updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected"},Mn=he({name:"DragNode",type:"drag-node",defaultConfig:En}),Tn=U({name:"ResizeCanvas",inject:[oe],props:{graphDOM:{type:HTMLDivElement,default:()=>({})}},setup(n){const{graphDOM:a}=n,{graph:e}=J(),t=Jt(()=>{const{clientWidth:i,clientHeight:r}=a;e.set("width",i),e.set("height",r);const o=e.get("canvas");o&&(o.changeSize(i,r),e.autoPaint())},200);return ae(()=>{t(),window.addEventListener("resize",t,!1)}),re(()=>{window.removeEventListener("resize",t,!1)}),()=>null}}),An="shift",Pn={disabled:!1,delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#81A7F8",lineWidth:1,lineDash:[2,4]},onSelect:()=>{},onDeselect:()=>{},selectedState:"selected",trigger:An,includeEdges:!0},jn=he({name:"LassoSelect",type:"lasso-select",defaultConfig:Pn}),Dn={disabled:!1,enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"},Ln=he({name:"DragCombo",type:"drag-combo",defaultConfig:Dn}),In=U({name:"Hoverable",inject:[oe],props:{bindType:{type:String}},setup(n){const{bindType:a="node"}=n,{graph:e}=J(),t=l=>{e.setItemState(l.item,"hover",!0)},i=l=>{e.setItemState(l.item,"hover",!1)},r=l=>{e.setItemState(l.item,"hover",!0)},o=l=>{e.setItemState(l.item,"hover",!1)};return ae(()=>{a==="node"&&(e.on("node:mouseenter",t),e.on("node:mouseleave",i)),a==="edge"&&(e.on("edge:mouseenter",r),e.on("edge:mouseleave",o))}),re(()=>{a==="node"&&(e.off("node:mouseenter",t),e.off("node:mouseleave",i)),a==="edge"&&(e.off("edge:mouseenter",r),e.off("edge:mouseleave",o))}),()=>null}}),$n={disabled:!1,trigger:"click",activeState:"active",inactiveState:"inactive",resetSelected:!1},Bn=he({name:"ActivateRelations",type:"activate-relations",defaultConfig:$n}),zn={trigger:"click"},Ke="collapse-expand",Qe="default",Rn=U({name:"TreeCollapse",inject:[oe],props:{disabled:{type:Boolean},onChange:{type:Function}},setup(n,a){const{disabled:e,onChange:t}=n,i=pe(a,[]),{graph:r}=J(),o=l=>{const{item:d,collapsed:s}=l,c=d.get("model");c.collapsed=s,t&&t(d,s)};return ae(()=>{r.removeBehaviors(Ke,Qe),!e&&(r.addBehaviors(N(N({type:Ke},zn),i),Qe),r.on("itemcollapsed",o))}),re(()=>{r.off("itemcollapsed",o),r.destroyed||r.removeBehaviors(Ke,Qe)}),()=>null}}),Fn=U({name:"FitView",inject:[oe],props:{padding:{type:Array,default:()=>[]},isBindLayoutChange:{type:Boolean,default:!0}},setup(n){const{padding:a,isBindLayoutChange:e}=n,{graph:t}=J(),i=()=>{setTimeout(()=>{t.getNodes().length>0&&t.fitView(a)},60)};return ae(()=>{i(),e&&t.on("afterlayout",i)}),re(()=>{e&&t.off("afterlayout",i)}),()=>null}}),Wn=U({name:"FontPaint",inject:[oe],setup(){const{graph:n}=J(),a=X();return ae(()=>{a.value=setTimeout(()=>{n.getNodes().forEach(e=>{n.setItemState(e,"normal",!0)}),n.paint()},1600)}),re(()=>{a.value&&clearTimeout(a.value)}),()=>null}}),Hn=U({name:"DragNodeWithForce",inject:[oe],props:{autoPin:{type:Boolean,default:()=>!0}},setup(n){const{graph:a,layout:e}=J(),{autoPin:t}=n,i=()=>{const{instance:o={}}=e,{simulation:l}=o;l&&l.stop()},r=o=>{const{instance:l={}}=e,{simulation:d,type:s}=l;if(s==="graphin-force"&&o.item){const c=o.item.get("model");c.x=o.x,c.y=o.y,c.layout=ee(N({},c.layout),{force:{mass:t?1e6:null}});const u=[c];d.restart(u,a),a.refreshPositions()}};return ae(()=>{a.on("node:dragstart",i),a.on("node:dragend",r)}),re(()=>{a.off("node:dragstart",i),a.off("node:dragend",r)}),()=>null}}),ea=Object.freeze(Object.defineProperty({__proto__:null,ActivateRelations:Bn,BrushSelect:Nn,ClickSelect:kn,DragCanvas:bn,DragCombo:Ln,DragNode:Mn,DragNodeWithForce:Hn,FitView:Fn,FontPaint:Wn,Hoverable:In,LassoSelect:jn,ResizeCanvas:Tn,TreeCollapse:Rn,ZoomCanvas:_n},Symbol.toStringTag,{value:"Module"}));var Zn={type:"compactBox",direction:"LR",getId:function(a){return a.id},getHeight:function(){return 16},getWidth:function(){return 16},getVGap:function(){return 80},getHGap:function(){return 20}},Ct=["dendrogram","compactBox","mindmap","indented"],We=function(){return Math.round((Math.random()-.5)*80)},Nt=500,Et=300,Vn=function(a,e){var t=a.nodes,i=a.edges,r=e.nodes,o=new Map;r.forEach(function(s){var c=s.id,u=s.x,f=s.y;o.set(c,{x:u,y:f})});var l=new Map;t.forEach(function(s){var c=s.id,u=o.get(c),f=u.x,p=u.y;!window.isNaN(f)&&!window.isNaN(p)?(s.x=f,s.y=p):l.set(c,s)});var d=new Map;return i.forEach(function(s){var c=s.source,u=s.target,f=l.get(c),p=l.get(u),m=o.get(c),b=!window.isNaN(m.x)&&!window.isNaN(m.y),v=o.get(u),g=!window.isNaN(v.x)&&!window.isNaN(v.y);f&&g&&d.set(c,{x:v.x+We(),y:v.y+We()}),p&&b&&d.set(u,{x:m.x+We(),y:m.y+We()})}),t.forEach(function(s){var c=s.id,u=o.get(c);(window.isNaN(u.x)||window.isNaN(u.y))&&(u=d.get(c)||{}),!window.isNaN(u.x)&&!window.isNaN(u.y)?(s.x=u.x,s.y=u.y):(s.x=Nt/2+Math.round(Math.random()*Nt),s.y=Et/2+Math.round(Math.random()*Et))}),Object.assign(Object.assign({},a),{nodes:t,edges:i})};function Gn(n,a,e){return a in n?Object.defineProperty(n,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[a]=e,n}var Xn=[{type:"graphin-force",options:{},title:"渐进力导"},{type:"force",title:"D3力导",options:{preventOverlap:!0,linkDistance:250,nodeStrength:30,edgeStrength:.1,collideStrength:.8,nodeSize:30,alpha:.3,alphaDecay:.028,alphaMin:.01,forceSimulation:null,clustering:!1}},{type:"concentric",title:"同心圆布局",options:{minNodeSpacing:60,preventOverlap:!0,nodeSize:60}},{type:"grid",options:{},title:"网格布局"},{type:"radial",options:{},title:"辐射布局"},{type:"dagre",title:"层次布局",options:{}},{type:"circular",options:{},title:"环形布局"},{type:"gForce",options:{linkDistance:function(){return 200},preventOverlap:!0},title:"G6力导"},{type:"mds",options:{},title:"降维布局"},{type:"random",options:{},title:"随机布局"}],Mt=Xn.map(function(n){var a=n.type,e=n.options;return Object.assign({type:a},e)}).reduce(function(n,a){return Object.assign(Object.assign({},n),Gn({},a.type,a))},{});function Yn(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function Un(n,a){for(var e=0;e<a.length;e++){var t=a[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Kn(n,a,e){return a&&Un(n.prototype,a),Object.defineProperty(n,"prototype",{writable:!1}),n}var He=function(a){return!(a&&a.nodes&&a.nodes.length!==0)},Ze=["force","graphin-force","g6force","gForce","comboForce"],Qn=function(){function n(a){var e=this;Yn(this,n),this.updateOptions=function(){var t={type:"concentric"},i=e.graphin,r=i.width,o=i.height,l=i.props,d=l.layout,s=d===void 0?t:d,c=s.type,u=c===void 0?"concentric":c,f=s.preset,p={width:r,height:o,center:[r/2,o/2]};if(e.options=Object.assign(Object.assign(Object.assign({},p),Mt[u]||{}),s),He(e.graphin.data)){e.prevOptions={};return}if(Ze.indexOf(u)!==-1){var m=e.prevOptions.type||"grid";f!=null&&f.type&&(m=f.type),He(e.graphin.data)&&(m=f.type||"grid"),e.options.preset=Object.assign(Object.assign(Object.assign({type:m},p),Mt[m]||{}),f)}},this.processForce=function(){var t=e,i=t.options,r=t.graphin,o=r.graph,l=i.type,d=i.animation,s=i.animate;if(l==="graphin-force"&&(t.options.graph=o),l==="force"||l==="g6force"||l==="gForce"||l==="comboCombined"){var c=t.options.onTick,u=function(){c&&c(),(d||s)&&t.refreshPosition()};t.options.tick=u;var f=t.options.onLayoutEnd;t.options.onLayoutEnd=function(){t.refreshPosition(),f==null||f(),o.emit("afterlayout")}}(l==="comboForce"||l==="comboCombined")&&(t.options.comboTrees=o.get("comboTrees"));var p={prev:Ze.indexOf(t.prevOptions.type)!==-1,current:Ze.indexOf(t.options.type)!==-1},m=t.options.type===t.prevOptions.type;if(!He(r.data)){if(p.current&&!m){var b=t.options.preset;t.presetLayout=new ie.Layout[b.type](Object.assign({},b)||{}),t.presetLayout.init(r.data),t.presetLayout.execute(),t.presetLayout.data=Object.assign({},r.data)}if(p.current&&p.prev&&!t.hasPosition()){var v=t.graph.save(),g=t.options.preset;He(v)&&(t.presetLayout=new ie.Layout[g.type](Object.assign({},g)||{}),t.presetLayout.init(r.data),t.presetLayout.execute(),v=r.data),r.data=Vn(r.data,v)}}},this.refreshPosition=function(){var t=e.graphin,i=t.options,r=i.animate,o=i.layoutAnimate,l=e.options.type;r&&!o&&!e.options.animation?e.graph.positionsAnimate(l==="comboCombined"):e.graph.refreshPositions(l==="comboCombined")},this.destroy=function(){e.presetLayout&&e.presetLayout.destroy&&e.presetLayout.destroy(),e.instance&&e.instance.destroy&&e.instance.destroy(),e.presetLayout=null,e.instance=null},this.getDataFromGraph=function(){for(var t=[],i=[],r=[],o=[],l=e.graph.getNodes(),d=e.graph.getEdges(),s=e.graph.getCombos(),c=l.length,u=0;u<c;u++){var f=l[u];if(f&&f.isVisible()){var p=f.getModel();t.push(p)}}for(var m=d.length,b=0;b<m;b++){var v=d[b];if(v&&v.isVisible()){var g=v.getModel();g.isComboEdge?o.push(g):i.push(g)}}for(var _=s.length,h=0;h<_;h++){var y=s[h];if(y&&y.isVisible()){var k=y.getModel();r.push(k)}}return{nodes:t,edges:i,combos:r,comboEdges:o}},this.graphin=a,this.graph=this.graphin.graph,this.presetLayout=null,this.prevOptions={},this.init()}return Kn(n,[{key:"hasPosition",value:function(){var e=this.graphin,t=e.data,i=t===void 0?{}:t;return!i.nodes||i.nodes.length===0?!1:i.nodes.every(function(r){return!window.isNaN(Number(r.x))&&!window.isNaN(Number(r.y))})}},{key:"init",value:function(){this.updateOptions();var e=this.options,t=this.graphin,i=t.data,r=e.type;this.processForce(),ie.Layout[r];var o=ie.Layout[r]||ie.Layout.grid;this.graph.emit("beforelayout"),this.instance=new o(this.options),this.instance.init(i)}},{key:"start",value:function(){var e=this.options.type;this.instance.execute(),!(e==="force"||e==="g6force"||e==="gForce"||e==="comboCombined"||e==="force2")&&(this.refreshPosition(),this.graph.emit("afterlayout"))}},{key:"changeLayout",value:function(){var e=this.graphin,t=e.graph,i=e.data,r=e.isTree,o=e.layoutCache;if(!t||t.destroyed||!i||!i.nodes||!i.nodes.length||o&&this.hasPosition()||r)return!1;Ze.indexOf(this.options.type)!==-1&&this.destroy(),this.prevOptions=Object.assign({},this.options),this.init(),this.start()}}]),n}(),qn=function(){var a={type:"circle",style:{labelCfg:{position:"top"}},status:{}};return a},Jn={primaryEdgeColor:"#ddd",edgeSize:1,mode:"light"},ei=function(a){var e=Object.assign(Object.assign({},Jn),a),t=e.edgeSize,i=e.primaryEdgeColor,r=e.mode,o={light:{stroke:i,label:i,disabled:"#ddd"},dark:{stroke:i,label:i,disabled:"#ddd3"}},l=o[r],d={type:"graphin-line",style:{keyshape:{type:"line",lineWidth:t,stroke:l.stroke,strokeOpacity:1,lineAppendWidth:9,cursor:"pointer"},halo:{visible:!1,cursor:"pointer",strokeOpacity:.4},label:{value:"",position:"top",fill:l.label,fontSize:12,textAlign:"center"},animate:{}},status:{hover:{halo:{visible:!0}},selected:{halo:{visible:!0},keyshape:{lineWidth:2},label:{visible:!0}},active:{halo:{visible:!0},keyshape:{lineWidth:2},label:{visible:!0}},inactive:{halo:{visible:!1},keyshape:{strokeOpacity:.1},label:{visible:!1}},disabled:{halo:{visible:!1},keyshape:{lineWidth:.5,stroke:l.disabled},label:{visible:!1}}}};return d},ti={primaryColor:"#FF6A00",nodeSize:26,mode:"light"},ai=function(a){var e=Object.assign(Object.assign({},ti),a),t=e.nodeSize,i=e.primaryColor,r=e.mode,o=12,l={light:{fill:i,fillOpacity:.1,stroke:i,strokeOpacity:1,icon:i,badge:{fill:i,stroke:i,font:"#fff"},label:"#000",disabled:"#ddd"},dark:{fill:i,fillOpacity:.3,stroke:i,strokeOpacity:1,icon:"#fff",badge:{fill:i,stroke:i,font:"#fff"},label:"#fff",disabled:"#ddd3"}},d=l[r],s={type:"graphin-circle",style:{keyshape:{size:t,fill:d.fill,fillOpacity:d.fillOpacity,stroke:d.stroke,strokeOpacity:d.strokeOpacity,lineWidth:1,opacity:1,type:"circle"},label:{position:"bottom",value:"",fill:d.label,fontSize:o,offset:0,background:void 0,fillOpacity:1},icon:{type:"text",value:"",size:t/2,fill:d.icon,fillOpacity:1,offset:[0,0]},badges:[],halo:{visible:!1,fillOpacity:.1}},status:{normal:{},selected:{halo:{visible:!0},keyshape:{lineWidth:5}},hover:{halo:{visible:!0}},active:{},inactive:{keyshape:{fillOpacity:.04,strokeOpacity:.04},icon:{fillOpacity:.04},label:{fillOpacity:.04}},disabled:{halo:{visible:!1},keyshape:{fill:d.disabled,stroke:d.disabled},icon:{fill:d.disabled},label:{fill:d.disabled}}}};return s},ni={mode:"light",primaryColor:"#873bf4",nodeSize:26,edgeSize:1,primaryEdgeColor:"#ddd"},dt=function(a){var e=Object.assign(Object.assign({},ni),a),t=e.primaryColor,i=e.primaryEdgeColor,r=e.nodeSize,o=e.edgeSize,l=e.mode,d=e.background,s=ai({primaryColor:t,nodeSize:r,mode:l}),c=ei({primaryEdgeColor:i,edgeSize:o,mode:l}),u=qn(),f={light:"#fff",dark:"#1f1f1f"};return Object.assign(Object.assign({},e),{mode:l,background:d||f[l],defaultNodeStyle:{type:s.type,style:s.style},defaultNodeStatusStyle:{status:s.status},defaultEdgeStyle:{type:c.type,style:c.style},defaultEdgeStatusStyle:{status:c.status},defaultComboStyle:{type:u.type,style:u.style},defaultComboStatusStyle:{status:u.status}})};const{DragCanvas:Tt,ZoomCanvas:At,DragNode:Pt,DragCombo:jt,ClickSelect:Dt,BrushSelect:Lt,ResizeCanvas:It}=ea,Xe=U({name:"Graphin",components:{DragCanvas:Tt,ZoomCanvas:At,DragNode:Pt,DragCombo:jt,ClickSelect:Dt,BrushSelect:Lt,ResizeCanvas:It},props:{data:{type:Object,default:()=>({})},layout:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},height:{type:Number},width:{type:Number},layoutCache:{type:Boolean,default:()=>!1},modes:{type:Object,default:()=>({default:[]})},style:{type:Object,default:()=>({})},containerId:{type:String,default:()=>""},containerStyle:{type:Object,default:()=>({})},fitView:{type:Boolean,default:()=>!1},fitViewPadding:{type:Number,default:()=>0},fitCenter:{type:Boolean,default:()=>!1},linkCenter:{type:Boolean,default:()=>!1},groupByTypes:{type:Boolean,default:()=>!0},autoPaint:{type:Boolean,default:()=>!0},animate:{type:Boolean,default:()=>!1},animateCfg:{type:Object,default:()=>({})},minZoom:{type:Number,default:()=>.1},maxZoom:{type:Number,default:()=>10},enabledStack:{type:Boolean,default:()=>!1},theme:{type:Object,default:()=>({})},nodeStateStyles:{type:Object,default:()=>({})}},setup(n,{slots:a}){const v=n,{data:e,layout:t,width:i,height:r,layoutCache:o,plugins:l}=v,d=pe(v,["data","layout","width","height","layoutCache","plugins"]),s=Re({props:n,data:e,plugins:l,isTree:!!(n.data&&n.data.children)||Ct.indexOf(String(t&&t.type))!==-1,graph:{},height:Number(r),width:Number(i),theme:{},apis:{},layoutCache:o,layout:{},dragNodes:[],options:N({},d)});be(()=>n,g=>s.props=N({},g),{deep:!0});const c=X(null),u=De({graph:{},apis:{},theme:{},layout:{},dragNodes:[],isReady:!1});yn(u);const f=g=>{g.children&&(s.isTree=!0),s.data=za(g)},p=()=>{const ce=n,{theme:g,data:_,layout:h,width:y,height:k,defaultCombo:M={style:{},type:"graphin-combo"},defaultEdge:E={style:{},type:"graphin-line"},defaultNode:A={style:{},type:"graphin-circle"},nodeStateStyles:G,edgeStateStyles:B,comboStateStyles:H,modes:z={default:[]},animate:Z,handleAfterLayout:K}=ce,ue=pe(ce,["theme","data","layout","width","height","defaultCombo","defaultEdge","defaultNode","nodeStateStyles","edgeStateStyles","comboStateStyles","modes","animate","handleAfterLayout"]);z.default.length>0;const{clientWidth:se,clientHeight:_e}=c.value;f(n.data),s.width=Number(y)||se||500,s.height=Number(k)||_e||500;const S=dt(n.theme),{defaultNodeStyle:fe={},defaultEdgeStyle:Me={},defaultComboStyle:Se={},defaultNodeStatusStyle:Te={},defaultEdgeStatusStyle:ye={},defaultComboStatusStyle:we={}}=S,me=pe(S,["defaultNodeStyle","defaultEdgeStyle","defaultComboStyle","defaultNodeStatusStyle","defaultEdgeStatusStyle","defaultComboStatusStyle"]);s.isTree=!!_.children||Ct.indexOf(String(n.layout&&n.layout.type))!==-1;const le=Re({defaultNode:{style:ee(N({},A.style),{defaultNodeStyle:fe,_theme:g}),type:A.type||"graphin-circle"},defaultEdge:{style:ee(N({},E.style),{defaultEdgeStyle:Me,_theme:g}),type:E.type||"graphin-line"},defaultCombo:{style:ee(N({},M.style),{defaultComboStyle:Se,_theme:g}),type:M.type||"combo"},nodeStateStyles:ee(N({},G),{defaultNodeStatusStyle:Te}),edgeStateStyles:ee(N({},B),{defaultEdgeStatusStyle:ye}),comboStateStyles:ee(N({},H),{defaultComboStatusStyle:we})});u.theme=s.theme=N(N({},le),me),s.options=Re(N(ee(N({container:c.value,renderer:"canvas",width:s.width,height:s.height,animate:Z!==!1},le),{modes:z}),ue)),s.isTree?(s.options.layout=h||Zn,s.graph=new ie.TreeGraph(s.options)):s.graph=new ie.Graph(s.options),u.graph=s.graph,s.graph.on("afterlayout",()=>{K&&K(s.graph)}),s.graph.data(s.data),s.isTree||(s.graphDOM=c.value,s.context=u,s.props=Re(N({},n)),u.layout=s.layout=new Qn(s),s.layout.start()),s.graph.render(),m(),u.apis=Ot(s.graph),u.isReady=!0},m=()=>{if(!s.isTree){const{nodes:g=[],edges:_=[]}=n.data;g.forEach(h=>{const{status:y}=h;y&&Object.keys(y).forEach(k=>{s.graph.setItemState(h.id,k,!!y[k])})}),_.forEach(h=>{const{status:y}=h;y&&Object.keys(y).forEach(k=>{s.graph.setItemState(h.id,k,!!y[k])})})}};ae(()=>{p()}),be(()=>n.data,g=>{let _;Ba(mt(g),mt(s.data))||(f(g),s.isTree?s.graph.changeData(s.data):(_=s.dragNodes.filter(h=>s.data.nodes&&s.data.nodes.find(y=>y.id===h.id)),s.data.nodes&&s.data.nodes.length>0&&s.data.nodes.forEach(h=>{const y=_.find(k=>k.id===h.id);if(y){const{force:k={}}=y.layout||{};h.layout=ee(N({},h.layout),{force:{mass:k.mass}})}})),s.graph.data(s.data),s.graph.set("layoutController",null),s.graph.changeData(s.data),s.data=s.layout.getDataFromGraph(),s.layout.changeLayout(),m(),u.apis=Ot(s.graph),u.dragNodes=s.dragNodes=_||s.dragNodes,s.graph.emit("graphin:datachange"))}),be(()=>n.layout,(g,_)=>{if(s.isTree){s.graph.updateLayout(g);return}s.data=s.layout.getDataFromGraph(),s.layout.changeLayout(),s.graph.emit("graphin:layoutchange",{prevLayout:_,layout:g})}),be(()=>n.layoutCache,g=>{s.layoutCache=g});const b=()=>{s.layout&&s.layout.destroy&&s.layout.destroy(),s.layout={},s.graph.clear(),s.data={nodes:[],edges:[],combos:[]},s.graph.destroy()};return re(()=>{b()}),()=>{const{containerId:g,style:_,modes:h,containerStyle:y}=n,{isReady:k,theme:M={}}=u,{background:E}=M;return I("div",{id:g||"graphin-container",style:N({height:"100%",width:"100%",position:"relative"},y)},I("div",{"data-testid":"custom-element",class:"graphin-core",ref:c,style:N({height:"100%",width:"100%",minHeight:"500px",background:E||void 0},_)}),I("div",{class:"graphin-components"},k?I("div",{},[h.default.length==0?I("div",{},[I(Tt),I(At),I(Pt),I(jt),I(Dt),I(Lt)]):null,a.default?a.default():null,c.value?I(It,{graphDOM:c.value}):null]):null))}}});var ii=function(a){return Array.from(String(a)).reduce(function(e,t){return t.charCodeAt(0)>255?e+2:e+1},0)};function ri(n){return di(n)||li(n)||si(n)||oi()}function oi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function si(n,a){if(n){if(typeof n=="string")return at(n,a);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return at(n,a)}}function li(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function di(n){if(Array.isArray(n))return at(n)}function at(n,a){(a==null||a>n.length)&&(a=n.length);for(var e=0,t=new Array(a);e<a;e++)t[e]=n[e];return t}var nt=function(a,e){var t=e.split("."),i=t.reduce(function(r,o,l,d){var s=r[o];return!s&&l!==d.length-1?{}:s},a);return i},ui=function(a,e){var t=new Map;return a.forEach(function(i){var r=nt(i,e),o=t.get(r);o?t.set(r,[].concat(ri(o),[i])):t.set(r,[i])}),t};const ta=n=>{const{bindType:a="node",bindEvent:e="contextmenu",container:t}=n,{graph:i}=J(),r=De({visible:!1,x:0,y:0,selectedItems:[]}),o=r.onShow=s=>{s.preventDefault(),s.stopPropagation();const c=i.get("width"),u=i.get("height");if(!t.value)return;const f=t.value.getBoundingClientRect(),p=i.get("offsetX")||0,m=i.get("offsetY")||0,b=i.getContainer().offsetTop,v=i.getContainer().offsetLeft;let g=s.canvasX+v+p,_=s.canvasY+b+m;if(g+f.width>c&&(g=s.canvasX-f.width-p+v),_+f.height>u&&(_=s.canvasY-f.height-m+b),a==="node"){const{x:h,y}=s.item&&s.item.getModel(),k=i.getCanvasByPoint(h,y),M=s.canvasX-k.x,E=s.canvasY-k.y;g=g-M,_=_-E}r.visible=!0,r.x=g,r.y=_,r.item=s.item},l=r.onClose=()=>{r.visible=!1,r.x=0,r.y=0},d=s=>{r.selectedItems=s.selectedItems};return ae(()=>{i.on(`${a}:${e}`,o),a=="canvas"&&e=="click"||i.on("canvas:click",l),i.on("canvas:drag",l),i.on("wheelzoom",l),a==="canvas"&&i.on("nodeselectchange",d)}),re(()=>{i.off(`${a}:${e}`,o),i.off("canvas:click",l),i.off("canvas:drag",l),i.off("wheelzoom",l),i.off("nodeselectchange",d)}),r},ci={width:"120px",boxShadow:"0 4px 12px rgb(0 0 0 / 15%)"},fi=U({name:"ContextMenu",props:{bindType:{type:String,default:()=>"node"},bindEvent:{type:String,default:()=>"contextmenu"},style:{type:Object,default:()=>({})}},setup(n,{slots:a}){const{bindType:e,bindEvent:t}=n,i=X(null),r=ta({bindType:e,bindEvent:t,container:i});return()=>{const{visible:o,x:l,y:d,item:s,onClose:c,selectedItems:u}=r,{style:f}=n,p={position:"absolute",left:l+"px",top:d+"px"},m=s&&!s.destroyed&&s.getModel&&s.getModel().id||"";return I("div",{ref:i,className:"graphin-components-contextmenu",style:N(N(N({},ci),f),p),key:m},o&&a.default?a.default({visible:o,x:l,y:d,item:s,onClose:c,id:m,selectedItems:u}):null)}}}),pi={r:249,scaleRByWheel:!0,minR:100,maxR:500,delegateStyle:{stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},showLabel:!1},vi=U({name:"FishEye",inject:[oe],props:{handleEscListener:{type:Function},visible:{type:Boolean,default:()=>!0},options:{type:Object,default:()=>({})}},setup(n){const{graph:a}=J(),{options:e,visible:t,handleEscListener:i}=n,r=l=>{l.keyCode===27&&(i&&i(),a.get("canvas").setCursor("default"))},o=X();return ae(()=>{const l=N(N({},pi),e);l.showLabel&&a.getNodes().forEach(d=>{d.getContainer().getChildren().forEach(s=>{s.get("type")==="text"&&s.hide()})}),o.value=new ie.Fisheye(l),t&&(a.addPlugin(o.value),a.get("canvas").setCursor("zoom-in")),i&&window.addEventListener("keydown",r)}),re(()=>{a&&!a.destroyed&&(a.get("canvas").setCursor("default"),a.removePlugin(o.value)),i&&window.removeEventListener("keydown",r)}),()=>null}}),$t={members:[],type:"round-convex",nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10},Bt=(n,a)=>{const o=n,{style:e={}}=o,t=pe(o,["style"]),l=a,{style:i={}}=l,r=pe(l,["style"]);return ee(N(N({},t),r),{style:N(N({},e),i)})},gi=U({name:"Hull",inject:[oe],props:{options:{type:Array,default:()=>[]}},setup(n){const{graph:a}=J(),e=X([]),t=Jt(()=>{e.value.forEach((r,o)=>{r.group.destroyed?e.value[o]=a.createHull(Bt($t,N({id:`${Math.random()}`},n.options[o]))):r.updateData(r.members)})}),i=()=>{e.value=n.options.map(r=>a.createHull(Bt($t,N({id:`${Math.random()}`},r))))};return be(()=>n.options,()=>{e.value&&e.value.length&&e.value.forEach(r=>a.removeHull(r)),i()}),ae(()=>{i(),a.on("afterupdateitem",t),a.on("aftergraphrefreshposition",t)}),re(()=>{a.off("afterupdateitem",t),a.off("aftergraphrefreshposition",t)}),()=>null}}),aa=n=>{const{bindType:a="node",sortKey:e}=n,{graph:t}=J(),i=De({dataMap:new Map,options:[],data:{}}),r=()=>{const o=t.save();if(o.children)i.dataMap=new Map,i.options=[];else{const l=ui(o[`${a}s`],e),s=Array.from(l.keys()).map(c=>{const u=(l.get(c)||[{}])[0],f=nt(u,"style.keyshape.fill"),p=nt(u,"style.color");return{color:f||p,value:c,label:c,checked:!0}});i.dataMap=l,i.options=s}};return ae(()=>{t.on("aftergraphrefreshposition",r)}),re(()=>{t.off("aftergraphrefreshposition",r)}),i},hi=U({name:"LegendNode",props:{options:{type:Object},dataMap:{type:Object}},setup(n,{slots:a}){const{graph:e,theme:t}=J(),{mode:i="light"}=t,r=De({items:n.options});be(()=>n.options,l=>r.items=l);const o=l=>{const d=ee(N({},l),{checked:!l.checked}),s=r.items.map(u=>u.value===l.value?d:u);r.items=s,n.dataMap.get(d.value).forEach(u=>{e.setItemState(u.id,"active",d.checked),e.setItemState(u.id,"inactive",!d.checked)})};return()=>I("ul",{class:"graphin-components-legend-content"},r.items.map(l=>{const{label:d,checked:s,color:c}=l,u={light:{active:c,inactive:"#ddd"},dark:{active:c,inactive:"#2f2f2f"}},f={light:{active:"#000",inactive:"#ddd"},dark:{active:"#fff",inactive:"#2f2f2f"}},p=s?"active":"inactive";return I("li",{key:l.value,class:"item",onClick:()=>o(l),onKeyDown:()=>o(l)},a.default?a.default({dotColor:u[i][p],labelColor:f[i][p],label:d,option:l,data:n.dataMap.get(l.value)}):I(Ne,{},[I("span",{class:"dot",style:{background:u[i][p]}}),I("span",{class:"label",style:{color:f[i][p]}},d)]))}))}}),yi={position:"absolute",top:"0px",right:"0px"},mi=U({name:"Legend",props:["bindType","sortKey","style"],setup(n,{slots:a}){const{bindType:e="node",sortKey:t,style:i}=n,r=aa({bindType:e,sortKey:t});return()=>{const{dataMap:o,options:l=[]}=r;return I("div",{class:"graphin-components-legend",style:N(N({},yi),i)},a.default&&a.default({bindType:e,sortKey:t,dataMap:o,options:l}))}}}),bi={className:"graphin-minimap",viewportClassName:"graphin-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0},xi={container:{position:"absolute",bottom:0,left:0,background:"#fff",boxShadow:"0px 8px 10px -5px rgba(0,0,0,0.2), 0px 16px 24px 2px rgba(0,0,0,0.14), 0px 6px 30px 5px rgba(0,0,0,0.12)"}},_i=U({name:"MiniMap",inject:[oe],props:{style:{type:Object,default:()=>({})},visible:{type:Boolean,default:()=>!1},options:{type:Object,default:()=>({})}},setup(n){const{graph:a}=J(),{options:e,style:t={}}=n,i=N(N({},xi.container),t),r=X(),o=X(),l=120;return ae(()=>{const d=a.getWidth(),s=a.getHeight(),c=a.get("fitViewPadding"),u=[(d-c*2)/(s-c*2)*l,l],f=N(ee(N({container:o.value},bi),{size:u}),e);r.value=new ie.Minimap(f),a.addPlugin(r.value)}),re(()=>{r.value&&!r.value.destroyed&&a.removePlugin(r.value)}),()=>I("div",{ref:o,style:i})}}),zt={line:{stroke:"#FA8C16",lineWidth:.5},itemAlignType:"center"},Si=U({name:"SnapLine",inject:[oe],props:{visible:{type:Boolean,default:()=>!1},options:{type:Object,default:()=>zt}},setup(n){const{graph:a}=J(),{options:e,visible:t}=n;return ka(i=>{const r=N(N({},zt),e),o=new ie.SnapLine(r);t&&a.addPlugin(o),i(()=>{a&&!a.destroyed&&a.removePlugin(o)})}),()=>null}}),wi=({placement:n,nodeSize:a,x:e,y:t,bindType:i="node",visible:r})=>i==="edge"?{left:e,top:t}:n==="top"?r?{left:e,top:t-a/2,opacity:1,transform:"translate(-50%,calc(-100% - 6px))",transition:"opacity 0.5s,transform 0.5s"}:{left:0,top:0,opacity:.5,transform:"translate(-50%,-100%)",transition:"opacity 0.5s,transform 0.5s"}:n==="bottom"?r?{left:e,top:t+a/2,opacity:1,transform:"translate(-50%,6px)",transition:"opacity 0.5s,transform 0.5s"}:{left:e,top:t+a/2,opacity:.5,transform:"translate(-50%,0px)",transition:"opacity 0.5s,transform 0.5s"}:n==="left"?r?{left:e-a/2,top:t,transform:"translate(calc(-100% - 6px),-50%)",opacity:1,transition:"opacity 0.5s,transform 0.5s"}:{opacity:0,left:e-a/2,top:t,transform:"translate(-100%,-50%)",transition:"opacity 0.5s,transform 0.5s"}:n==="right"?r?{left:e+a/2,top:t,transform:"translate(6px,-50%)",opacity:1,transition:"opacity 0.5s,transform 0.5s"}:{left:e+a/2,top:t,transform:"translate(0,-50%)",opacity:0,transition:"opacity 0.5s,transform 0.5s"}:n==="center"?r?{left:e,top:t,opacity:1,transition:"opacity 0.5s,transform 0.5s"}:{left:e,top:t,opacity:0,transition:"opacity 0.5s,transform 0.5s"}:{left:e,top:t},na=n=>{const{bindType:a="node",container:e}=n,{graph:t}=J(),i=De({visible:!1,x:0,y:0,item:null}),r=X(),o=u=>{u.preventDefault(),u.stopPropagation(),r.value&&clearTimeout(r.value);const f=t.getPointByClient(u.clientX,u.clientY);let{x:p,y:m}=t.getCanvasByPoint(f.x,f.y);if(a==="node"&&u.item){const{x:b=0,y:v=0}=u.item.getModel(),g=t.getCanvasByPoint(b,v),_=u.canvasX-g.x,h=u.canvasY-g.y;p=p-_,m=m-h}i.visible=!0,i.item=u.item,i.x=p,i.y=m},l=()=>{r.value&&clearTimeout(r.value),r.value=setTimeout(()=>{i.visible=!1,i.x=0,i.y=0},200)},d=()=>{i.visible=!1,i.x=0,i.y=0,i.item=null},s=u=>{const f=t.getPointByClient(u.clientX,u.clientY);let{x:p,y:m}=t.getCanvasByPoint(f.x,f.y);if(a==="node"){if(u.item){const{x:b=0,y:v=0}=u.item.getModel(),g=t.getCanvasByPoint(b,v),_=u.canvasX-g.x,h=u.canvasY-g.y;p=p-_,m=m-h}i.visible=!0,i.x=p,i.y=m}},c=()=>{clearTimeout(r.value)};return ae(()=>{t.on(`${a}:mouseenter`,o),t.on(`${a}:mouseleave`,l),t.on("afterremoveitem",l),t.on("node:dragstart",d),t.on("node:dragend",s),e.value&&(e.value.addEventListener("mouseenter",c),e.value.addEventListener("mouseleave",l))}),re(()=>{t.off(`${a}:mouseenter`,o),t.off(`${a}:mouseleave`,l),t.off("afterremoveitem",l),t.off("node:dragstart",d),t.off("node:dragend",s),e.value&&(e.value.removeEventListener("mouseenter",c),e.value.removeEventListener("mouseleave",l))}),i},ki={width:"120px",boxShadow:"0 4px 12px rgb(0 0 0 / 15%)"},Oi=U({name:"Tooltip",props:{bindType:{type:String,default:()=>"node"},style:{type:Object,default:()=>({})},placement:{type:String,default:()=>"top"},hasArrow:{type:Boolean,default:()=>!1}},setup(n,{slots:a}){const{bindType:e}=n,t=X(null),i=na({bindType:e,container:t});return()=>{const{visible:r,x:o,y:l,item:d}=i,{style:s,placement:c="top",hasArrow:u,bindType:f="node"}=n;let p=40;try{if(d){const{type:h}=d.getModel();if(h==="graphin-cirle"){const{style:y}=d.getModel();y&&(p=y.keyshape.size)}}}catch(h){}const b=wi({placement:c,nodeSize:p+12,x:o,y:l,bindType:f,visible:r}),v=ee(N({position:"absolute"},b),{left:b.left+"px",top:b.top+"px"}),g=d&&!d.destroyed&&d.getModel&&d.getModel()||{},_=g.id||"";return I("div",{ref:t,class:`graphin-components-tooltip ${c}`,style:N(N(N({},ki),s),v),key:_},[r&&u?I("div",{class:`tooltip-arrow ${c}`}):null,r&&a.default&&a.default({item:d,bindType:f,model:g,id:_})])}}}),Ci=[{name:"布局切换",key:"layout",icon:"ant-design:swap-outlined"},{name:"放大",key:"zoomOut",icon:"ant-design:zoom-in-outlined"},{name:"缩小",key:"zoomIn",icon:"ant-design:zoom-out-outlined"},{name:"实际大小",key:"realZoom",icon:"ant-design:one-to-one-outlined"},{name:"自适应",key:"autoZoom",icon:"ant-design:compress-outlined"},{name:"截图",key:"screenShot",icon:"ant-design:camera-outlined"},{name:"默认设置",key:"setting",icon:"ant-design:setting-outlined"}],Ni={container:{position:"absolute",top:"15px",right:"15px",borderRadius:"5px",padding:"10px 0",background:"#fff",textAlign:"center",boxShadow:"0px 0px 10px 1px rgba(0, 0, 0, 0.14)"}},Ei=U({name:"Toolbar",inject:[oe],props:{style:{type:Object,default:()=>({})},visible:{type:Boolean,default:()=>!1},options:{type:Array,default:()=>Ci},onChange:{type:Function,default:()=>()=>{}},onSettingChange:{type:Function,default:()=>()=>{}},direction:{type:String,default:"vertical"}},setup(n){const{graph:a,apis:e}=J(),{options:t,style:i={},onChange:r,onSettingChange:o}=n,l=N(N({},Ni.container),i),d=X(),s=()=>{},c=u=>{try{const{key:f}=u;f=="zoomOut"?e.handleZoomOut():f=="zoomIn"?e.handleZoomIn():f=="realZoom"?e.handleRealZoom():f=="autoZoom"?e.handleAutoZoom():f=="screenShot"?a.downloadFullImage("graph_"+new Date().getTime(),"image/png","#fff"):f=="shortest"?s():f=="layout"||f=="setting"&&o&&o(),r&&r(a,u)}catch(f){}};return()=>I("div",{ref:d,style:l},I("ul",{style:{borderRadius:"5px",margin:0}},t.map(u=>I("li",{onClick:()=>c(u),style:{cursor:"pointer",padding:"10px 15px"}},I(Ra,{placement:"left",title:u.name},I(ma,{icon:u.icon,size:18}))))))}}),Mi=Object.freeze(Object.defineProperty({__proto__:null,ContextMenu:fi,FishEye:vi,Hull:gi,Legend:mi,LegendNode:hi,MiniMap:_i,SnapLine:Si,Toolbar:Ei,Tooltip:Oi,useContextMenu:ta,useLegend:aa,useTooltip:na},Symbol.toStringTag,{value:"Module"}));function Ti(n){return Di(n)||ji(n)||Pi(n)||Ai()}function Ai(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pi(n,a){if(n){if(typeof n=="string")return it(n,a);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return it(n,a)}}function ji(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Di(n){if(Array.isArray(n))return it(n)}function it(n,a){(a==null||a>n.length)&&(a=n.length);for(var e=0,t=new Array(a);e<a;e++)t[e]=n[e];return t}var Li=function(a,e){var t=a.data.id,i=0,r=0,o=0;return e.forEach(function(l){l.source.id===t&&(r+=1,i+=1),l.target.id===t&&(o+=1,i+=1)}),{degree:i,sDegree:r,tDegree:o}},Ii=function(a,e){return Ti(new Set(a==null?void 0:a.map(function(t){var i;return(i=t==null?void 0:t.data)===null||i===void 0?void 0:i[e]})))||[]},rt=function(a,e,t){var i,r;return a==="source"?((i=t==null?void 0:t.find(function(o){var l;return((l=o.target)===null||l===void 0?void 0:l.id)===e.id}))===null||i===void 0?void 0:i.source)||{}:((r=t==null?void 0:t.find(function(o){var l;return((l=o.source)===null||l===void 0?void 0:l.id)===e.id}))===null||r===void 0?void 0:r.target)||{}},ia=function(a,e,t,i){var r,o=((r=t==null?void 0:t.data)===null||r===void 0?void 0:r[e])||"",l=(i==null?void 0:i.filter(function(d){var s;return((s=d==null?void 0:d.data)===null||s===void 0?void 0:s[e])===o}))||[];return a==="leaf"&&(l=l.filter(function(d){var s,c,u,f;return((c=(s=d.data)===null||s===void 0?void 0:s.layout)===null||c===void 0?void 0:c.sDegree)===0||((f=(u=d.data)===null||u===void 0?void 0:u.layout)===null||f===void 0?void 0:f.tDegree)===0})),l},Rt=function(a,e,t){var i=[];switch(a){case"source":i=t==null?void 0:t.filter(function(r){var o;return((o=r.source)===null||o===void 0?void 0:o.id)===e.id}).map(function(r){return r.target});break;case"target":i=t==null?void 0:t.filter(function(r){var o;return((o=r.target)===null||o===void 0?void 0:o.id)===e.id}).map(function(r){return r.source});break;case"both":i=t==null?void 0:t.filter(function(r){var o;return((o=r.source)===null||o===void 0?void 0:o.id)===e.id}).map(function(r){return r.target}).concat(t==null?void 0:t.filter(function(r){var o;return((o=r.target)===null||o===void 0?void 0:o.id)===e.id}).map(function(r){return r.source}));break}return i=tt(i,"id"),i},$i=function(a,e,t,i){var r,o=((r=e==null?void 0:e.data)===null||r===void 0?void 0:r.layout)||{},l=o.sDegree,d=o.tDegree,s=e,c=[];l===0?(s=rt("source",e,t),c=Rt("both",s,t)):d===0&&(s=rt("target",e,t),c=Rt("both",s,t)),c=c.filter(function(f){var p;return((p=f.data)===null||p===void 0?void 0:p.layout)&&(f.data.layout.sDegree===0||f.data.layout.tDegree===0)});var u=ia(a,i,e,c);return{coreNode:s,relativeLeafNodes:c,sameTypeLeafNodes:u}},Bi=function(a){var e=a.map(function(d){return d.x}),t=a.map(function(d){return d.y}),i=(Math.max.apply(null,e)+Math.min.apply(null,e))/2,r=(Math.max.apply(null,t)+Math.min.apply(null,t))/2,o=function(s,c){return Math.sqrt((s-i)*(s-i)+(c-r)*(c-r))},l=a.map(function(d){return o(d.x||0,d.y||0)});return a[l.findIndex(function(d){return d===Math.min.apply(null,l)})]},zi=function(a){var e={x:0,y:0};a.forEach(function(i){e.x+=i.x||0,e.y+=i.y||0});var t=a.length||1;return{x:e.x/t,y:e.y/t}};const Ce={getDegree:Li,getRelativeNodesType:Ii,getCoreNodeAndRelativeLeafNodes:$i,getCoreNode:rt,getSameTypeNodes:ia,getMinDistanceNode:Bi,getAvgNodePosition:zi};function ra(n,a,e){return Object.defineProperty(n,"prototype",{writable:!1}),n}function oa(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}var Ri=ra(function n(a){oa(this,n),this.id=a.id,this.data=a||{},this.x=a.x||0,this.y=a.y||0}),Fi=ra(function n(a,e,t,i){oa(this,n),this.id=a,this.source=e,this.target=t,this.data=i||{}});function Wi(n){const a=+this._x.call(null,n),e=+this._y.call(null,n);return sa(this.cover(a,e),a,e,n)}function sa(n,a,e,t){if(isNaN(a)||isNaN(e))return n;var i,r=n._root,o={data:t},l=n._x0,d=n._y0,s=n._x1,c=n._y1,u,f,p,m,b,v,g,_;if(!r)return n._root=o,n;for(;r.length;)if((b=a>=(u=(l+s)/2))?l=u:s=u,(v=e>=(f=(d+c)/2))?d=f:c=f,i=r,!(r=r[g=v<<1|b]))return i[g]=o,n;if(p=+n._x.call(null,r.data),m=+n._y.call(null,r.data),a===p&&e===m)return o.next=r,i?i[g]=o:n._root=o,n;do i=i?i[g]=new Array(4):n._root=new Array(4),(b=a>=(u=(l+s)/2))?l=u:s=u,(v=e>=(f=(d+c)/2))?d=f:c=f;while((g=v<<1|b)===(_=(m>=f)<<1|p>=u));return i[_]=r,i[g]=o,n}function Hi(n){var a,e,t=n.length,i,r,o=new Array(t),l=new Array(t),d=1/0,s=1/0,c=-1/0,u=-1/0;for(e=0;e<t;++e)isNaN(i=+this._x.call(null,a=n[e]))||isNaN(r=+this._y.call(null,a))||(o[e]=i,l[e]=r,i<d&&(d=i),i>c&&(c=i),r<s&&(s=r),r>u&&(u=r));if(d>c||s>u)return this;for(this.cover(d,s).cover(c,u),e=0;e<t;++e)sa(this,o[e],l[e],n[e]);return this}function Zi(n,a){if(isNaN(n=+n)||isNaN(a=+a))return this;var e=this._x0,t=this._y0,i=this._x1,r=this._y1;if(isNaN(e))i=(e=Math.floor(n))+1,r=(t=Math.floor(a))+1;else{for(var o=i-e||1,l=this._root,d,s;e>n||n>=i||t>a||a>=r;)switch(s=(a<t)<<1|n<e,d=new Array(4),d[s]=l,l=d,o*=2,s){case 0:i=e+o,r=t+o;break;case 1:e=i-o,r=t+o;break;case 2:i=e+o,t=r-o;break;case 3:e=i-o,t=r-o;break}this._root&&this._root.length&&(this._root=l)}return this._x0=e,this._y0=t,this._x1=i,this._y1=r,this}function Vi(){var n=[];return this.visit(function(a){if(!a.length)do n.push(a.data);while(a=a.next)}),n}function Gi(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function te(n,a,e,t,i){this.node=n,this.x0=a,this.y0=e,this.x1=t,this.y1=i}function Xi(n,a,e){var t,i=this._x0,r=this._y0,o,l,d,s,c=this._x1,u=this._y1,f=[],p=this._root,m,b;for(p&&f.push(new te(p,i,r,c,u)),e==null?e=1/0:(i=n-e,r=a-e,c=n+e,u=a+e,e*=e);m=f.pop();)if(!(!(p=m.node)||(o=m.x0)>c||(l=m.y0)>u||(d=m.x1)<i||(s=m.y1)<r))if(p.length){var v=(o+d)/2,g=(l+s)/2;f.push(new te(p[3],v,g,d,s),new te(p[2],o,g,v,s),new te(p[1],v,l,d,g),new te(p[0],o,l,v,g)),(b=(a>=g)<<1|n>=v)&&(m=f[f.length-1],f[f.length-1]=f[f.length-1-b],f[f.length-1-b]=m)}else{var _=n-+this._x.call(null,p.data),h=a-+this._y.call(null,p.data),y=_*_+h*h;if(y<e){var k=Math.sqrt(e=y);i=n-k,r=a-k,c=n+k,u=a+k,t=p.data}}return t}function Yi(n){if(isNaN(c=+this._x.call(null,n))||isNaN(u=+this._y.call(null,n)))return this;var a,e=this._root,t,i,r,o=this._x0,l=this._y0,d=this._x1,s=this._y1,c,u,f,p,m,b,v,g;if(!e)return this;if(e.length)for(;;){if((m=c>=(f=(o+d)/2))?o=f:d=f,(b=u>=(p=(l+s)/2))?l=p:s=p,a=e,!(e=e[v=b<<1|m]))return this;if(!e.length)break;(a[v+1&3]||a[v+2&3]||a[v+3&3])&&(t=a,g=v)}for(;e.data!==n;)if(i=e,!(e=e.next))return this;return(r=e.next)&&delete e.next,i?(r?i.next=r:delete i.next,this):a?(r?a[v]=r:delete a[v],(e=a[0]||a[1]||a[2]||a[3])&&e===(a[3]||a[2]||a[1]||a[0])&&!e.length&&(t?t[g]=e:this._root=e),this):(this._root=r,this)}function Ui(n){for(var a=0,e=n.length;a<e;++a)this.remove(n[a]);return this}function Ki(){return this._root}function Qi(){var n=0;return this.visit(function(a){if(!a.length)do++n;while(a=a.next)}),n}function qi(n){var a=[],e,t=this._root,i,r,o,l,d;for(t&&a.push(new te(t,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!n(t=e.node,r=e.x0,o=e.y0,l=e.x1,d=e.y1)&&t.length){var s=(r+l)/2,c=(o+d)/2;(i=t[3])&&a.push(new te(i,s,c,l,d)),(i=t[2])&&a.push(new te(i,r,c,s,d)),(i=t[1])&&a.push(new te(i,s,o,l,c)),(i=t[0])&&a.push(new te(i,r,o,s,c))}return this}function Ji(n){var a=[],e=[],t;for(this._root&&a.push(new te(this._root,this._x0,this._y0,this._x1,this._y1));t=a.pop();){var i=t.node;if(i.length){var r,o=t.x0,l=t.y0,d=t.x1,s=t.y1,c=(o+d)/2,u=(l+s)/2;(r=i[0])&&a.push(new te(r,o,l,c,u)),(r=i[1])&&a.push(new te(r,c,l,d,u)),(r=i[2])&&a.push(new te(r,o,u,c,s)),(r=i[3])&&a.push(new te(r,c,u,d,s))}e.push(t)}for(;t=e.pop();)n(t.node,t.x0,t.y0,t.x1,t.y1);return this}function er(n){return n[0]}function tr(n){return arguments.length?(this._x=n,this):this._x}function ar(n){return n[1]}function nr(n){return arguments.length?(this._y=n,this):this._y}function la(n,a,e){var t=new ut(a==null?er:a,e==null?ar:e,NaN,NaN,NaN,NaN);return n==null?t:t.addAll(n)}function ut(n,a,e,t,i,r){this._x=n,this._y=a,this._x0=e,this._y0=t,this._x1=i,this._y1=r,this._root=void 0}function Ft(n){for(var a={data:n.data},e=a;n=n.next;)e=e.next={data:n.data};return a}var ne=la.prototype=ut.prototype;ne.copy=function(){var n=new ut(this._x,this._y,this._x0,this._y0,this._x1,this._y1),a=this._root,e,t;if(!a)return n;if(!a.length)return n._root=Ft(a),n;for(e=[{source:a,target:n._root=new Array(4)}];a=e.pop();)for(var i=0;i<4;++i)(t=a.source[i])&&(t.length?e.push({source:t,target:a.target[i]=new Array(4)}):a.target[i]=Ft(t));return n};ne.add=Wi;ne.addAll=Hi;ne.cover=Zi;ne.data=Vi;ne.extent=Gi;ne.find=Xi;ne.remove=Yi;ne.removeAll=Ui;ne.root=Ki;ne.size=Qi;ne.visit=qi;ne.visitAfter=Ji;ne.x=tr;ne.y=nr;var ir=.81,Wt=.1;function rr(n,a,e){var t=e/(a*a),i=n.map(function(o,l){return Object.assign(Object.assign({index:l},o),{vx:0,vy:0,weight:t})}),r=la(i,function(o){return o.x},function(o){return o.y}).visitAfter(or);return i.forEach(function(o){sr(o,r)}),i.map(function(o){return{vx:o.vx,vy:o.vy}})}function or(n){var a=0,e=0,t=0;if(n.length){for(var i=0;i<4;i++){var r=n[i];r&&r.weight&&(a+=r.weight,e+=r.x*r.weight,t+=r.y*r.weight)}n.x=e/a,n.y=t/a,n.weight=a}else{var o=n;n.x=o.data.x,n.y=o.data.y,n.weight=o.data.weight}}function sr(n,a){var e=function(i,r,o,l,d){var s=n.x-i.x||.001,c=n.y-i.y||.001,u=l-r,f=s*s+c*c+Wt,p=Math.sqrt(f)+Wt;if(u*u/ir<f)return n.vx+=s/p*i.weight/f,n.vy+=c/p*i.weight/f,!0;if(i.length)return!1;i.data!==n&&(n.vx+=s/p*i.data.weight/f,n.vy+=c/p*i.data.weight/f)};a.visit(e)}function lr(n,a,e){return Object.defineProperty(n,"prototype",{writable:!1}),n}function dr(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}var de=lr(function n(a,e){var t=this;dr(this,n),this.getvec=function(){return t},this.add=function(i){return new n(t.x+i.x,t.y+i.y)},this.subtract=function(i){return new n(t.x-i.x,t.y-i.y)},this.magnitude=function(){return Math.sqrt(t.x*t.x+t.y*t.y)},this.normalise=function(){return t.divide(t.magnitude())},this.divide=function(i){return new n(t.x/i||0,t.y/i||0)},this.scalarMultip=function(i){return new n(t.x*i,t.y*i)},this.x=a,this.y=e});function ur(n,a,e){return Object.defineProperty(n,"prototype",{writable:!1}),n}function cr(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}var Ht=ur(function n(a,e,t){var i=this,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;cr(this,n),this.updateAcc=function(o){i.a=i.a.add(o.divide(i.m))},this.p=a,this.m=r,this.v=new de(0,0),this.a=new de(0,0),this.id=e,this.data=t});function fr(n,a,e){return Object.defineProperty(n,"prototype",{writable:!1}),n}function pr(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}var Zt=fr(function n(a,e,t){pr(this,n),this.source=a,this.target=e,this.length=t});function vr(n,a,e){return Object.defineProperty(n,"prototype",{writable:!1}),n}function gr(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}var hr=vr(function n(a){var e=this;gr(this,n),this.updateOptions=function(t){t&&Object.keys(t).forEach(function(i){e.props[i]=t[i]})},this.setData=function(t){e.nodes=[],e.edges=[],e.nodeSet={},e.edgeSet={},e.nodePoints=new Map,e.edgeSprings=new Map,e.sourceData=t,e.judgingDistance=0,("nodes"in t||"edges"in t)&&(e.addNodes(t.nodes),e.addEdges(t.edges))},this.getMass=function(t){var i,r=t.layout||{},o=r.degree,l=o===void 0?(i=Ce.getDegree(t,e.edges))===null||i===void 0?void 0:i.degree:o,d=r.force;return d&&d.mass?d.mass:l<5?1:l*5},this.init=function(){var t=e.props,i=t.width,r=t.height,o=e.props.centripetalOptions,l=e.props,d=l.leafCluster,s=l.clustering,c=l.nodeClusterBy,u=l.clusterNodeStrength,f=function(y){return typeof u=="function"?u(y):u},p;if(e.nodes.forEach(function(h){var y=h.data.x||i/2,k=h.data.y||r/2,M=new de(y,k);h.data.layout||(h.data.layout={});var E=Ce.getDegree(h,e.edges);h.data.layout=Object.assign(Object.assign({},h.data.layout),E);var A=e.getMass(h.data);e.nodePoints.set(h.id,new Ht(M,String(h.id),h.data,A))}),e.edges.forEach(function(h){var y=e.nodePoints.get(h.source.id),k=e.nodePoints.get(h.target.id),M=e.props.defSpringLen(h,y,k);e.edgeSprings.set(h.id,new Zt(y,k,M))}),d){p=e.getSameTypeLeafMap();var m=Ce.getRelativeNodesType(e.nodes,c);o={single:100,leaf:function(y,k,M){var E=p[y.id]||{},A=E.relativeLeafNodes,G=E.sameTypeLeafNodes;return(G==null?void 0:G.length)===(A==null?void 0:A.length)||(m==null?void 0:m.length)===1?1:f(y)},others:1,center:function(y,k,M){var E,A=((E=y.data)===null||E===void 0?void 0:E.layout)||{},G=A.degree;if(!G)return{x:100,y:100};var B;if(G===1){var H=p[y.id]||{},z=H.sameTypeLeafNodes,Z=z===void 0?[]:z;Z.length===1?B=void 0:Z.length>1&&(B=Ce.getAvgNodePosition(Z))}else B=void 0;return{x:B==null?void 0:B.x,y:B==null?void 0:B.y}}}}if(s){p||(p=e.getSameTypeLeafMap());var b=Array.from(new Set(e.nodes.map(function(h){var y;return(y=h.data)===null||y===void 0?void 0:y[c]}))).filter(function(h){return h!==void 0}),v={};b.forEach(function(h){var y=e.nodes.filter(function(k){var M;return((M=k.data)===null||M===void 0?void 0:M[c])===h});v[h]=Ce.getAvgNodePosition(y)}),o={single:function(y){return f(y)},leaf:function(y){return f(y)},others:function(y){return f(y)},center:function(y,k,M){var E,A=v[(E=y.data)===null||E===void 0?void 0:E[c]];return{x:A==null?void 0:A.x,y:A==null?void 0:A.y}}}}e.centripetalOptions=Object.assign(Object.assign({},e.centripetalOptions),o);var g=e.nodePoints.size,_=Math.pow(10,2);e.props.minEnergyThreshold=1/2*Math.pow(1,2)*1*g*_},this.start=function(){e.init(),e.props.animation?e.animation():e.slienceForce()},this.calTotalEnergy=function(){var t=0;return e.nodes.forEach(function(i){var r=e.nodePoints.get(i.id),o=r.v.magnitude(),l=r.m;t+=l*Math.pow(o,2)*.5}),t},this.slienceForce=function(){for(var t=e.props,i=t.done,r=t.maxIterations,o=t.minDistanceThreshold,l=0;(e.judgingDistance>o||l<1)&&l<r;l++)e.tick(e.props.tickInterval),e.iterations++;e.render(),i&&i(e.renderNodes)},this.requestAnimationFrame=function(t){var i=e.props.enableWorker;return i?setInterval(function(){t()},16):window.requestAnimationFrame(t)},this.cancelAnimationFrame=function(t){var i=e.props.enableWorker;i?clearInterval(t):window.cancelAnimationFrame(t)},this.animation=function(){var t=e.props,i=t.enableWorker,r=t.maxIterations,o=t.minDistanceThreshold,l=t.done,d=t.tickInterval;if(i){for(var s=new Date().valueOf(),c=.22,u=function(h){return h>10?2e3:20*h*h},f=0;f<r;f++){var p=Math.max(.02,c-f*.002);e.tick(p);var m=new Date().valueOf()-s;m>=u(f)&&(e.render(),s=new Date().valueOf());var b=e.calTotalEnergy(),v=e.registers.get("monitor");if(v&&v(e.reportMointor(b)),e.judgingDistance<o){e.render(),l&&l(e.renderNodes);return}}return}var g=function _(){e.tick(d),e.render(),e.iterations++;var h=e.calTotalEnergy(),y=e.registers.get("monitor");y&&y(e.reportMointor(h)),e.judgingDistance<o||e.iterations>e.props.maxIterations?(e.cancelAnimationFrame(e.timer),e.iterations=0,e.done=!0,l&&l(e.renderNodes)):e.timer=e.requestAnimationFrame(_)};e.timer=e.requestAnimationFrame(g)},this.render=function(){var t=e.registers.get("render");e.renderNodes=[],e.nodePoints.forEach(function(i){e.renderNodes.push(Object.assign(Object.assign({},e.nodeSet[i.id]&&e.nodeSet[i.id].data),{x:i.p.x,y:i.p.y}))}),t&&t({nodes:e.renderNodes,edges:e.sourceData.edges})},this.reportMointor=function(t){var i={energy:t,iterations:e.iterations,nodes:e.nodes,edges:e.edges};return i},this.tick=function(t){e.updateCoulombsLawOptimized(),e.updateHookesLaw(),e.attractToCentre(),e.attractToSide(),e.updateVelocity(t),e.updatePosition(t)},this.updateCoulombsLawOptimized=function(){var t=e.props.coulombDisScale,i=e.props.repulsion,r=e.nodes.map(function(l){var d=e.nodePoints.get(l.id).p;return{x:d.x,y:d.y}}),o=rr(r,t,i);e.nodes.forEach(function(l,d){e.nodePoints.get(l.id).updateAcc(new de(o[d].vx,o[d].vy))})},this.updateCoulombsLaw=function(){for(var t=e.nodes.length,i=0;i<t;i++)for(var r=i+1;r<t;r++)if(i!==r){var o=e.nodes[i],l=e.nodes[r],d=e.props.coulombDisScale,s=e.props.repulsion,c=e.nodePoints.get(o.id).p.subtract(e.nodePoints.get(l.id).p),u=(c.magnitude()+.1)*d,f=c.normalise(),p=1;e.nodePoints.get(o.id).updateAcc(f.scalarMultip(s*p).divide(Math.pow(u,2))),e.nodePoints.get(l.id).updateAcc(f.scalarMultip(s*p).divide(-Math.pow(u,2)))}},this.updateHookesLaw=function(){e.edges.forEach(function(t){var i=e.edgeSprings.get(t.id),r=i.target.p.subtract(i.source.p),o=i.length-r.magnitude(),l=r.normalise();i.source.updateAcc(l.scalarMultip(-e.props.stiffness*o)),i.target.updateAcc(l.scalarMultip(e.props.stiffness*o))})},this.implementForce=function(t,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2,o=e.nodePoints.get(t.id),l=o.p.subtract(i);o.updateAcc(l.scalarMultip(-r))},this.attractToCentre=function(){e.nodes.forEach(function(t){var i,r=(i=t.data)===null||i===void 0?void 0:i.layout,o=r.degree,l=r.sDegree,d=r.tDegree,s=e.centripetalOptions,c=s.leaf,u=s.single,f=s.others,p=s.center,m=e.props,b=m.width,v=m.height;if(p!==void 0){var g=p(t,e.nodes,e.edges,b,v),_=g.x,h=g.y,y=g.centerStrength;if(!(_===void 0||h===void 0)){var k=new de(_,h);if(y){e.implementForce(t,k,y);return}var M=typeof c=="function"?c(t,e.nodes,e.edges):c,E=typeof u=="function"?u(t):u,A=typeof f=="function"?f(t):f,G=d===0||l===0,B=o===0;if(!(M===0||E===0||A===0)){if(B){e.implementForce(t,k,E);return}if(G){e.implementForce(t,k,M);return}e.implementForce(t,k,A)}}}})},this.attractToSide=function(){if(!(!e.props.defSideCoe||typeof e.props.defSideCoe!="function")){var t=e.props.height;e.nodes.forEach(function(i){var r=e.props.defSideCoe(i);if(r!==0){var o=e.nodePoints.get(i.id),l=o.p.x,d=r>0?0:t,s=new de(l,d);e.implementForce(i,s,Math.abs(r))}})}},this.updateVelocity=function(t){e.nodes.forEach(function(i){var r=e.nodePoints.get(i.id);r.v=r.v.add(r.a.scalarMultip(t)).scalarMultip(e.props.damping),r.v.magnitude()>e.props.maxSpeed&&(r.v=r.v.normalise().scalarMultip(e.props.maxSpeed)),r.a=new de(0,0)})},this.updatePosition=function(t){var i;if(!(!((i=e.nodes)===null||i===void 0)&&i.length)){e.judgingDistance=0;return}var r=e.props.distanceThresholdMode,o=0;r==="max"?e.judgingDistance=-1/0:r==="min"&&(e.judgingDistance=1/0),e.nodes.forEach(function(l){var d=e.nodePoints.get(l.id);d.p=d.p.add(d.v.scalarMultip(t));var s=d.v.scalarMultip(t),c=s.magnitude();switch(r){case"max":e.judgingDistance<c&&(e.judgingDistance=c);break;case"min":e.judgingDistance>c&&(e.judgingDistance=c);break;default:o=o+c;break}}),(!r||r==="mean")&&(e.judgingDistance=o/e.nodes.length)},this.addNode=function(t){var i=e.props.ignore;i&&i(t)||(t.id in e.nodeSet||e.nodes.push(t),e.nodeSet[t.id]=t)},this.addNodes=function(t){t.forEach(function(i){e.addNode(new Ri(i))})},this.addEdge=function(t){return t.id in e.edgeSet||e.edges.push(t),e.edgeSet[t.id]=t,t},this.addEdges=function(t){try{for(var i=t.length,r=0;r<i;r++){var o=t[r],l=o.source,d=o.target,s=e.nodeSet[l];if(s===void 0)throw new TypeError("invalid node name: ".concat(o.source));var c=e.nodeSet[d];if(c===void 0)throw new TypeError("invalid node name: ".concat(o.target));var u=o.data,f=new Fi(String(e.nextEdgeId++),s,c,u);e.addEdge(f)}}catch(p){}},this.register=function(t,i){e.registers.set(t,i)},this.restart=function(t,i){var r=e.props.ignore;i.getNodes().forEach(function(l){var d=l.get("model");if(!(r&&r(d))){var s=new de(d.x,d.y),c=e.nodePoints.get(d.id);c&&(c.p=s,e.nodePoints.set(d.id,c))}});var o=function(d){var s=new de(d.x,d.y),c=e.getMass(d);e.nodePoints.set(d.id,new Ht(s,d.id,d.data,c)),e.edges.forEach(function(u){var f=e.nodePoints.get(u.source.id),p=e.nodePoints.get(u.target.id);if(f.id===d.id||p.id===d.id){var m=e.edgeSprings.get(u.id).length||100;e.edgeSprings.set(u.id,new Zt(f,p,m))}})};t.forEach(o),e.props.restartAnimation?e.animation():e.slienceForce()},this.stop=function(){window.cancelAnimationFrame(e.timer),e.done=!0},this.getSameTypeLeafMap=function(){var t=e.props.nodeClusterBy,i={};return e.nodes.forEach(function(r){var o,l=((o=r.data)===null||o===void 0?void 0:o.layout)||{},d=l.degree;d===1&&(i[r.id]=Ce.getCoreNodeAndRelativeLeafNodes("leaf",r,e.edges,t))}),i},this.props={stiffness:200,enableWorker:!1,defSpringLen:function(i){return i.data.spring||200},repulsion:200*5,centripetalOptions:{leaf:2,single:2},leafCluster:!1,clustering:!1,nodeClusterBy:"cluster",clusterNodeStrength:20,damping:.9,minEnergyThreshold:.1,maxSpeed:1e3,coulombDisScale:.005,tickInterval:.02,groupFactor:4,maxIterations:7440,minDistanceThreshold:.4,distanceThresholdMode:"mean",animation:!0,restartAnimation:!0,width:200,height:200},this.updateOptions(a),this.sourceData={nodes:[],edges:[],combos:[]},this.nodes=[],this.edges=[],this.nodeSet={},this.edgeSet={},this.renderNodes=[],this.nodePoints=new Map,this.edgeSprings=new Map,this.registers=new Map,this.done=!1,this.judgingDistance=0,this.iterations=0,this.nextEdgeId=0,this.timer=0,this.center=new de(0,0),this.centripetalOptions={leaf:2,single:2,others:1,center:function(i){return{x:e.props.width/2,y:e.props.height/2}}},this.dragNodes=[]}),Vt=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(n);i<t.length;i++)a.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(n,t[i])&&(e[t[i]]=n[t[i]]);return e};const yr=function(){ie.registerLayout("graphin-force",{getDefaultCfg:function(){return{preset:{name:"grid",options:{}},stiffness:200,repulsion:200*5,centripetalOptions:{leaf:1.6,single:1.6},damping:.9,minEnergyThreshold:.1,maxSpeed:1e3,MaxIterations:1e4,animation:!0}},init:function(a){this.nodes=a.nodes,this.edges=a.edges;var e=this,t=e.graph,i=Vt(e,["graph"]),r=Object.assign(Object.assign({},this.getDefaultCfg()),i),o=r.width,l=r.height,d=r.animation,s=r.done,c=s===void 0?function(){}:s,u=Vt(r,["width","height","animation","done"]);this.simulation=new hr(Object.assign(Object.assign(Object.assign({width:o,height:l,animation:d},u),i),{done:function(p){c(t,p)}})),this.simulation.setData(a),this.simulation.register("render",function(f){if(!d&&a&&a.nodes&&a.nodes.length>0){var p=f.nodes;return a.nodes.forEach(function(b,v){var g=p[v];if(g&&g.id===b.id)b.x=p[v].x,b.y=p[v].y;else{var _=p.find(function(h){return h.id===b.id});_&&(b.x=_.x,b.y=_.y)}}),Object.assign({},f)}try{if(!t||t.destroyed)return;var m=!1;f.nodes.forEach(function(b){var v=t.findById(b.id);if(v){var g=v.get("model");g.x=b.x,g.y=b.y,v.getType()==="combo"&&(m=!0)}}),t.refreshPositions(m)}catch(b){}})},execute:function(){this.simulation.start()},layout:function(a){this.init(a),this.execute()},updateCfg:function(a){this.cfg=Object.assign(Object.assign({},this.cfg),a)},destroy:function(){this.destroyed=!0,this.simulation.stop(),this.simulation=null},getType:function(){return"graphin-force"}})},mr=function(){ie.registerLayout("preset",{init:function(){},execute:function(){},destroy:function(){this.destroyed=!0}})};function ot(n,a){return Sr(n)||_r(n,a)||xr(n,a)||br()}function br(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xr(n,a){if(n){if(typeof n=="string")return Gt(n,a);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Gt(n,a)}}function Gt(n,a){(a==null||a>n.length)&&(a=n.length);for(var e=0,t=new Array(a);e<a;e++)t[e]=n[e];return t}function _r(n,a){var e=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var t=[],i=!0,r=!1,o,l;try{for(e=e.call(n);!(i=(o=e.next()).done)&&(t.push(o.value),!(a&&t.length===a));i=!0);}catch(d){r=!0,l=d}finally{try{!i&&e.return!=null&&e.return()}finally{if(r)throw l}}return t}}function Sr(n){if(Array.isArray(n))return n}var Xt=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(n);i<t.length;i++)a.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(n,t[i])&&(e[t[i]]=n[t[i]]);return e},xe=function(a,e,t){if(e)try{a.forEach(function(i){var r=i.cfg.name,o=e[r];if(o){var l=t(e,r),d=l.animate,s=l.visible,c=Xt(l,["animate","visible"]);if(i.attrs.img)c.opacity!==void 0&&i.attr({opacity:c.opacity});else if(i.attr(c),i.cfg.visible=s!==!1,d){var u=d.attrs,f=Xt(d,["attrs"]);i.animate(u,f)}}})}catch(i){}};function ct(n){return Object.keys(n).forEach(function(a){n[a]===void 0&&delete n[a]}),n}var Ge=function(a){if(!a)return[0,0];var e=0,t=0;if(typeof a=="number")e=a,t=a;else if(Array.isArray(a)){if(a.length===1){var i=ot(a,1),r=i[0];e=r,t=r}else if(a.length===2){var o=ot(a,2),l=o[0],d=o[1];e=l,t=d}}return[e,t]},wr=function(a){var e=a.label,t=a.keyshape;if(!(t!=null&&t.size)&&!(e!=null&&e.offset))return{x:void 0,y:void 0,textBaseline:e==null?void 0:e.textBaseline};!(t!=null&&t.size)&&(e!=null&&e.offset)&&(t.size=26);var i=t.size,r=[0,0],o=e.position,l=e.offset,d=l===void 0?r:l;(typeof d=="number"||typeof d=="string")&&(r=[Number(d),Number(d)]),d.length>0&&(r=d);var s=r,c=ot(s,2),u=c[0],f=c[1];if(o==="center")return{x:0+u,y:0+f};var p=Ge(i),m=p[0],b=p[1],v;switch(o){case"top":v={x:0+u,y:-b/2-f,textBaseline:"bottom"};break;case"bottom":v={x:0+u,y:b/2+f,textBaseline:"top"};break;case"left":v={x:0-m-u,y:0+f,textAlign:"right"};break;case"right":v={x:0+m+u,y:0+f,textAlign:"left"};break;default:v={x:0+u,y:b/2+f,textBaseline:"top"};break}return v},kr=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"RT",e=arguments.length>1?arguments[1]:void 0,t=0,i=0;return a==="LT"?(t=e*Math.cos(Math.PI*3/4),i=-e*Math.sin(Math.PI*3/4)):a==="LB"?(t=e*Math.cos(Math.PI*5/4),i=-e*Math.sin(Math.PI*5/4)):a==="RT"?(t=e*Math.cos(Math.PI*1/4),i=-e*Math.sin(Math.PI*1/4)):a==="RB"&&(t=e*Math.cos(Math.PI*7/4),i=-e*Math.sin(Math.PI*7/4)),{x:t,y:i}};function Or(n){return Er(n)||Nr(n)||ua(n)||Cr()}function Cr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nr(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Er(n){if(Array.isArray(n))return st(n)}function da(n,a){return Ar(n)||Tr(n,a)||ua(n,a)||Mr()}function Mr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ua(n,a){if(n){if(typeof n=="string")return st(n,a);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return st(n,a)}}function st(n,a){(a==null||a>n.length)&&(a=n.length);for(var e=0,t=new Array(a);e<a;e++)t[e]=n[e];return t}function Tr(n,a){var e=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var t=[],i=!0,r=!1,o,l;try{for(e=e.call(n);!(i=(o=e.next()).done)&&(t.push(o.value),!(a&&t.length===a));i=!0);}catch(d){r=!0,l=d}finally{try{!i&&e.return!=null&&e.return()}finally{if(r)throw l}}return t}}function Ar(n){if(Array.isArray(n))return n}var Le=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(n);i<t.length;i++)a.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(n,t[i])&&(e[t[i]]=n[t[i]]);return e};function Pe(n){var a;return typeof n=="number"?a=n/2:Array.isArray(n)&&(a=n[0]/2),a}var Pr=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=dt(a),t=e.defaultNodeStyle,i=e.defaultNodeStatusStyle;return{style:t.style,status:i.status}},ca=function(a){var e=a.halo,t=a.keyshape,i=e.size,r=e.visible,o=e.fill,l=e.fillOpacity,d=Le(e,["size","visible","fill","fillOpacity"]),s=Pe(i),c,u,f;if(t&&t.size){var p=Pe(t.size);c=p+15}t&&t.fill&&(u=t.fill),t&&t.stroke&&(f=t.stroke);var m=Object.assign({x:0,y:0,r:s||c,fill:o||u||f,fillOpacity:l||.1,visible:r!==!1},d);return{name:"halo",visible:r!==!1,attrs:ct(m)}},fa=function(a){var e=a.keyshape,t=e.size,i=e.visible,r=e.stroke,o=e.fill,l=e.fillOpacity,d=e.strokeOpacity,s=Le(e,["size","visible","stroke","fill","fillOpacity","strokeOpacity"]),c=Pe(t),u=Object.assign({x:0,y:0,r:c,cursor:"pointer",visible:i!==!1,stroke:r,strokeOpacity:d||1,fill:o||r,fillOpacity:l||.2},s);return{name:"keyshape",visible:i!==!1,attrs:ct(u)}},pa=function(a){var e=a.label,t=e.value,i=e.fill,r=e.fontSize,o=e.visible,l=Le(e,["value","fill","fontSize","visible"]),d=wr(a),s=Object.assign({x:d.x,y:d.y,fontSize:r,text:t,textAlign:"center",fill:i,textBaseline:d.textBaseline,visible:o!==!1},l);return{name:"label",visible:o!==!1,attrs:ct(s)}},lt=function(a){var e=a.icon,t=e.value,i=t===void 0?"":t,r=e.type,o=e.fontFamily,l=e.textAlign,d=l===void 0?"center":l,s=e.textBaseline,c=s===void 0?"middle":s,u=e.fill,f=e.size,p=e.visible;e.clip;var m=Le(e,["value","type","fontFamily","textAlign","textBaseline","fill","size","visible","clip"]),b=Ge(f),v=da(b,2),g=v[0],_=v[1],h={name:"icon",visible:p!==!1,capture:!1};return r==="text"||r==="font"?Object.assign(Object.assign({},h),{attrs:Object.assign({x:0,y:0,textAlign:d,textBaseline:c,text:i,fontSize:g,fontFamily:o,fill:u,visible:p!==!1},m)}):Object.assign(Object.assign({},h),{attrs:Object.assign({x:-g/2,y:-_/2,img:i,width:g,height:_,visible:p!==!1},m)})},Ve=function(a,e){return e==="keyshape"?fa(a).attrs:e==="halo"?ca(a).attrs:e==="label"?pa(a).attrs:e==="icon"?lt(a).attrs:a[e]||{}},Yt=function(a,e,t){var i=a.type,r=a.position,o=a.value,l=o===void 0?"":o,d=a.size,s=a.fill,c=a.stroke,u=a.color,f=a.fontSize,p=a.fontFamily,m=a.padding,b=m===void 0?0:m,v=a.offset,g=v===void 0?[0,0]:v,_=a.id,h=Ge(g),y=Ge(d),k=da(y,2),M=k[0],E=k[1],A=kr(r,t),G=A.x,B=A.y,H=G,z=B;if(M===E){H+=h[0],z+=h[1];var Z={attrs:{r:M/2+b,fill:s,stroke:c,x:H,y:z},name:"badges-circle"};_&&(Z.id=_),e.addShape("circle",Z)}else{H=G-M-b*2,z=B-E-b*2,r==="LB"?z=B:r==="RT"?(H=G,z=B-E-b*2):r==="RB"&&(H=G,z=B),H+=h[0],z+=h[1];var K={attrs:{width:M+b*2,height:E+b*2,fill:s,stroke:c,x:H,y:z,radius:(E+b*2)/3},name:"badges-rect"};_&&(K.id=_),e.addShape("rect",K)}i==="font"||i==="text"?e.addShape("text",{attrs:{x:M!==E?H+M/2+b:H,y:M!==E?z+E/2+b:z,text:l,fontSize:f,textAlign:"center",textBaseline:"middle",fontFamily:p,fill:u},capture:!1,name:"badges-text"}):i==="image"&&e.addShape("image",{attrs:{x:H-M/2,y:z-E/2,width:M,height:E,img:l},capture:!1,name:"badges-image"})};const jr=function(){ie.registerNode("graphin-circle",{options:{style:{},status:{}},draw:function(a,e){var t=a.style._theme;this.options=Pr(t);var i=Ee({},this.options.style,a.style);a._initialStyle=Object.assign({},i);var r=i.icon,o=i.badges,l=o===void 0?[]:o,d=i.keyshape,s=Pe(d.size);e.addShape("circle",ca(i));var c=e.addShape("circle",fa(i));e.addShape("text",pa(i));var u=r.type;if((u==="text"||u==="font")&&e.addShape("text",lt(i)),u==="image"){var f=lt(i),p=e.addShape("image",f),m=i.icon.clip;if(m){var b=m.r,v=Le(m,["r"]);p.setClip({type:"circle",attrs:Object.assign({x:0,y:0,r:b},v)})}}return l.forEach(function(g){Yt(g,e,s)}),c},setState:function(a,e,t){var i;if(a){var r=t.getModel(),o=t.getContainer().get("children"),l=Ee({},this.options.status,r.style.status),d=t.getModel()._initialStyle,s=((i=t._cfg)===null||i===void 0?void 0:i.states)||[];try{Object.keys(l).forEach(function(c){a===c&&(e?xe(o,l[c],Ve):(xe(o,d,Ve),s.forEach(function(u){xe(o,l[u],Ve)})))})}catch(c){}}},update:function(a,e){if(a.style)try{var t=Ee({},a._initialStyle,a.style);a._initialStyle=Object.assign({},t);var i=t.badges,r=t.keyshape,o=Pe(r.size),l=e.getContainer(),d=l.get("children");xe(d,t,Ve);var s=Or(d);if(i){var c=0;s.forEach(function(u){u.cfg.name.startsWith("badges")?d.splice(c,1):c=c+1}),i.forEach(function(u){Yt(u,l,o)})}}catch(u){}}})};function Dr(n,a,e){return a in n?Object.defineProperty(n,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[a]=e,n}function Lr(n,a){return zr(n)||Br(n,a)||$r(n,a)||Ir()}function Ir(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $r(n,a){if(n){if(typeof n=="string")return Ut(n,a);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ut(n,a)}}function Ut(n,a){(a==null||a>n.length)&&(a=n.length);for(var e=0,t=new Array(a);e<a;e++)t[e]=n[e];return t}function Br(n,a){var e=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var t=[],i=!0,r=!1,o,l;try{for(e=e.call(n);!(i=(o=e.next()).done)&&(t.push(o.value),!(a&&t.length===a));i=!0);}catch(d){r=!0,l=d}finally{try{!i&&e.return!=null&&e.return()}finally{if(r)throw l}}return t}}function zr(n){if(Array.isArray(n))return n}var je=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(n);i<t.length;i++)a.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(n,t[i])&&(e[t[i]]=n[t[i]]);return e},Rr=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=dt(a),t=e.defaultEdgeStyle,i=e.defaultEdgeStatusStyle;return{style:t.style,status:i.status}},Kt;(function(n){n.NORMAL="normal",n.SELECTED="selected",n.HOVERED="hovered",n.DISABLED="disabled"})(Kt||(Kt={}));function ft(n){return Object.keys(n).forEach(function(a){n[a]===void 0&&delete n[a]}),n}function Fr(n){var a=n.value,e=je(n,["value"]),t=Object.assign({id:"label",text:a},e);return ft(t)}function Wr(n){var a=je(n,[]),e=Object.assign({id:"keyshape"},a);return ft(e)}function Hr(n){var a=je(n,[]),e=Object.assign({id:"halo"},a);return ft(e)}function Zr(n){return Object.assign({id:"label-background"},n)}var qe=function(a,e){return e==="keyshape"?Wr(a.keyshape||{}):e==="halo"?Hr(a.halo||{}):e==="label"?Fr(a.label||{}):e==="label-background"?Zr(a[e]||{}):a[e]||{}},va=function(a,e,t){var i={x:(e.x+a.x)/2,y:(e.y+a.y)/2},r=e.x-a.x,o=e.y-a.y,l=Math.sqrt(Math.pow(r,2)+Math.pow(o,2)),d=i.y-r*t/l||0,s=i.x+o*t/l||0;return{x:s,y:d}},Vr=function(a,e){var t,i,r,o=a.startPoint,l=o===void 0?{x:0,y:0}:o,d=a.endPoint,s=d===void 0?{x:0,y:0}:d,c=a.sourceNode,u=a.targetNode,f=e.keyshape,p=f.type,m=p===void 0?"line":p,b=f.poly,v=b===void 0?{distance:0}:b,g=f.loop,_=g===void 0?{}:g,h=c.get("model"),y=((t=u)===null||t===void 0?void 0:t.get("model"))||{id:"temp"};if(m==="loop"||h.id===y.id){var k=((r=(i=h.style)===null||i===void 0?void 0:i.keyshape)===null||r===void 0?void 0:r.size)||26,M=Object.assign({distance:0,dx:8,rx:void 0,ry:void 0},_),E=M.distance,A=M.dx,G=M.rx,B=M.ry,H=k/2,z=Math.sqrt(Math.max(Math.pow(H,2)-Math.pow(A,2),0)),Z=G||H*2*.5,K=B||H*2*.6;return[["M",l.x-A,l.y-z],["A",Z+E,K+E,0,1,1,l.x+A,l.y-z]]}if(m==="poly"){var ue=va(l,s,(v==null?void 0:v.distance)||0);return[["M",l.x,l.y],["Q",ue.x,ue.y,s.x,s.y]]}return[["M",l.x,l.y],["L",s.x,s.y]]};const Gr=function(){ie.registerEdge("graphin-line",{draw:function(a,e){var t,i,r,o,l,d,s,c=a.style._theme;this.options=Rr(c);var u=Ee({},this.options.style,a.style);a&&(a._initialStyle=Object.assign({},u));var f=a.startPoint,p=f===void 0?{x:0,y:0}:f,m=a.endPoint,b=m===void 0?{x:0,y:0}:m,v=a.sourceNode,g=a.targetNode,_=u.label,h=u.halo,y=u.keyshape,k=v.get("model"),M=((t=g)===null||t===void 0?void 0:t.get("model"))||{id:"temp"},E=((r=(i=k.style)===null||i===void 0?void 0:i.keyshape)===null||r===void 0?void 0:r.size)||28,A=(y==null?void 0:y.type)==="loop"||k.id===M.id,G=_.value,B=(y==null?void 0:y.type)==="poly",H=va(p,b,((o=y==null?void 0:y.poly)===null||o===void 0?void 0:o.distance)||0),z=(y==null?void 0:y.lineWidth)||1,Z=z+5,K=Vr(a,u);e.addShape("path",{attrs:Object.assign({id:"halo",path:K,lineWidth:z+10,stroke:h.stroke||y.stroke,strokeOpacity:h.strokeOpacity||.4},h),draggable:!0,name:"halo",visible:h.visible!==!1});var ue=e.addShape("path",{attrs:Object.assign({id:"keyshape",path:K,endArrow:A?void 0:{d:0,path:"M 0,0 L ".concat(Z,",").concat(Z/2," L ").concat(Z,",-").concat(Z/2," Z"),fill:y.stroke},startArrow:A?{d:0,path:"M 0,0 L ".concat(Z,",").concat(Z/2," L ").concat(Z,",-").concat(Z/2," Z"),fill:y.stroke}:void 0},y),draggable:!0,name:"keyshape"});if(G){var se=_.value,_e=_.fontSize,D=_e===void 0?8:_e,fe=_.offset,Me=fe===void 0?[0,0]:fe,Se=_.background,Te=je(_,["value","fontSize","offset","background"]),ye=!!Se,we=Lr(Me,2),me=we[0],le=we[1],ce=Math.atan((b.y-p.y)/(b.x-p.x)),S=[(p.x+b.x)/2,(p.y+b.y)/2];if(B&&(S=[(H.x+S[0])/2,(H.y+S[1])/2]),b.x-p.x===0&&(ce=Math.PI/2),A&&(ce=2*Math.PI),ye){var x=ii(se),R=x*D*.6,$=D*1.8,O={fill:"#fff",width:R,height:$,stroke:y.stroke,lineWidth:1,radius:6},P=Object.assign(Object.assign({},O),Se),L=P.fill,q=P.width,j=P.height,ke=P.stroke,Ie=je(P,["fill","width","height","stroke"]),$e=-j/2+le;A&&($e=-(j/2+le+D+E*1+(((l=y==null?void 0:y.loop)===null||l===void 0?void 0:l.distance)||0)*2));var pt=e.addShape("rect",{attrs:Object.assign({id:"label-background",x:-q/2+me,y:$e,width:q,height:j,fill:L,stroke:ke},Ie),draggable:!0,name:"label-background"});pt.rotate(ce),pt.translate(S[0],S[1])}var Be=le-D/2;ye&&(Be=le+D/2),A&&(ye?Be=-(le+D/2+E*1+(((d=y==null?void 0:y.loop)===null||d===void 0?void 0:d.distance)||0)*2):Be=-(le+D+E*1+(((s=y==null?void 0:y.loop)===null||s===void 0?void 0:s.distance)||0)*2));var vt=e.addShape("text",{attrs:Object.assign({id:"label",x:me,y:Be,text:se,fontSize:D},Te),draggable:!0,name:"label"});vt.rotate(ce),vt.translate(S[0],S[1])}return ue},setState:function(a,e,t){var i;if(a){var r=t.getModel(),o=t.getContainer().get("children"),l=Ee({},this.options.status,r.style.status),d=t.getModel()._initialStyle,s=((i=t._cfg)===null||i===void 0?void 0:i.states)||[];try{Object.keys(l).forEach(function(c){var u;a===c&&(e?xe(o,l[c],qe):(xe(o,Object.assign(Object.assign({},d),Dr({},"label-background",(u=d.label)===null||u===void 0?void 0:u.background)),qe),s.forEach(function(f){xe(o,l[f],qe)})))})}catch(c){}}},afterDraw:function(a,e){var t=Ee({},this.options.style,a.style),i=t.animate,r=t.keyshape;if(!(!i||!i.type||i.visible===!1)){var o=e.get("children").find(function(_){return _.get("name")==="keyshape"}),l=i.color,d=i.type,s=i.repeat,c=s===void 0?!0:s,u=i.duration,f=u===void 0?3e3:u;if(d==="circle-running"){var p=o.getPoint(0),m=e.addShape("circle",{attrs:{x:p.x,y:p.y,fill:l||r.stroke,r:r.lineWidth*1.5+2},name:"circle-shape"});m.animate(function(_){var h=o.getPoint(_);return{x:h.x,y:h.y}},{repeat:c,duration:f})}if(d==="line-dash"){var b=0,v=i.lineDash||r.lineDash||[4,2,1,2];o.animate(function(){return b++,b>9&&(b=0),{lineDash:v,lineDashOffset:-b}},{repeat:c,duration:f})}if(d==="line-growth"){var g=o.getTotalLength();o.animate(function(_){var h=_*g;return{lineDash:[h,g-h]}},{repeat:c,duration:f})}}}})},Xr=[Xe];Xe.install=function(n){Xr.forEach(a=>{n.component(a.name,a)})};yr();mr();jr();Gr();typeof window!="undefined"&&window.Vue&&Xe.install(window.Vue);const Qt=(n="graphin-force")=>{if(n==="graphin-force")return{type:"graphin-force",animation:!1,preset:{type:"concentric"},preventOverlap:!0,nodeSize:75};if(n==="dagre")return{type:"dagre",animation:!0,preventOverlap:!0,nodeSize:75}},Je=(n=[])=>(n.map(a=>(a.style={label:{value:a.name,fill:"#999"}},a)),n),et=(n=[],a="name",e)=>(n.map(t=>{const i=e.find(l=>l.name===t.category)||{},{color:r="category",size:o=60}=i;return t.style={label:{value:Yr(t[a]),offset:[0,15],fontSize:16},keyshape:{size:o||60,stroke:r,lineWidth:3,fill:r,fillOpacity:.8},halo:{visible:!1,size:o,stroke:r,strokeOpacity:.4,lineWidth:Math.round(o*2/3)},status:{hover:{label:{value:t[a]},keyshape:{fill:r,fillOpacity:1}},selected:{keyshape:{lineWidth:10,fillOpacity:1},halo:{visible:!0,size:o,stroke:r,strokeOpacity:.4,lineWidth:Math.round(o*2/3)}}}},t}),n),Yr=n=>n.length<=7?n:`${n.substr(0,7)}...`,Ur={class:"w-4/5 xl:w-5/6 p-4 flex flex-col relative"},Kr={class:"bg-light-50 p-4 h-16"},Qr={key:0,class:"bg-light-100 flex-1 p-4 pt-0 flex flex-col overflow-y-auto relative"},qr={class:"flex-1 overflow-x-hidden"},Jr={class:"max-h-60vh w-75 overflow-y-auto px-1"},eo={class:"flex items-baseline pb-2"},to={class:"flex-1"},ao={key:0,class:"flex items-baseline pb-2"},no={class:"flex-1"},io={class:"text-gray-400 mr-2 w-20 break-all"},ro={class:"flex-1"},oo={class:"text-gray-400 mr-2 w-20 break-all"},so={class:"flex-1"},lo={class:"p-0 mb-2 text-blue-700 text-base font-bold flex items-center"},uo=["title"],co={class:"p-1 flex items-center"},fo=["title"],po={key:0,class:"p-1 flex items-center"},vo=["title"],go={class:"p-1 flex items-center"},ho=["title"],yo={key:0,class:"flex justify-end mt-4"},mo={key:1,class:"bg-light-100 flex-1 p-4 relative"},bo={key:0,class:"absolute top-2 left-2 z-10 bg-light-50 p-2 text-gray-500"},xo={class:"mb-1"},_o={class:"font-bold mr-1"},So={class:"mb-1"},wo={class:"font-bold mr-1"},ko={class:"mb-1"},Oo={class:"font-bold mr-1"},Co={class:"mb-1"},No={class:"font-bold mr-1"},Eo={class:"mb-1"},Mo={class:"font-bold mr-1"},To={key:3,class:"absolute top-0 bottom-0 right-0 flex p-4 bg-light-50"},Ao={class:"entity-detail-warpper p-6 flex flex-col"},Po={class:"relative"},jo={class:"flex-1 overflow-y-auto mt-6 -mx-4 px-4"},Do={class:"flex items-baseline mb-4"},Lo={class:"flex-1 ml-2"},Io={key:0,class:"flex items-baseline mb-4"},$o={class:"flex-1 ml-2"},Bo={class:"w-16 text-gray-400"},zo={class:"flex-1 ml-2"},Ro={class:"w-16 text-gray-400"},Fo={class:"flex-1 ml-2"},Wo=U({name:"TagManageKgComponent",__name:"detail",setup(n){const a=Oa(),{currentRoute:e}=a,{DragCanvas:t,ZoomCanvas:i,DragNode:r,ResizeCanvas:o,ActivateRelations:l,FitView:d,Hoverable:s}=ea,{ContextMenu:c,Toolbar:u}=Mi,[f,{openModal:p}]=xt(),[m,{openModal:b}]=xt();let v=X({displayType:"card",keyword:"",type:"",page:1,pageSize:16});const g=X(!1),_=X([]),h=X(0),y=X(50),k=()=>ve(this,null,function*(){var P;const{keyword:S,type:x,page:R,pageSize:$}=v.value;g.value=!0;const O=yield Ta({page:R,pageSize:$,keyword:S,type:x,taskId:e.value.query.id});g.value=!1,(P=O==null?void 0:O.data)!=null&&P.map(L=>{var q;L.别名=((q=L.attlist.find(j=>j.attname=="别名"))==null?void 0:q.attname)||""}),_.value=O.data||[],h.value=O.total||0}),M=(S,x)=>{v.value.page=S,v.value.pageSize=x,k()},E=()=>ve(this,null,function*(){if(v.value.displayType==="graph"){let{nodes:S,edges:x,totalEdgeNum:R,totalNodeNum:$}=D.value;S.map(O=>{const P=v.value.keyword&&O.name.includes(v.value.keyword);O.status={selected:P}}),D.value={nodes:S,edges:x,totalEdgeNum:R,totalNodeNum:$}}else yield k()}),A=S=>{if(v.value.type=(S==null?void 0:S.id)==0||S==null?void 0:S.name,v.value.displayType==="graph"){let{nodes:x,edges:R,totalEdgeNum:$,totalNodeNum:O}=D.value;x.map(P=>{const L=(S==null?void 0:S.name)&&P.category===(S==null?void 0:S.name);P.status={selected:L}}),D.value={nodes:x,edges:R,totalNodeNum:O,totalEdgeNum:$}}else v.value.page=1,k()},G=S=>{if(v.value.displayType==="graph"){const{size:x,color:R,name:$}=S;se=se.map(j=>(j.name===$&&(j.size=Number(x),j.color=R),j));const{nodes:O,edges:P,totalNodeNum:L,totalEdgeNum:q}=D.value;D.value={edges:Je(P.map(j=>({source:String(j.source),target:String(j.target),name:j.name,edgeId:String(j.edgeId)}))),nodes:et(O.map(j=>({category:j.category,name:j.name,id:String(j.id)})),"name",se),totalNodeNum:L,totalEdgeNum:q}}},B=S=>{p(!0,{record:S,isUpdate:!0})},H=S=>ve(this,null,function*(){yield Aa({id:S}),k()}),z=()=>{D.value={nodes:[],edges:[],totalNodeNum:0,totalEdgeNum:0},_.value=[],h.value=0,k()};be(()=>v.value.displayType,S=>ve(this,null,function*(){v.value.keyword="",S==="graph"?D.value.nodes.length==0&&me():_.value.length==0&&(v.value.page=1,k())})),ae(()=>{k()});const Z=X(!1),K=X({}),ue=X(!1);let se=[];const _e=X(null),D=X({nodes:[],edges:[],totalNodeNum:0,totalEdgeNum:0}),fe=X(Qt()),Me=(S,x,R)=>{const $=x.getModel();S==="extend"?le($):S==="detail"?ce($):S==="hideChildren"&&we($),R()},Se=(S,x)=>{if(x.key=="layout"){const{type:R}=fe.value;fe.value=Qt(R!="dagre"?"dagre":"graphin-force")}},Te=()=>{b(!0,{maxNumber:y.value})},ye=S=>{y.value=S.maxNumber,v.value.keyword="",me()},we=S=>{let{nodes:x,edges:R}=D.value,$=[];const O=(P,L,q,j)=>(L.forEach(ke=>{var Ie;q==ke.source&&(((Ie=L.filter($e=>$e.target==ke.source))==null?void 0:Ie.length)<=1&&j.push(ke.target),j=O(P,L,ke.target,j))}),j);$=O(x,R,S.id,$),x=x.filter(P=>!$.includes(P.id)),R=R.filter(P=>!$.includes(P.source)&&!$.includes(P.target)),D.value=ee(N({},D.value),{nodes:x,edges:R})},me=()=>ve(this,null,function*(){g.value=!0;const S=(yield Ma({total:y.value,taskId:e.value.query.id}))||{};g.value=!1;const{nodes:x=[],links:R=[],totalNodeNum:$=0,totalLinkNum:O=0,categories:P=[]}=S||{};se=P,D.value={edges:Je(R.map(L=>({source:String(L.source),target:String(L.target),name:L.name,edgeId:String(L.id)}))),nodes:et(x.map(L=>({category:L.category,name:L.name,id:String(L.nodeid)})),"name",se),totalNodeNum:$,totalEdgeNum:O},Ca(()=>{ue.value=!0})}),le=S=>ve(this,null,function*(){g.value=!0;const x=(yield Pa({name:S.name,type:S.category,taskId:e.value.query.id}))||{};g.value=!1;const{nodes:R=[],links:$=[],totalNodeNum:O=0,totalLinkNum:P=0}=x||{},L=[...D.value.nodes,...et(R.map(j=>({category:j.category,name:j.name,id:String(j.nodeid)})),"name",se)],q=[...D.value.edges,...Je($.map(j=>({source:String(j.source),target:String(j.target),name:j.name,edgeId:String(j.id)})))];D.value={nodes:tt(L,"id"),edges:tt(q,"edgeId"),totalNodeNum:O,totalEdgeNum:P}}),ce=S=>ve(this,null,function*(){K.value={};const x=(yield ja({name:S.name,type:S.category,taskId:e.value.query.id}))||{};K.value=x,Z.value=!0});return(S,x)=>{const R=Na("Tooltip"),$=Ea("loading");return W(),Oe(C(Da),{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:F(()=>[T($a,{class:"w-1/5 xl:w-1/6",showNodeColor:C(v).displayType=="graph",onSelect:A,onSuccess:G},null,8,["showNodeColor"]),w("div",Ur,[w("div",Kr,[T(C(_t),{layout:"inline",class:"float-left"},{default:F(()=>[T(C(Ye),null,{default:F(()=>[T(C(Fa),{value:C(v).displayType,"onUpdate:value":x[0]||(x[0]=O=>C(v).displayType=O),"button-style":"solid"},{default:F(()=>[T(C(St),{value:"card"},{default:F(()=>x[3]||(x[3]=[Y("实体卡片")])),_:1}),T(C(St),{value:"graph"},{default:F(()=>x[4]||(x[4]=[Y("实体可视化")])),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),T(C(_t),{layout:"inline",class:"float-right"},{default:F(()=>[T(C(Ye),null,{default:F(()=>[T(C(xa),null,{default:F(()=>[T(C(Wa),{value:C(v).keyword,"onUpdate:value":x[1]||(x[1]=O=>C(v).keyword=O),allowClear:"",placeholder:"按实体名称检索"},null,8,["value"])]),_:1})]),_:1}),T(C(Ye),null,{default:F(()=>[T(C(ba),{type:"primary",onClick:E,icon:I(C(Ha))},{default:F(()=>x[5]||(x[5]=[Y("查询")])),_:1},8,["icon"])]),_:1})]),_:1})]),C(v).displayType=="card"?bt((W(),Q("div",Qr,[w("div",qr,[_.value.length>0?(W(),Oe(C(Za),{key:0,gutter:[24,24]},{default:F(()=>[(W(!0),Q(Ne,null,Ae(_.value,(O,P)=>(W(),Oe(C(Va),{xxl:6,xl:8,lg:12,key:P},{default:F(()=>[T(C(Ga),{trigger:"hover",placement:"rightTop"},{content:F(()=>[w("div",Jr,[w("div",eo,[x[6]||(x[6]=w("div",{class:"text-gray-400 mr-2 w-20 break-all"},"名称:",-1)),w("div",to,V(O.name),1)]),O.tagliststr?(W(),Q("div",ao,[x[7]||(x[7]=w("div",{class:"text-gray-400 mr-2 w-20 break-all"},"标签:",-1)),w("div",no,V(O.tagliststr),1)])):ge("",!0),(W(!0),Q(Ne,null,Ae(O.attlist,(L,q)=>(W(),Q("div",{key:q,class:"flex items-baseline pb-2"},[w("div",io,V(L.attname)+":",1),w("div",ro,V(L.atttvalue),1)]))),128)),(W(!0),Q(Ne,null,Ae(O.groupRelations||{},(L,q)=>(W(),Q("div",{class:"flex items-baseline pb-2",key:q+"relations"},[w("div",oo,V(q),1),w("div",so,V(L),1)]))),128))])]),default:F(()=>[T(C(on),{class:"cursor-pointer"},{default:F(()=>[w("div",lo,[w("div",{title:O.name,class:"flex-1 truncate ..."},[T(R,{placement:"bottomLeft",color:"#fff",title:O.name},{default:F(()=>[Y(V(O.name),1)]),_:2},1032,["title"])],8,uo),T(C(Xa),{class:"text-gray-400 ml-2 hover:text-blue-700",onClick:L=>B(O)},null,8,["onClick"]),T(C(Ya),{title:"确定删除该实体？","ok-text":"确定","cancel-text":"取消",onConfirm:L=>H(O.id)},{default:F(()=>[T(C(Ua),{class:"text-gray-400 ml-2 hover:text-red-500"})]),_:2},1032,["onConfirm"])]),w("div",co,[x[8]||(x[8]=w("div",{class:"text-gray-400 w-18"},"标签",-1)),w("div",{title:O.name,class:"flex-1 truncate ..."},V(O.tagliststr),9,fo)]),O.别名?(W(),Q("div",po,[x[9]||(x[9]=w("div",{class:"text-gray-400 w-18"},"别名",-1)),w("div",{title:O.name,class:"flex-1 truncate ..."},V(O.别名),9,vo)])):ge("",!0),w("div",go,[x[10]||(x[10]=w("div",{class:"text-gray-400 w-18"},"属性数量",-1)),w("div",{title:O.name,class:"flex-1 truncate ..."},V(O.attlist.length||0)+"个",9,ho)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(W(),Oe(C(Fe),{key:1,class:"mt-50",image:C(Fe).PRESENTED_IMAGE_SIMPLE,description:"暂无数据"},null,8,["image"]))]),_.value.length>0?(W(),Q("div",yo,[T(C(Ka),{showLessItems:"",pageSizeOptions:["16","48","100"],pageSize:C(v).pageSize,total:h.value,"show-total":O=>`共 ${O} 个`,onChange:M},null,8,["pageSize","total","show-total"])])):ge("",!0)])),[[$,g.value]]):bt((W(),Q("div",mo,[D.value.nodes.length>0?(W(),Q("div",bo,[w("div",xo,[x[11]||(x[11]=Y("当前显示实体数量：")),w("span",_o,V(D.value.nodes.length||0),1),x[12]||(x[12]=Y("个 "))]),w("div",So,[x[13]||(x[13]=Y("图谱总实体数量：")),w("span",wo,V(D.value.totalNodeNum||0),1),x[14]||(x[14]=Y("个"))]),w("div",ko,[x[15]||(x[15]=Y("当前显示关系数量：")),w("span",Oo,V(D.value.edges.length||0),1),x[16]||(x[16]=Y("条"))]),w("div",Co,[x[17]||(x[17]=Y("图谱总关系数量：")),w("span",No,V(D.value.totalEdgeNum||0),1),x[18]||(x[18]=Y("条"))]),w("div",Eo,[x[19]||(x[19]=Y("默认加载关系数量：")),w("span",Mo,V(y.value||0),1),x[20]||(x[20]=Y("条"))]),x[21]||(x[21]=w("div",null,[Y("最大显示关系数量："),w("span",{class:"font-bold mr-1"},V(300)),Y("条")],-1))])):ge("",!0),ue.value?(W(),Oe(C(Xe),{key:1,data:D.value,layout:fe.value,ref_key:"graphRef",ref:_e},{default:F(()=>[T(C(t)),T(C(i),{maxZoom:1}),T(C(r)),T(C(o)),T(C(l)),T(C(s),{bindType:"node"}),T(C(d),{padding:[50,50],isBindLayoutChange:!1}),T(C(u),{onChange:Se,onSettingChange:Te}),T(C(c),{bindType:"node"},{default:F(({item:O,onClose:P})=>[T(C(Qa),{onClick:({key:L})=>Me(L,O,P),class:"w-36 rounded-md shadow-md border-1 border-gray-200"},{default:F(()=>[T(C(Ue),{key:"detail"},{default:F(()=>[T(C(qa),{class:"mr-2"}),x[22]||(x[22]=Y("实体详情"))]),_:1}),T(C(Ue),{key:"extend"},{default:F(()=>[T(C(wt),{class:"mr-2"}),x[23]||(x[23]=Y("实体拓展"))]),_:1}),T(C(Ue),{key:"hideChildren"},{default:F(()=>[T(C(wt),{class:"mr-2"}),x[24]||(x[24]=Y("隐藏子节点"))]),_:1})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","layout"])):ge("",!0),D.value.nodes.length===0?(W(),Oe(C(Fe),{key:2,class:"mt-50",image:C(Fe).PRESENTED_IMAGE_SIMPLE,description:"暂无数据"},null,8,["image"])):ge("",!0),Z.value?(W(),Q("div",To,[w("div",Ao,[w("div",Po,[x[25]||(x[25]=w("img",{class:"w-full",src:en,alt:""},null,-1)),T(C(Ja),{class:"absolute top-0 right-0 cursor-pointer hover:text-blue-500",onClick:x[2]||(x[2]=O=>Z.value=!1)})]),w("div",jo,[w("div",Do,[x[26]||(x[26]=w("div",{class:"w-16 text-gray-400"},"名称",-1)),w("div",Lo,V(K.value.name),1)]),K.value.tagliststr?(W(),Q("div",Io,[x[27]||(x[27]=w("div",{class:"w-16 text-gray-400"},"标签",-1)),w("div",$o,V(K.value.tagliststr),1)])):ge("",!0),(W(!0),Q(Ne,null,Ae(K.value.attlist,(O,P)=>(W(),Q("div",{class:"flex items-baseline mb-4",key:P+"attr"},[w("div",Bo,V(O.attname),1),w("div",zo,V(O.atttvalue),1)]))),128)),(W(!0),Q(Ne,null,Ae(K.value.groupRelations||{},(O,P)=>(W(),Q("div",{class:"flex items-baseline mb-4",key:P+"relations"},[w("div",Ro,V(P),1),w("div",Fo,V(O),1)]))),128))])])])):ge("",!0)])),[[$,g.value]])]),T(La,{onRegister:C(f),onSuccess:z},null,8,["onRegister"]),T(Ia,{onRegister:C(m),onSuccess:ye},null,8,["onRegister"])]),_:1})}}}),gs=qt(Wo,[["__scopeId","data-v-78c55c6a"]]);export{gs as default};
