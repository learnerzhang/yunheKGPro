var E=Object.defineProperty,L=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var x=(s,a,t)=>a in s?E(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,b=(s,a)=>{for(var t in a||(a={}))q.call(a,t)&&x(s,t,a[t]);if(S)for(var t of S(a))A.call(a,t)&&x(s,t,a[t]);return s},B=(s,a)=>L(s,j(a));var h=(s,a,t)=>new Promise((d,g)=>{var w=l=>{try{m(t.next(l))}catch(p){g(p)}},i=l=>{try{m(t.throw(l))}catch(p){g(p)}},m=l=>l.done?d(l.value):Promise.resolve(l.value).then(w,i);m((t=t.apply(s,a)).next())});import{u as G,_ as W}from"./useTable-BldcMn6n.js";import"./TableImg.vue_vue_type_style_index_0_lang-2oS39uGR.js";import{_ as Z}from"./BasicForm.vue_vue_type_style_index_0_lang-qpF-DMKT.js";import{an as v,ao as z}from"./entry/index-B-McypeI-1739345778478.js";import{F as R}from"./FormBorder-BUeDstEP.js";import{g as J,h as F}from"./file-CcanAzse.js";import{P as Q}from"./index-C7IcOeO2.js";import{_ as X}from"./FolderTree.vue_vue_type_style_index_0_lang-zQD6utOS.js";import{u as ee}from"./index-dXxTZxnK.js";import{c as te,_ as ae}from"./UpdateModal.vue_vue_type_script_setup_true_lang-Ckh0Fojd.js";import{M as oe,ae as le,af as k,R as ne,A as se,S as re,ak as ie}from"./antd-DuSlDOy9.js";import{d as ce,f as C,u as e,Z as M,a4 as D,a5 as c,k as o,$ as P,G as T,l as y,a8 as de}from"./vue-7EN2lk9e.js";import"./useForm-Hn6EoxrV.js";import"./sortable.esm-BEDva30o.js";import"./onMountedOrActivated-8STL9zTa.js";import"./useWindowSizeFn-B30U4ulB.js";import"./index-BlCAdtVI.js";import"./useSortable-BZ0xEDrO.js";import"./download-CCBYjG8C.js";import"./index-Czo0YvQK.js";import"./copyTextToClipboard-CeRVlT3D.js";import"./useContentViewHeight-B3Yt78Z4.js";import"./index-CPBX9QO_.js";const ue={class:"w-3/4 xl:w-4/5 p-4"},me={class:"bg-light-50 p-4 mb-4 h-16"},Ve=ce({name:"FileManageComponent",__name:"index",setup(s){const[a,t]=oe.useModal(),d=C([]),[g,{openModal:w}]=ee();let i=C({keyword:"",cid:void 0,start_time:"",end_time:""});const[m,{reload:l,clearSelectedRowKeys:p,deleteSelectRowByKey:I,getSelectRowKeys:K}]=G({title:"文档列表",api:J,rowKey:"id",columns:te,beforeFetch:n=>b(B(b({},n),{prodflag:1}),e(i)),fetchSetting:{listField:"data"},useSearchForm:!1,showTableSetting:!0,showIndexColumn:!0,bordered:!0,showSelectionBar:!0,clickToRowSelect:!1,rowSelection:{type:"checkbox"},actionColumn:{width:100,title:"操作",dataIndex:"action"}}),$=()=>{d.value?(i.value.start_time=d.value[0],i.value.end_time=d.value[1]):(i.value.start_time="",i.value.end_time=""),l()},N=n=>{i.value.cid=n==0?void 0:n,l()},f=C([]),V=({keys:n})=>{f.value=n},Y=n=>h(this,null,function*(){yield F({docidstr:n.id}),I(n.id),f.value=K()||[],l()}),H=()=>h(this,null,function*(){a.confirm({title:"你确定删除所选项吗?",icon:y(ie),okButtonProps:{class:"p-0 border-0 bg-transparent"},cancelButtonProps:{class:"p-0 border-0 bg-transparent"},okText:y(v,{type:"danger",class:"pl-2 pr-2"},"确认删除"),cancelText:y(v,{type:"default",class:"pl-2 pr-2"},"取消"),confirmLoading:!1,onOk:()=>h(this,null,function*(){yield F({docidstr:f.value.join(",")}),p(),f.value=[],l()}),onCancel(){}})}),O=n=>{const{id:r,title:u,desc:_}=n;w(!0,{record:{id:r,title:u,desc:_},isUpdate:!0})},U=()=>{l()};return(n,r)=>(M(),D(e(Q),{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:c(()=>[o(X,{class:"w-1/4 xl:w-1/5",onSelect:N}),P("div",ue,[P("div",me,[o(e(v),{type:"danger",onClick:H,class:"mr-4 w-28",disabled:f.value.length===0},{default:c(()=>r[2]||(r[2]=[T(" 批量删除 ")])),_:1},8,["disabled"]),o(e(le),{layout:"inline",class:"float-right"},{default:c(()=>[o(e(k),null,{default:c(()=>[o(e(R),null,{default:c(()=>[o(e(ne),{value:d.value,"onUpdate:value":r[0]||(r[0]=u=>d.value=u),presets:e(z),"value-format":"YYYY-MM-DD",allowClear:""},null,8,["value","presets"])]),_:1})]),_:1}),o(e(k),null,{default:c(()=>[o(e(R),null,{default:c(()=>[o(e(se),{value:e(i).keyword,"onUpdate:value":r[1]||(r[1]=u=>e(i).keyword=u),allowClear:"",placeholder:"搜索文档名称"},null,8,["value"])]),_:1})]),_:1}),o(e(k),null,{default:c(()=>[o(e(v),{type:"primary",onClick:$,icon:y(e(re))},{default:c(()=>r[3]||(r[3]=[T("查询")])),_:1},8,["icon"])]),_:1})]),_:1})]),o(e(W),{onRegister:e(m),searchInfo:n.searchInfo,onSelectionChange:V},{bodyCell:c(({column:u,record:_})=>[u.key==="action"?(M(),D(e(Z),{key:0,actions:[{label:"编辑",onClick:O.bind(null,_)},{label:"删除",color:"error",popConfirm:{title:"是否确认删除",placement:"left",confirm:Y.bind(null,_)}}]},null,8,["actions"])):de("",!0)]),_:1},8,["onRegister","searchInfo"])]),o(e(t)),o(ae,{onRegister:e(g),onSuccess:U},null,8,["onRegister"])]),_:1}))}});export{Ve as default};
