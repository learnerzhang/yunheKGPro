var M=Object.defineProperty;var y=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var w=(i,o,t)=>o in i?M(i,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[o]=t,h=(i,o)=>{for(var t in o||(o={}))P.call(o,t)&&w(i,t,o[t]);if(y)for(var t of y(o))T.call(o,t)&&w(i,t,o[t]);return i};var C=(i,o,t)=>new Promise((l,c)=>{var m=n=>{try{u(t.next(n))}catch(p){c(p)}},f=n=>{try{u(t.throw(n))}catch(p){c(p)}},u=n=>n.done?l(n.value):Promise.resolve(n.value).then(m,f);u((t=t.apply(i,o)).next())});import{u as $,_ as N}from"./useTable-CZJo2ynb.js";import"./TableImg.vue_vue_type_style_index_0_lang-J3ZARUD7.js";import{_ as R}from"./BasicForm.vue_vue_type_style_index_0_lang-Cztz7x8L.js";import{an as k}from"./entry/index-BcL7-Cog-1735891856356.js";import{F as V}from"./FormBorder-EsrxF1hX.js";import{e as U,f as D}from"./graph-C7YSeTKN.js";import{P as E}from"./index-Dc6KXk-k.js";import{u as H}from"./index-CfGFDaHn.js";import{c as K,_ as q}from"./CreateUpdateModal.vue_vue_type_script_setup_true_lang-BtLo4AC5.js";import{_ as A}from"./FolderTree.vue_vue_type_style_index_0_lang-NeuumwDY.js";import{ae as G,af as v,A as O,S as W}from"./antd-DuSlDOy9.js";import{d as Z,f as j,u as a,Z as b,a4 as x,a5 as d,k as r,$ as S,G as F,l as z,a8 as J}from"./vue-7EN2lk9e.js";import"./useForm-D6frmkhD.js";import"./sortable.esm-BEDva30o.js";import"./onMountedOrActivated-8STL9zTa.js";import"./useWindowSizeFn-BG4Rc7k1.js";import"./index-MTdn1QqL.js";import"./useSortable-DorIa95B.js";import"./download-CffIuy2i.js";import"./index-Csyp8HpR.js";import"./copyTextToClipboard-CeRVlT3D.js";import"./useContentViewHeight-DJ0myx8Z.js";import"./index-BX9C0oMS.js";const L={class:"w-3/4 xl:w-4/5 p-4"},Q={class:"bg-light-50 p-4 mb-4 h-16"},ve=Z({name:"PropManageKgComponent",__name:"index",setup(i){const[o,{openModal:t}]=H();let l=j({keyword:"",id:void 0});const[c,{reload:m}]=$({title:"属性列表",api:U,rowKey:"id",columns:K,beforeFetch:e=>h(h({},e),a(l)),afterFetch:e=>(e==null?void 0:e.length)>0&&l.value.keyword?e.filter(s=>s.name.includes(l.value.keyword)):e,fetchSetting:{listField:"data.attlist"},useSearchForm:!1,showTableSetting:!0,showIndexColumn:!0,bordered:!0,immediate:!1,pagination:!1,actionColumn:{width:150,title:"操作",dataIndex:"action",helpMessage:"仅可编辑或删除自身属性，不可操作继承属性。"}}),f=()=>{m()},u=e=>{l.value.id=e==0?void 0:e,m()},n=()=>{t(!0,{isUpdate:!1,record:{esid:l.value.id}})},p=e=>{t(!0,{record:{esid:l.value.id,esaid:e.id,name:e.name,desc:e.desc,type:e.type,multi_flag:e.multi_flag},isUpdate:!0})},I=e=>C(this,null,function*(){yield D({esaid:e.id,esid:l.value.id}),m()}),B=()=>{m()};return(e,s)=>(b(),x(a(E),{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:d(()=>[r(A,{class:"w-1/4 xl:w-1/5",onSelect:u}),S("div",L,[S("div",Q,[r(a(k),{type:"primary",onClick:n,class:"mr-4"},{default:d(()=>s[1]||(s[1]=[F(" 新增属性 ")])),_:1}),r(a(G),{layout:"inline",class:"float-right"},{default:d(()=>[r(a(v),null,{default:d(()=>[r(a(V),null,{default:d(()=>[r(a(O),{value:a(l).keyword,"onUpdate:value":s[0]||(s[0]=_=>a(l).keyword=_),allowClear:"",placeholder:"按属性名称检索"},null,8,["value"])]),_:1})]),_:1}),r(a(v),null,{default:d(()=>[r(a(k),{type:"primary",onClick:f,icon:z(a(W))},{default:d(()=>s[2]||(s[2]=[F("查询")])),_:1},8,["icon"])]),_:1})]),_:1})]),r(a(N),{onRegister:a(c),searchInfo:e.searchInfo},{bodyCell:d(({column:_,record:g})=>[_.key==="action"?(b(),x(a(R),{key:0,actions:[{label:"编辑",onClick:p.bind(null,g)},{label:"删除",color:"error",popConfirm:{title:"是否确认删除",placement:"left",confirm:I.bind(null,g)}}]},null,8,["actions"])):J("",!0)]),_:1},8,["onRegister","searchInfo"])]),r(q,{onRegister:a(o),onSuccess:B},null,8,["onRegister"])]),_:1}))}});export{ve as default};
