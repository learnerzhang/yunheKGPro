var x=(S,y,m)=>new Promise((T,_)=>{var k=o=>{try{c(m.next(o))}catch(b){_(b)}},L=o=>{try{c(m.throw(o))}catch(b){_(b)}},c=o=>o.done?T(o.value):Promise.resolve(o.value).then(k,L);c((m=m.apply(S,y)).next())});import{n as J,o as M,p as Q,q as W}from"./temp-BLD0anSL.js";import{P as X}from"./index-Fa5FDUAc.js";import{a as I,e as Y}from"./temp.data-CH3zx0TX.js";import{c as Z,ah as K,an as z,X as ee}from"./entry/index-gwXb_KLU-1735894345864.js";import{F as i}from"./FormBorder-B3cKGDVh.js";import{d as ae,Y as le,u as e,f as R,o as te,Z as B,a4 as se,a5 as t,$ as v,k as a,G as w,a3 as U,ad as P,_ as q,F as oe,a7 as ne,a0 as re}from"./vue-7EN2lk9e.js";import{ae as ue,af as n,V as N,U as u,A as de,Q as F,aJ as ie,aL as pe,ab as V,ag as h,a9 as $,j as g}from"./antd-DuSlDOy9.js";import"./useContentViewHeight-DsKchgvx.js";import"./useWindowSizeFn-CiLeeFbn.js";import"./onMountedOrActivated-8STL9zTa.js";const me={class:"bg-light-50 p-12 pl-20 pr-20 flex-1"},fe={class:"flex"},_e={class:"flex mt-1"},ce=["onClick"],ve={class:"text-right"},ge=ae({name:"TempEditComponent",__name:"index",setup(S){const y=Z(),m=K(),{currentRoute:T}=le(),_=e(T),k=R([]),L=R("Admin"),c=R(!0);let o=R({fileList:[],cid:_.query.cid||void 0,user_id:m.getUserInfo.userId,user_name:m.getUserInfo.realName,create_time:"",plate_list:[],version:"V1.0",name:"",bus_id:"",desc:""});const b=()=>{y("/temp-manage/page")},A=()=>x(this,null,function*(){const{cid:r,name:l,bus_id:s,user_id:d,version:p,desc:f,fileList:C,temp_id:D}=o.value;if(!r){g.error("请选择保存路径");return}if(!l){g.error("请输入模板名称");return}if(!s){g.error("请选择业务类型");return}if(!p){g.error("请输入版本号");return}if(!f){g.error("请输入模板描述");return}if(C.length===0){g.error("请选择文件");return}if(D){const H=C[0];yield J({file:H.id?void 0:C[0],cid:r,user_id:d,version:p,name:l,bus_id:s,desc:f,temp_id:D})}else yield M({file:C[0],cid:r,user_id:d,version:p,name:l,bus_id:s,desc:f});y("/temp-manage/page")}),E=()=>x(this,null,function*(){const r=(yield Q())||{};k.value=(r==null?void 0:r.map(l=>({label:l.name,value:l.id})))||[]}),G=()=>x(this,null,function*(){const{id:r}=_.query,l=(yield W({tmpid:r}))||{};o.value={fileList:l.filepath?[{name:l.name+"."+l.filepath.substring(l.filepath.lastIndexOf(".")+1),filepath:l.filepath,id:"1"}]:[],cid:l.kg_cct_id,user_id:l.kg_user_id,user_name:l.kg_user,version:l.version,name:l.name,bus_id:l.kg_business_id,desc:l.desc,temp_id:l.id}}),O=()=>x(this,null,function*(){}),j=r=>{};return te(()=>{O(),E(),_.query.id&&G()}),(r,l)=>(B(),se(e(X),{dense:"",contentFullHeight:"",contentClass:"flex p-4"},{default:t(()=>[v("div",me,[a(e(ue),{layout:"vertical"},{default:t(()=>[a(e(n),null,{default:t(()=>[v("div",fe,[l[10]||(l[10]=v("div",{class:"w-1/6 font-bold text-lg label-name"},"模板基本信息",-1)),a(e(N),{class:"!max-w-[83.333333%]",gutter:20},{default:t(()=>[a(e(u),{span:12},{default:t(()=>[a(e(n),{label:"模板名称"},{default:t(()=>[a(e(i),null,{default:t(()=>[a(e(de),{value:e(o).name,"onUpdate:value":l[0]||(l[0]=s=>e(o).name=s),placeholder:"请输入模板名称"},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(e(u),{span:12},{default:t(()=>[a(e(n),{label:"业务类型"},{default:t(()=>[a(e(i),null,{default:t(()=>[a(e(F),{value:e(o).bus_id,"onUpdate:value":l[1]||(l[1]=s=>e(o).bus_id=s),options:k.value,placeholder:"请选择业务类型"},null,8,["value","options"])]),_:1})]),_:1})]),_:1}),a(e(u),{span:12},{default:t(()=>[a(e(n),{label:"创建时间"},{default:t(()=>[a(e(i),null,{default:t(()=>[a(e(ie),{class:"w-full","show-time":"",placeholder:"请选择日期和时间",value:e(o).create_time,"onUpdate:value":l[2]||(l[2]=s=>e(o).create_time=s)},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(e(u),{span:12},{default:t(()=>[a(e(n),{label:"创建人"},{default:t(()=>[a(e(pe),{checked:c.value,"onUpdate:checked":l[3]||(l[3]=s=>c.value=s)},{default:t(()=>[w(U(L.value),1)]),_:1},8,["checked"])]),_:1})]),_:1}),a(e(u),{span:12},{default:t(()=>[a(e(n),{label:"板块配置"},{default:t(()=>[a(e(i),null,{default:t(()=>[a(e(F),{class:"!min-h-[4.7rem]",value:e(o).plate_list,"onUpdate:value":l[4]||(l[4]=s=>e(o).plate_list=s),options:e(I),mode:"tags",placeholder:"请选择板块配置"},{tagRender:t(({label:s,closable:d,onClose:p,option:f})=>[a(e(V),{style:P([{"background-color":f.bgColor},{"margin-right":"3px"}]),closable:d,onClose:p},{default:t(()=>[w(U(s),1)]),_:2},1032,["style","closable","onClose"])]),_:1},8,["value","options"])]),_:1})]),_:1})]),_:1}),a(e(u),{span:12},{default:t(()=>[a(e(n),{label:"模板描述"},{default:t(()=>[a(e(i),null,{default:t(()=>[a(e(h),{value:e(o).desc,"onUpdate:value":l[5]||(l[5]=s=>e(o).desc=s),"auto-size":{minRows:3,maxRows:5},placeholder:"请输入模板描述"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),a(e($),{class:"mt-10 mb-10"}),a(e(n),null,{default:t(()=>[v("div",_e,[l[11]||(l[11]=v("div",{class:"w-1/6 font-bold text-lg label-name"},"板块配置信息",-1)),a(e(N),{class:"flex-1 !max-w-[83.333333%]",gutter:20},{default:t(()=>[a(e(u),{span:24,class:"mb-4 flex flex-wrap"},{default:t(()=>[(B(!0),q(oe,null,ne(e(Y),(s,d)=>(B(),q("div",{class:re(["rounded-full border border-primary px-4 py-1 text-center hover:bg-primary hover:text-white cursor-pointer",`${d>0?"ml-3":""}`]),key:d,onClick:p=>j(s)},U(s),11,ce))),128))]),_:1}),a(e(u),{span:12},{default:t(()=>[a(e(n),{rules:[{required:!0,message:"请输入关键信息"}],label:"关键信息"},{default:t(()=>[a(e(i),null,{default:t(()=>[a(e(h),{value:e(o).desc,"onUpdate:value":l[6]||(l[6]=s=>e(o).desc=s),"auto-size":{minRows:3,maxRows:5},placeholder:"请输入板块关键信息"},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(e(u),{span:12},{default:t(()=>[a(e(n),{label:"参考描述"},{default:t(()=>[a(e(i),null,{default:t(()=>[a(e(h),{value:e(o).desc,"onUpdate:value":l[7]||(l[7]=s=>e(o).desc=s),"auto-size":{minRows:3,maxRows:5},placeholder:"请输入板块参考描述"},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(e(u),{span:12},{default:t(()=>[a(e(n),{label:"关联板块"},{default:t(()=>[a(e(i),null,{default:t(()=>[a(e(F),{value:e(o).plate_list,"onUpdate:value":l[8]||(l[8]=s=>e(o).plate_list=s),mode:"tags",placeholder:"请选择关联板块",class:"!min-h-[4.7rem]",options:e(I)},{tagRender:t(({label:s,closable:d,onClose:p,option:f})=>[a(e(V),{style:P([{"background-color":f.bgColor},{"margin-right":"3px"}]),closable:d,onClose:p},{default:t(()=>[w(U(s),1)]),_:2},1032,["style","closable","onClose"])]),_:1},8,["value","options"])]),_:1})]),_:1})]),_:1}),a(e(u),{span:12},{default:t(()=>[a(e(n),{label:"附加信息"},{default:t(()=>[a(e(i),null,{default:t(()=>[a(e(h),{value:e(o).desc,"onUpdate:value":l[9]||(l[9]=s=>e(o).desc=s),"auto-size":{minRows:3,maxRows:5},placeholder:"请输入附加信息"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),a(e($),{class:"mt-10 mb-10"}),v("div",ve,[a(e(z),{type:"default",class:"mr-4 w-30",onClick:b},{default:t(()=>l[12]||(l[12]=[w("取消")])),_:1}),a(e(z),{type:"primary",class:"w-30",onClick:A},{default:t(()=>l[13]||(l[13]=[w("确认")])),_:1})])])]),_:1}))}}),Be=ee(ge,[["__scopeId","data-v-15b23af1"]]);export{Be as default};
