var m=(t,n,a)=>new Promise((s,o)=>{var l=r=>{try{e(a.next(r))}catch(f){o(f)}},u=r=>{try{e(a.throw(r))}catch(f){o(f)}},e=r=>r.done?s(r.value):Promise.resolve(r.value).then(l,u);e((a=a.apply(t,n)).next())});import{ak as z,u as F,f as B,ap as v}from"./entry/index-gwXb_KLU-1735894345864.js";import{r as k,a1 as x,h as S,c as g,y as A,J as N,u as i,g as T,f as d,d as C,Z as y,a4 as w,a5 as p,a9 as b,G as _,a3 as $,aa as D,a7 as O,a6 as P,ab as R,ag as j,ah as E,k as V}from"./vue-7EN2lk9e.js";import{a as q,B as G,e as J}from"./antd-DuSlDOy9.js";function L(t,n="value",a="change",s){const o=T(),l=o==null?void 0:o.emit,u=k({value:t[n]}),e=x(u),r=c=>{u.value=c};return S(()=>{u.value=t[n]}),[g({get(){return u.value},set(c){q(c,e.value)||(u.value=c,A(()=>{l==null||l(a,c,...N(i(s))||[])}))}}),r,e]}function U(t){const n=d(t),a=d(!1);let s;function o(){s&&window.clearInterval(s)}function l(){a.value=!1,o(),s=null}function u(){i(a)||s||(a.value=!0,s=setInterval(()=>{i(n)===1?(l(),n.value=t):n.value-=1},1e3))}function e(){n.value=t,l()}function r(){e(),u()}return z(()=>{e()}),{start:u,reset:e,restart:r,clear:o,stop:l,currentCount:n,isStart:a}}const h=C({name:"CountButton",__name:"CountButton",props:{value:{type:[Object,Number,String,Array]},count:{type:Number,default:60},beforeStartFunc:{type:Function,default:null}},setup(t){const n=t,{t:a}=F(),s=d(!1),{currentCount:o,isStart:l,start:u,reset:e}=U(n.count),r=g(()=>i(l)?a("component.countdown.sendText",[i(o)]):a("component.countdown.normalText"));S(()=>{n.value===void 0&&e()});function f(){return m(this,null,function*(){const{beforeStartFunc:c}=n;if(c&&J(c)){s.value=!0;try{(yield c())&&u()}finally{s.value=!1}}else u()})}return(c,I)=>(y(),w(i(G),b(c.$attrs,{disabled:i(l),onClick:f,loading:s.value}),{default:p(()=>[_($(r.value),1)]),_:1},16,["disabled","loading"]))}}),Z=C({name:"CountDownInput",inheritAttrs:!1,__name:"CountdownInput",props:{value:{type:String},size:{type:String,validator:t=>["default","large","small"].includes(t)},count:{type:Number,default:60},sendCodeApi:{type:Function,default:null}},setup(t){const n=t,{prefixCls:a}=B("countdown-input"),[s]=L(n);return(o,l)=>{const u=P("a-input");return y(),w(u,b(o.$attrs,{class:i(a),size:t.size,value:i(s)}),D({addonAfter:p(()=>[V(h,{size:t.size,count:t.count,value:i(s),beforeStartFunc:t.sendCodeApi},null,8,["size","count","value","beforeStartFunc"])]),_:2},[O(Object.keys(o.$slots).filter(e=>e!=="addonAfter"),e=>({name:e,fn:p(r=>[R(o.$slots,e,j(E(r||{})))])}))]),1040,["class","size","value"])}}}),W=v(Z);v(h);export{W as C,L as u};
