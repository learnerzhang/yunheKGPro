var ve=Object.defineProperty,Me=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var oe=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable;var ne=(a,r,s)=>r in a?ve(a,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[r]=s,k=(a,r)=>{for(var s in r||(r={}))Ce.call(r,s)&&ne(a,s,r[s]);if(oe)for(var s of oe(r))He.call(r,s)&&ne(a,s,r[s]);return a},I=(a,r)=>Me(a,be(r));var A=(a,r,s)=>new Promise((i,c)=>{var l=d=>{try{o(s.next(d))}catch(u){c(u)}},e=d=>{try{o(s.throw(d))}catch(u){c(u)}},o=d=>d.done?i(d.value):Promise.resolve(d.value).then(l,e);o((s=s.apply(a,r)).next())});import{u as ue,m as Se,aZ as ke,t as Be,s as Fe,a_ as Oe,S as we,f as de,an as ae,aI as Te,d as Pe,at as Ne,aM as pe,ak as $e,ap as De}from"./entry/index-gwXb_KLU-1735894345864.js";import{h as X,u as t,d as W,I as Re,k as B,i as We,f as g,c as F,w as fe,o as _e,b as me,y as N,n as xe,Z as b,a4 as D,a5 as h,m as Ee,_ as V,ab as $,ad as Ie,F as je,a8 as Z,a0 as Le,G,a3 as J,a9 as j,K as Ae,z as ze,aa as le,a7 as se,ag as re,ah as ie,g as Q,r as ge,J as z}from"./vue-7EN2lk9e.js";import{M as qe,a4 as Ve,T as U,a3 as Xe,aM as Ye,o as q,e as he,a as Ue}from"./antd-DuSlDOy9.js";import{u as Ze}from"./useWindowSizeFn-CiLeeFbn.js";const{t:ce}=ue(),Ge={open:{type:Boolean},scrollTop:{type:Boolean,default:!0},height:{type:Number},minHeight:{type:Number},draggable:{type:Boolean,default:!0},centered:{type:Boolean},cancelText:{type:String,default:ce("common.cancelText")},okText:{type:String,default:ce("common.okText")},closeFunc:Function},ee=Object.assign({},Ge,{defaultFullscreen:{type:Boolean},canFullscreen:{type:Boolean,default:!0},wrapperFooterOffset:{type:Number,default:0},helpMessage:[String,Array],useWrapper:{type:Boolean,default:!0},loading:{type:Boolean},loadingTip:{type:String},showCancelBtn:{type:Boolean,default:!0},showOkBtn:{type:Boolean,default:!0},wrapperProps:Object,afterClose:Function,bodyStyle:Object,closable:{type:Boolean,default:!0},closeIcon:Object,confirmLoading:{type:Boolean},destroyOnClose:{type:Boolean},footer:Object,getContainer:Function,mask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},maskStyle:Object,okType:{type:String,default:"primary"},okButtonProps:Object,cancelButtonProps:Object,title:{type:String},open:{type:Boolean},width:[String,Number],wrapClassName:{type:String},zIndex:{type:Number}});function Je(a){const r=(c,l)=>getComputedStyle(c)[l],s=c=>{if(!c)return;c.setAttribute("data-drag",t(a.draggable));const l=c.querySelector(".ant-modal-header"),e=c.querySelector(".ant-modal");!l||!e||!t(a.draggable)||(l.style.cursor="move",l.onmousedown=o=>{if(!o)return;const d=o.clientX,u=o.clientY,S=document.body.clientWidth,M=document.documentElement.clientHeight,y=e.offsetWidth,p=e.offsetHeight,f=e.offsetLeft,m=S-e.offsetLeft-y,v=e.offsetTop,O=M-e.offsetTop-p,C=r(e,"left"),H=r(e,"top");let _=+C,x=+H;C.includes("%")?(_=+document.body.clientWidth*(+C.replace(/%/g,"")/100),x=+document.body.clientHeight*(+H.replace(/%/g,"")/100)):(_=+C.replace(/px/g,""),x=+H.replace(/px/g,"")),document.onmousemove=function(L){let T=L.clientX-d,P=L.clientY-u;-T>f?T=-f:T>m&&(T=m),-P>v?P=-v:P>O&&(P=O),e.style.cssText+=`;left:${T+_}px;top:${P+x}px;`},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}})},i=()=>{const c=document.querySelectorAll(".ant-modal-wrap");for(const l of Array.from(c)){if(!l)continue;const e=r(l,"display"),o=l.getAttribute("data-drag");e!=="none"&&(o===null||t(a.destroyOnClose))&&s(l)}};X(()=>{!t(a.open)||!t(a.draggable)||Se(()=>{i()},30)})}function Ke(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!We(a)}const Qe=W({name:"Modal",inheritAttrs:!1,props:ee,emits:["cancel"],setup(a,{slots:r,emit:s,attrs:i}){const{open:c,draggable:l,destroyOnClose:e}=Re(a);Je({open:c,destroyOnClose:e,draggable:l});const o=d=>{s("cancel",d)};return()=>{let d;const u=I(k(k({},t(i)),a),{onCancel:o});return B(qe,u,Ke(d=ke(r))?d:{default:()=>[d]})}}}),ye=Symbol();function et(a){return Fe(a,ye)}function ft(){return Be(ye)}const tt=["loading-tip"],ot=W({name:"ModalWrapper",inheritAttrs:!1,__name:"ModalWrapper",props:{loading:{type:Boolean},useWrapper:{type:Boolean,default:!0},modalHeaderHeight:{type:Number,default:57},modalFooterHeight:{type:Number,default:74},minHeight:{type:Number,default:200},height:{type:Number},footerOffset:{type:Number,default:0},open:{type:Boolean},fullScreen:{type:Boolean},loadingTip:{type:String}},emits:["height-change","ext-height"],setup(a,{expose:r,emit:s}){const i=a,c=s,l=g(null),e=g(null),o=g(0),d=g(0),u=g(0);Ze(y.bind(null)),Oe(e,()=>{y()},{attributes:!0,subtree:!0}),et({redoModalHeight:y});const S=F(()=>({minHeight:`${i.minHeight}px`,[i.fullScreen?"height":"maxHeight"]:`${t(o)}px`}));X(()=>{i.useWrapper&&y()}),fe(()=>i.fullScreen,p=>{y(),p?d.value=o.value:o.value=d.value}),_e(()=>{const{modalHeaderHeight:p,modalFooterHeight:f}=i;c("ext-height",p+f)}),me(()=>{});function M(){return A(this,null,function*(){N(()=>{var f;const p=t(l);p&&((f=p==null?void 0:p.scrollTo)==null||f.call(p,0))})})}function y(){return A(this,null,function*(){if(!i.open)return;const p=t(l);if(!p)return;const f=p.$el.parentElement;if(f){f.style.padding="0",yield N();try{const m=f.parentElement&&f.parentElement.parentElement;if(!m)return;const v=getComputedStyle(m).top,O=Number.parseInt(v);let C=window.innerHeight-O*2+(i.footerOffset||0)-i.modalFooterHeight-i.modalHeaderHeight;O<40&&(C-=26),yield N();const H=t(e);if(!H)return;yield N(),u.value=H.scrollHeight,i.fullScreen?o.value=window.innerHeight-i.modalFooterHeight-i.modalHeaderHeight-28:o.value=i.height?i.height:u.value>C?C:u.value,c("height-change",t(o))}catch(m){}}})}return r({scrollTop:M,setModalHeight:y}),(p,f)=>{const m=xe("loading");return b(),D(t(we),{ref_key:"wrapperRef",ref:l,scrollHeight:u.value},{default:h(()=>[Ee((b(),V("div",{ref_key:"spinRef",ref:e,style:Ie(S.value),"loading-tip":a.loadingTip},[$(p.$slots,"default")],12,tt)),[[m,a.loading]])]),_:3},8,["scrollHeight"])}}}),nt=W({name:"ModalClose",__name:"ModalClose",props:{canFullscreen:{type:Boolean,default:!0},fullScreen:{type:Boolean}},emits:["cancel","fullscreen"],setup(a,{emit:r}){const s=a,i=r,{prefixCls:c}=de("basic-modal-close"),{t:l}=ue(),e=F(()=>[c,`${c}--custom`,{[`${c}--can-full`]:s.canFullscreen}]);function o(u){i("cancel",u)}function d(u){u==null||u.stopPropagation(),u==null||u.preventDefault(),i("fullscreen")}return(u,S)=>(b(),V("div",{class:Le(e.value)},[a.canFullscreen?(b(),V(je,{key:0},[a.fullScreen?(b(),D(t(U),{key:0,title:t(l)("component.modal.restore"),placement:"bottom"},{default:h(()=>[B(t(Ve),{role:"full",onClick:d})]),_:1},8,["title"])):(b(),D(t(U),{key:1,title:t(l)("component.modal.maximize"),placement:"bottom"},{default:h(()=>[B(t(Xe),{role:"close",onClick:d})]),_:1},8,["title"]))],64)):Z("",!0),B(t(U),{title:t(l)("component.modal.close"),placement:"bottom"},{default:h(()=>[B(t(Ye),{onClick:o})]),_:1},8,["title"])],2))}}),at=W({name:"BasicModalFooter",__name:"ModalFooter",props:ee,emits:["ok","cancel"],setup(a,{emit:r}){const s=r;function i(l){s("ok",l)}function c(l){s("cancel",l)}return(l,e)=>(b(),V("div",null,[$(l.$slots,"insertFooter"),l.showCancelBtn?(b(),D(t(ae),j({key:0,class:"pl-4 pr-4 mr-4"},l.cancelButtonProps,{onClick:c}),{default:h(()=>[G(J(l.cancelText),1)]),_:1},16)):Z("",!0),$(l.$slots,"centerFooter"),l.showOkBtn?(b(),D(t(ae),j({key:1,class:"pl-4 pr-4",type:l.okType,onClick:i,loading:l.confirmLoading},l.okButtonProps),{default:h(()=>[G(J(l.okText),1)]),_:1},16,["type","loading"])):Z("",!0),$(l.$slots,"appendFooter")]))}}),lt=W({name:"BasicModalHeader",__name:"ModalHeader",props:{helpMessage:{type:[String,Array]},title:{type:String}},setup(a){return(r,s)=>(b(),D(t(Te),{helpMessage:a.helpMessage},{default:h(()=>[G(J(a.title),1)]),_:1},8,["helpMessage"]))}});function st(a){const r=g(!1),s=F(()=>{const c=t(a.wrapClassName)||"";return t(r)?`fullscreen-modal ${c} `:t(c)});function i(c){c&&c.stopPropagation(),r.value=!t(r)}return{getWrapClassName:s,handleFullScreen:i,fullScreenRef:r}}const rt=W({name:"BasicModal",inheritAttrs:!1,__name:"BasicModal",props:ee,emits:["open-change","height-change","cancel","ok","register","update:open","fullscreen"],setup(a,{emit:r}){const s=a,i=r,c=Ae(),l=g(!1),e=g(null),o=g(null),{prefixCls:d}=de("basic-modal"),u=g(0),S={setModalProps:_,emitOpen:void 0,redoModalHeight:()=>{N(()=>{t(o)&&t(o).setModalHeight()})}},M=Q();M&&i("register",S,M.uid);const y=F(()=>k(k({},s),t(e))),{handleFullScreen:p,getWrapClassName:f,fullScreenRef:m}=st({modalWrapperRef:o,extHeightRef:u,wrapClassName:ze(y.value,"wrapClassName")}),v=F(()=>{const n=I(k({},t(y)),{open:t(l),okButtonProps:void 0,cancelButtonProps:void 0,title:void 0});return I(k({},n),{wrapClassName:t(f)})}),O=F(()=>{const n=I(k(k({},c),t(y)),{open:t(l)});return(n==null?void 0:n.wrapClassName)===t(f)?n.wrapClassName=`${(n==null?void 0:n.wrapClassName)||""} `+d:n.wrapClassName=`${t(f)||""}`+d,t(m)?q(n,["height","title"]):q(n,"title")}),C=F(()=>{if(!t(m))return t(v).height});X(()=>{l.value=!!s.open,m.value=!!s.defaultFullscreen}),fe(()=>t(l),n=>{i("open-change",n),i("update:open",n),M&&S.emitOpen&&S.emitOpen(n,M.uid),N(()=>{s.scrollTop&&n&&t(o)&&t(o).scrollTop()})},{immediate:!1});function H(n){return A(this,null,function*(){var Y,w;if(n==null||n.stopPropagation(),!((w=(Y=n.target)==null?void 0:Y.classList)!=null&&w.contains(d+"-close--custom"))){if(s.closeFunc&&he(s.closeFunc)){const E=yield s.closeFunc();l.value=!E;return}l.value=!1,i("cancel",n)}})}function _(n){e.value=Pe(t(e)||{},n),Reflect.has(n,"open")&&(l.value=!!n.open),Reflect.has(n,"defaultFullscreen")&&(m.value=!!n.defaultFullscreen)}function x(n){i("ok",n)}function L(n){i("height-change",n)}function T(n){u.value=n}function P(n){s.canFullscreen&&(n.stopPropagation(),te(n))}function te(n){p(n),i("fullscreen")}return(n,Y)=>(b(),D(t(Qe),j(O.value,{onCancel:H}),le({default:h(()=>[B(ot,j({useWrapper:v.value.useWrapper,footerOffset:n.wrapperFooterOffset,fullScreen:t(m),ref_key:"modalWrapperRef",ref:o,loading:v.value.loading,"loading-tip":v.value.loadingTip,minHeight:v.value.minHeight,height:C.value,open:l.value,modalFooterHeight:n.footer!==void 0&&!n.footer?0:void 0},t(q)(v.value.wrapperProps,"open","height","modalFooterHeight"),{onExtHeight:T,onHeightChange:L}),{default:h(()=>[$(n.$slots,"default")]),_:3},16,["useWrapper","footerOffset","fullScreen","loading","loading-tip","minHeight","height","open","modalFooterHeight"])]),_:2},[n.$slots.closeIcon?void 0:{name:"closeIcon",fn:h(()=>[B(nt,{canFullscreen:v.value.canFullscreen,fullScreen:t(m),onCancel:H,onFullscreen:te},null,8,["canFullscreen","fullScreen"])]),key:"0"},n.$slots.title?void 0:{name:"title",fn:h(()=>[B(lt,{helpMessage:v.value.helpMessage,title:y.value.title,onDblclick:P},null,8,["helpMessage","title"])]),key:"1"},n.$slots.footer?void 0:{name:"footer",fn:h(()=>[B(at,j(O.value,{onOk:x,onCancel:H}),le({_:2},[se(Object.keys(n.$slots),w=>({name:w,fn:h(E=>[$(n.$slots,w,re(ie(E||{})))])}))]),1040)]),key:"2"},se(Object.keys(t(q)(n.$slots,"default")),w=>({name:w,fn:h(E=>[$(n.$slots,w,re(ie(E||{})))])}))]),1040))}}),R=ge({}),K=ge({});function mt(){const a=g(null),r=g(!1),s=g(0);function i(e,o){if(!Q())throw new Error("useModal() can only be used inside setup() or functional components!");s.value=o,me(()=>{a.value=null,r.value=!1,R[String(t(s))]=null}),!(t(r)&&Ne()&&e===t(a))&&(a.value=e,r.value=!0,e.emitOpen=(d,u)=>{K[u]=d})}const c=()=>{const e=t(a);return e||pe("useModal instance is undefined!"),e},l={setModalProps:e=>{var o;(o=c())==null||o.setModalProps(e)},getOpen:F(()=>K[~~t(s)]),redoModalHeight:()=>{var e,o;(o=(e=c())==null?void 0:e.redoModalHeight)==null||o.call(e)},openModal:(e=!0,o,d=!0)=>{var M;if((M=c())==null||M.setModalProps({open:e}),!o)return;const u=t(s);if(d){R[u]=null,R[u]=z(o);return}Ue(z(R[u]),z(o))||(R[u]=z(o))},closeModal:()=>{var e;(e=c())==null||e.setModalProps({open:!1})}};return[i,l]}const gt=a=>{const r=g(null),s=Q(),i=g(0),c=()=>{const e=t(r);return e||pe("useModalInner instance is undefined!"),e},l=(e,o)=>{$e(()=>{r.value=null}),i.value=o,r.value=e,s==null||s.emit("register",e,o)};return X(()=>{const e=R[t(i)];e&&(!a||!he(a)||N(()=>{a(e)}))}),[l,{changeLoading:(e=!0)=>{var o;(o=c())==null||o.setModalProps({loading:e})},getOpen:F(()=>K[~~t(i)]),changeOkLoading:(e=!0)=>{var o;(o=c())==null||o.setModalProps({confirmLoading:e})},closeModal:()=>{var e;(e=c())==null||e.setModalProps({open:!1})},setModalProps:e=>{var o;(o=c())==null||o.setModalProps(e)},redoModalHeight:()=>{var o;const e=(o=c())==null?void 0:o.redoModalHeight;e&&e()}}]},ht=De(rt);export{ht as B,gt as a,ft as b,mt as u};
