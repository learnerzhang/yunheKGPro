var Qe=Object.defineProperty,et=Object.defineProperties;var tt=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var nt=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable;var ye=(e,n,r)=>n in e?Qe(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,M=(e,n)=>{for(var r in n||(n={}))nt.call(n,r)&&ye(e,r,n[r]);if(he)for(var r of he(n))lt.call(n,r)&&ye(e,r,n[r]);return e},pe=(e,n)=>et(e,tt(n));var ke=(e,n,r)=>new Promise((k,x)=>{var b=p=>{try{c(r.next(p))}catch(v){x(v)}},a=p=>{try{c(r.throw(p))}catch(v){x(v)}},c=p=>p.done?k(p.value):Promise.resolve(p.value).then(b,a);c((r=r.apply(e,n)).next())});import{an as at,d as ce,f as q,ae as rt,c as F,w as j,Z as O,_ as R,u as i,ab as ct,a8 as P,a4 as te,a5 as $,G as ge,a3 as xe,a0 as be,k as g,F as H,a7 as st,a9 as Oe,B as it,l as ve,o as Fe,y as ot,b as Me,i as Ne,x as ut,g as dt,r as Se,J as W,h as X,m as Ke,A as Ce}from"./vue-7EN2lk9e.js";import{b1 as ft,u as ht,aI as yt,_ as G,z as pt,b2 as me,b3 as kt,aD as gt,b4 as xt,aN as bt,b5 as vt,aZ as Le,S as St,ar as Ae}from"./entry/index-CMbP4qrD-1735889696146.js";import{F as Kt}from"./FormBorder-CKc0r6VT.js";import{b4 as Ct,b5 as mt,b6 as Lt,w as J,ai as At,b7 as _t,D as Et,l as Tt,f as ae,a9 as wt,b8 as Bt,o as It,e as ne,F as Dt,aT as Ot,ac as _e,at as Ft,v as Mt,Y as Ee}from"./antd-DuSlDOy9.js";function re(e,n){return n?typeof n=="string"?` ${e}--${n}`:Array.isArray(n)?n.reduce((r,k)=>r+re(e,k),""):Object.keys(n).reduce((r,k)=>r+(n[k]?re(e,k):""),""):""}function Nt(e){return(n,r)=>(n&&typeof n!="string"&&(r=n,n=""),n=n?`${e}__${n}`:e,`${n}${re(n,r)}`)}function Pe(e){return[Nt(`${ft}-${e}`)]}const Te=Symbol(),we=Symbol();function Pt(e,n){if(!mt(e)||e[we])return e;const{values:r,required:k,default:x,type:b,validator:a}=e,c=r||a?p=>{let v=!1,K=[];if(r&&(K=[...r,x],v||(v=K.includes(p))),a&&(v||(v=a(p))),!v&&K.length>0){const f=[...new Set(K)].map(h=>JSON.stringify(h)).join(", ");at(`Invalid prop: validation failed${n?` for prop "${n}"`:""}. Expected one of [${f}], got value ${JSON.stringify(p)}.`)}return v}:void 0;return{type:typeof b=="object"&&Object.getOwnPropertySymbols(b).includes(Te)&&b?b[Te]:b,required:!!k,default:x,validator:c,[we]:!0}}const $t=e=>Ct(Object.entries(e).map(([n,r])=>[n,Pt(r,n)]));var _=(e=>(e[e.SELECT_ALL=0]="SELECT_ALL",e[e.UN_SELECT_ALL=1]="UN_SELECT_ALL",e[e.EXPAND_ALL=2]="EXPAND_ALL",e[e.UN_EXPAND_ALL=3]="UN_EXPAND_ALL",e[e.CHECK_STRICTLY=4]="CHECK_STRICTLY",e[e.CHECK_UN_STRICTLY=5]="CHECK_UN_STRICTLY",e[e.IMPORT=6]="IMPORT",e[e.EXPORT=7]="EXPORT",e))(_||{});const jt=["update:expandedKeys","update:selectedKeys","update:value","change","check","update:searchValue","import","export"],Ut=$t({value:{type:[Object,Array]},renderIcon:{type:Function},helpMessage:{type:[String,Array],default:""},title:{type:String,default:""},toolbar:Boolean,search:Boolean,searchValue:{type:String,default:""},checkStrictly:Boolean,clickRowToExpand:{type:Boolean,default:!1},checkable:Boolean,exportable:{type:Boolean,default:!1},importable:{type:Boolean,default:!1},defaultExpandLevel:{type:[String,Number],default:""},defaultExpandAll:Boolean,fieldNames:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:[Array,Object],default:()=>[]},beforeRightClick:{type:Function,default:void 0},rightMenuList:{type:Array},filterFn:{type:Function,default:void 0},highlight:{type:[Boolean,String],default:!1},expandOnSearch:Boolean,checkOnSearch:Boolean,selectedOnSearch:Boolean,loading:{type:Boolean,default:!1},treeWrapperClassName:String}),Rt={key:2,class:"flex items-center flex-1 cursor-pointer justify-self-stretch"},Xt=ce({__name:"TreeHeader",props:{helpMessage:{type:[String,Array],default:""},title:{type:String,default:""},toolbar:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},importable:{type:Boolean,default:!1},exportable:{type:Boolean,default:!1},search:{type:Boolean,default:!1},searchText:{type:String,default:""},checkAll:{type:Function,default:void 0},expandAll:{type:Function,default:void 0}},emits:["strictly-change","search","import","export"],setup(e,{emit:n}){const r=q(""),[k]=Pe("tree-header"),x=e,b=n,a=rt(),{t:c}=ht(),p=F(()=>["mr-1","w-full",{"ml-5":a.headerTitle||x.title}]),v=F(()=>{const{checkable:t,importable:o,exportable:s}=x,u=[...o?[{label:c("component.tree.import"),value:_.IMPORT,divider:o&&!s}]:[],...s?[{label:c("component.tree.export"),value:_.EXPORT,divider:s}]:[],{label:c("component.tree.expandAll"),value:_.EXPAND_ALL},{label:c("component.tree.unExpandAll"),value:_.UN_EXPAND_ALL,divider:t}];return t?[{label:c("component.tree.selectAll"),value:_.SELECT_ALL},{label:c("component.tree.unSelectAll"),value:_.UN_SELECT_ALL,divider:t},...u,{label:c("component.tree.checkStrictly"),value:_.CHECK_STRICTLY},{label:c("component.tree.checkUnStrictly"),value:_.CHECK_UN_STRICTLY}]:u}),K=({key:t})=>{var o,s,u,d;switch(t){case _.SELECT_ALL:(o=x.checkAll)==null||o.call(x,!0);break;case _.UN_SELECT_ALL:(s=x.checkAll)==null||s.call(x,!1);break;case _.EXPAND_ALL:(u=x.expandAll)==null||u.call(x,!0);break;case _.UN_EXPAND_ALL:(d=x.expandAll)==null||d.call(x,!1);break;case _.CHECK_STRICTLY:b("strictly-change",!1);break;case _.CHECK_UN_STRICTLY:b("strictly-change",!0);break;case _.IMPORT:b("import",!0);break;case _.EXPORT:b("export",!0);break}};function f(t){b("search",t)}const h=pt(f,200);return j(()=>r.value,t=>{h(t)}),j(()=>x.searchText,t=>{t!==r.value&&(r.value=t)}),(t,o)=>(O(),R("div",{class:be([i(k)(),"flex mb-1 px-2 py-1.5 items-center"])},[i(a).headerTitle?ct(t.$slots,"headerTitle",{key:0}):P("",!0),!i(a).headerTitle&&t.title?(O(),te(i(yt),{key:1,helpMessage:t.helpMessage},{default:$(()=>[ge(xe(t.title),1)]),_:1},8,["helpMessage"])):P("",!0),t.search||t.toolbar?(O(),R("div",Rt,[t.search?(O(),R("div",{key:0,class:be(p.value)},[g(i(Kt),null,{default:$(()=>[g(i(Lt),{placeholder:i(c)("common.searchText"),allowClear:"",size:"small",value:r.value,"onUpdate:value":o[0]||(o[0]=s=>r.value=s)},null,8,["placeholder","value"])]),_:1})],2)):P("",!0),t.toolbar?(O(),te(i(Et),{key:1,onClick:o[1]||(o[1]=it(()=>{},["prevent"]))},{overlay:$(()=>[g(i(J),{onClick:K},{default:$(()=>[(O(!0),R(H,null,st(v.value,s=>(O(),R(H,{key:s.value},[g(i(At),Oe({ref_for:!0},{key:s.value}),{default:$(()=>[ge(xe(s.label),1)]),_:2},1040),s.divider?(O(),te(i(_t),{key:0})):P("",!0)],64))),128))]),_:1})]),default:$(()=>[g(G,{icon:"ion:ellipsis-vertical"})]),_:1})):P("",!0)])):P("",!0)],2))}}),Ht=({icon:e})=>e?Tt(e)?ve(G,{icon:e,class:"mr-2"}):ve(G):null;function Vt(e,n){function r(f){const h=[],t=f||i(e),{key:o,children:s}=i(n);if(!s||!o)return h;for(let u=0;u<t.length;u++){const d=t[u];h.push(d[o]);const S=d[s];S&&S.length&&h.push(...r(S))}return h}function k(f){const h=[],t=f||i(e),{key:o,children:s}=i(n);if(!s||!o)return h;for(let u=0;u<t.length;u++){const d=t[u];d.disabled!==!0&&d.selectable!==!1&&h.push(d[o]);const S=d[s];S&&S.length&&h.push(...k(S))}return h}function x(f,h){const t=[],o=h||i(e),{key:s,children:u}=i(n);if(!u||!s)return t;for(let d=0;d<o.length;d++){const S=o[d],E=S[u];f===S[s]?(t.push(S[s]),E&&E.length&&t.push(...r(E))):E&&E.length&&t.push(...x(f,E))}return t}function b(f,h,t){if(!f)return;const o=t||i(e),{key:s,children:u}=i(n);if(!(!u||!s))for(let d=0;d<o.length;d++){const S=o[d],E=S[u];if(S[s]===f){o[d]=M(M({},o[d]),h);break}else E&&E.length&&b(f,h,S[u])}}function a(f=1,h,t=1){if(!f)return[];const o=[],s=h||i(e)||[];for(let u=0;u<s.length;u++){const d=s[u],{key:S,children:E}=i(n),Z=S?d[S]:"",U=E?d[E]:[];o.push(Z),U&&U.length&&t<f&&(t+=1,o.push(...a(f,U,t)))}return o}function c({parentKey:f=null,node:h,push:t="push"}){const o=ae(i(e));if(!f){o[t](h),e.value=o;return}const{key:s,children:u}=i(n);!u||!s||(me(o,d=>{if(d[s]===f)return d[u]=d[u]||[],d[u][t](h),!0}),e.value=o)}function p({parentKey:f=null,list:h,push:t="push"}){const o=ae(i(e));if(!(!h||h.length<1))if(f){const{key:s,children:u}=i(n);if(!u||!s)return;me(o,d=>{if(d[s]===f){d[u]=d[u]||[];for(let S=0;S<h.length;S++)d[u][t](h[S]);return e.value=o,!0}})}else{for(let s=0;s<h.length;s++)o[t](h[s]);e.value=o;return}}function v(f,h){if(!f)return;const t=h||i(e),{key:o,children:s}=i(n);if(!(!s||!o))for(let u=0;u<t.length;u++){const d=t[u],S=d[s];if(d[o]===f){t.splice(u,1);break}else S&&S.length&&v(f,d[s])}}function K(f,h,t){if(!f&&f!==0)return null;const o=h||i(e),{key:s,children:u}=i(n);return s?(o.forEach(d=>{if(t!=null&&t.key||(t==null?void 0:t.key)===0)return t;if(d[s]===f){t=d;return}d[u]&&d[u].length&&(t=K(f,d[u],t))}),t||null):null}return{deleteNodeByKey:v,insertNodeByKey:c,insertNodesByKey:p,filterByLevel:a,updateNodeByKey:b,getAllKeys:r,getChildrenKeys:x,getEnabledKeys:k,getSelectedNode:K}}function Yt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ne(e)}const le="context-menu",zt={width:{type:Number,default:156},customEvent:{type:Object,default:null},styles:{type:Object},showIcon:{type:Boolean,default:!0},axis:{type:Object,default(){return{x:0,y:0}}},items:{type:Array,default(){return[]}}},Be=e=>{const{item:n}=e;return g("span",{style:"display: inline-block; width: 100%; ",class:"px-4",onClick:e.handler.bind(null,n)},[e.showIcon&&n.icon&&g(G,{class:"mr-2",icon:n.icon},null),g("span",null,[n.label])])},Wt=ce({name:"ContextMenu",props:zt,setup(e){const n=q(null),r=q(!1),k=F(()=>{const{axis:a,items:c,styles:p,width:v}=e,{x:K,y:f}=a||{x:0,y:0},h=(c||[]).length*40,t=v,o=document.body,s=o.clientWidth<K+t?K-t:K,u=o.clientHeight<f+h?f-h:f;return M({position:"absolute",width:`${v}px`,left:`${s+1}px`,top:`${u+1}px`,zIndex:9999},p)});Fe(()=>{ot(()=>r.value=!0)}),Me(()=>{const a=i(n);a&&document.body.removeChild(a)});function x(a,c){const{handler:p,disabled:v}=a;v||(r.value=!1,c==null||c.stopPropagation(),c==null||c.preventDefault(),p==null||p())}function b(a){return a.filter(p=>!p.hidden).map(p=>{const{disabled:v,label:K,children:f,divider:h=!1}=p,t={item:p,handler:x,showIcon:e.showIcon};return!f||f.length===0?g(H,null,[g(J.Item,{disabled:v,class:`${le}__item`,key:K},{default:()=>[g(Be,t,null)]}),h?g(wt,{key:`d-${K}`},null):null]):i(r)?g(J.SubMenu,{key:K,disabled:v,popupClassName:`${le}__popup`},{title:()=>g(Be,t,null),default:()=>b(f)}):null})}return()=>{let a;if(!i(r))return null;const{items:c}=e;return g(J,{inlineIndent:12,mode:"vertical",class:le,ref:n,style:i(k)},Yt(a=b(c))?a:{default:()=>[a]})}}}),N={domList:[],resolve:()=>{}},Jt=function(e){const{event:n}=e||{};if(n&&(n==null||n.preventDefault()),!!kt)return new Promise(r=>{const k=document.body,x=document.createElement("div"),b={};e.styles&&(b.styles=e.styles),e.items&&(b.items=e.items),e.event&&(b.customEvent=n,b.axis={x:n.clientX,y:n.clientY+k.scrollTop});const a=g(Wt,b);ut(a,x);const c=function(){N.resolve("")};N.domList.push(x);const p=function(){N.domList.forEach(v=>{try{v&&k.removeChild(v)}catch(K){}}),k.removeEventListener("click",c),k.removeEventListener("scroll",c)};N.resolve=function(v){p(),r(v)},p(),k.appendChild(x),k.addEventListener("click",c),k.addEventListener("scroll",c)})},Ie=function(){N&&(N.resolve(""),N.domList=[])};function qt(e=!0){return dt()&&e&&Me(()=>{Ie()}),[Jt,Ie]}function De(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ne(e)}const nn=ce({name:"BasicTree",inheritAttrs:!1,props:Ut,emits:jt,setup(e,{attrs:n,slots:r,emit:k,expose:x}){const[b]=Pe("tree"),a=Se({checkStrictly:e.checkStrictly,expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],checkedKeys:e.checkedKeys||[]}),c=Se({startSearch:!1,searchText:"",searchData:[]}),p=q([]),[v]=qt(),K=F(()=>{const{fieldNames:l}=e;return M({children:"children",title:"title",key:"key"},l)}),f=F(()=>{let l=pe(M(M({blockNode:!0},n),e),{expandedKeys:a.expandedKeys,selectedKeys:a.selectedKeys,checkedKeys:a.checkedKeys,checkStrictly:a.checkStrictly,fieldNames:i(K),"onUpdate:expandedKeys":y=>{a.expandedKeys=y,k("update:expandedKeys",y)},"onUpdate:selectedKeys":y=>{a.selectedKeys=y,k("update:selectedKeys",y)},onCheck:(y,m)=>{let C=W(a.checkedKeys);if(gt(C)&&c.startSearch){const A=m.node.eventKey;C=Bt(C,Z(A)),m.checked&&C.push(A),a.checkedKeys=C}else a.checkedKeys=y;const L=W(a.checkedKeys);k("update:value",L),k("check",L,m)},onRightClick:Ue});return It(l,"treeData","class")}),h=F(()=>c.startSearch?c.searchData:i(p)),t=F(()=>!h.value||h.value.length===0),{deleteNodeByKey:o,insertNodeByKey:s,insertNodesByKey:u,filterByLevel:d,updateNodeByKey:S,getAllKeys:E,getChildrenKeys:Z,getEnabledKeys:U,getSelectedNode:$e}=Vt(p,K);function je(l,y){return!y&&e.renderIcon&&ne(e.renderIcon)?e.renderIcon(l):y}function Ue(m){return ke(this,arguments,function*({event:l,node:y}){var I;const{rightMenuList:C=[],beforeRightClick:L}=e;let A={event:l,items:[]};if(L&&ne(L)){let T=yield L(y,l);Array.isArray(T)?A.items=T:Object.assign(A,T)}else A.items=C;(I=A.items)!=null&&I.length&&(A.items=A.items.filter(T=>!T.hidden),v(A))})}function se(){return i(p)}function V(l){a.expandedKeys=l}function Re(){return a.expandedKeys}function ie(l){a.selectedKeys=l}function Xe(){return a.selectedKeys}function oe(l){a.checkedKeys=l}function He(){return a.checkedKeys}function ue(l){a.checkedKeys=l?U():[]}function Q(l){a.expandedKeys=l?E():[]}function Ve(l){a.checkStrictly=l}j(()=>e.searchValue,l=>{l!==c.searchText&&(c.searchText=l)},{immediate:!0}),j(()=>e.treeData,l=>{l&&ee(c.searchText)});function ee(l){if(l!==c.searchText&&(c.searchText=l),k("update:searchValue",l),!l){c.startSearch=!1;return}const{filterFn:y,checkable:m,expandOnSearch:C,checkOnSearch:L,selectedOnSearch:A}=i(e);c.startSearch=!0;const{title:I,key:T}=i(K),B=[];if(c.searchData=xt(i(p),w=>{var Y,z;const D=y?y(l,w,i(K)):(z=(Y=w[I])==null?void 0:Y.includes(l))!=null?z:!1;return D&&B.push(w[T]),D},i(K)),C){const w=bt(c.searchData).map(D=>D[T]);w&&w.length&&V(w)}L&&m&&B.length&&oe(B),A&&B.length&&ie(B)}function Ye(l,y){if(!(!e.clickRowToExpand||!y||y.length===0))if(!a.expandedKeys.includes(l))V([...a.expandedKeys,l]);else{const m=[...a.expandedKeys],C=m.findIndex(L=>L===l);C!==-1&&m.splice(C,1),V(m)}}function ze(){const{exportable:l}=e;l&&k("export",se())}function We(){const{importable:l}=e;l&&k("import",!0)}X(()=>{p.value=e.treeData}),Fe(()=>{const l=parseInt(e.defaultExpandLevel);l>0?a.expandedKeys=d(l):e.defaultExpandAll&&Q(!0)}),X(()=>{a.expandedKeys=e.expandedKeys}),X(()=>{a.selectedKeys=e.selectedKeys}),X(()=>{a.checkedKeys=e.checkedKeys}),j(()=>e.value,()=>{a.checkedKeys=W(e.value||[])},{immediate:!0}),j(()=>a.checkedKeys,()=>{const l=W(a.checkedKeys);k("update:value",l),k("change",l)}),X(()=>{a.checkStrictly=e.checkStrictly});const Je={getTreeData:se,setExpandedKeys:V,getExpandedKeys:Re,setSelectedKeys:ie,getSelectedKeys:Xe,setCheckedKeys:oe,getCheckedKeys:He,insertNodeByKey:s,insertNodesByKey:u,deleteNodeByKey:o,updateNodeByKey:S,getSelectedNode:$e,checkAll:ue,expandAll:Q,filterByLevel:l=>{a.expandedKeys=d(l)},setSearchValue:l=>{ee(l)},getSearchValue:()=>c.searchText};function qe(l){const{actionList:y}=e;if(!(!y||y.length===0))return y.map((m,C)=>{var A;let L=!0;return ne(m.show)?L=(A=m.show)==null?void 0:A.call(m,l):Ee(m.show)&&(L=m.show),L?g("span",{key:C,class:b("action")},[m.render(l)]):null})}const Ge=F(()=>{const l=ae(h.value);return vt(l,(y,m)=>{var fe;const C=c.searchText,{highlight:L}=i(e),{title:A,key:I,children:T}=i(K),B=je(y,y.icon),w=Ft(y,A),D=C?w.indexOf(C):-1,Y=c.startSearch&&!Mt(C)&&L&&D!==-1,z=`color: ${Ee(L)?"#f50":L}`,Ze=Y?g("span",{class:(fe=i(f))!=null&&fe.blockNode?`${b("content")}`:""},[g("span",null,[w.substr(0,D)]),g("span",{style:z},[C]),g("span",null,[w.substr(D+C.length)])]):w,de=B?g(Ht,{icon:B},null):r.icon?g("span",{class:"mr-2"},[Ae(r,"icon")]):null;return y[A]=g("span",{class:`${b("title")}`,onClick:Ye.bind(null,y[I],y[T])},[r!=null&&r.title?g(H,null,[de,Ae(r,"title",y)]):g(H,null,[de,Ze,g("span",{class:b("actions")},[qe(y)])])]),y}),l});return x(Je),()=>{let l,y;const{title:m,helpMessage:C,toolbar:L,search:A,checkable:I}=e,T=m||L||A||r.headerTitle,B={height:"calc(100% - 38px)"};return g("div",{class:[b(),"h-full",n.class]},[T&&g(Xt,{checkable:I,importable:e.importable,exportable:e.exportable,checkAll:ue,expandAll:Q,title:m,search:A,toolbar:L,helpMessage:C,onStrictlyChange:Ve,onSearch:ee,onExport:ze,onImport:We,searchText:c.searchText},De(l=Le(r))?l:{default:()=>[l]}),g(Dt,{wrapperClassName:i(e.treeWrapperClassName),spinning:i(e.loading),tip:"加载中..."},{default:()=>[Ke(g(St,{style:B},{default:()=>[g(Ot,Oe(i(f),{showIcon:!1,treeData:Ge.value}),De(y=Le(r,["title"]))?y:{default:()=>[y]})]}),[[Ce,!i(t)]]),Ke(g(_e,{image:_e.PRESENTED_IMAGE_SIMPLE,class:"!mt-4"},null),[[Ce,i(t)]])]})])}}});export{nn as _};
