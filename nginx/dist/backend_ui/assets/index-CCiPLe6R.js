var G=(_,d,i)=>new Promise((n,Y)=>{var c=m=>{try{p(i.next(m))}catch(v){Y(v)}},g=m=>{try{p(i.throw(m))}catch(v){Y(v)}},p=m=>m.done?n(m.value):Promise.resolve(m.value).then(c,g);p((i=i.apply(_,d)).next())});import{n as e,O as M,Q as $,R as k,U as D,V as L,j}from"./antd-DuSlDOy9.js";import{a as P}from"./entry/index-gwXb_KLU-1735894345864.js";import{_ as R}from"./TemplateGrowLine.vue_vue_type_script_setup_true_lang-BuVNyu7z.js";import{_ as T}from"./QAGrowLine.vue_vue_type_script_setup_true_lang-Drer1TmA.js";import{_ as U}from"./RelationGrowLine.vue_vue_type_script_setup_true_lang-BvJeW_Ik.js";import{_ as V}from"./EntityGrowLine.vue_vue_type_script_setup_true_lang-DoUjEos6.js";import{_ as q}from"./DocGrowLine.vue_vue_type_script_setup_true_lang-CHos-Obg.js";import{_ as B}from"./ModelTypePie.vue_vue_type_script_setup_true_lang-vdB6f6ou.js";import{d as N,f,o as S,Z as E,_ as I,$ as w,k as t,a5 as r,u,G as A}from"./vue-7EN2lk9e.js";import"./useECharts-CP6vG1T6.js";function Q(_){return P.get({url:"/kg-api/kgapp/dataIndex",params:_},{joinPrefix:!1,apiUrl:""})}const Z={class:"p-4"},z={class:"flex items-center mb-2"},F={class:"ml-4"},ua=N({__name:"index",setup(_){const d=f(!0),i=f("month"),n=f({type:"month",rangeDate:[e().subtract(5,"month").startOf("month"),e()]}),Y=f({}),c=f({}),g=f({}),p=f({}),m=f({}),v=f([]),C=l=>{i.value=l;let a="",o="";l=="hour"?(i.value="day",a=e(e().subtract(23,"hour").format("YYYY-MM-DD HH:00")),o=e()):l=="day"?(a=e().subtract(7,"day"),o=e()):l=="month"&&(i.value="month",a=e().subtract(5,"month").startOf("month"),o=e()),n.value.rangeDate=[a,o],h()},O=()=>{h()},h=()=>G(this,null,function*(){var b;const l=n.value.rangeDate||[],a=n.value.type||"";if(!l.length){j.error("请选择时间范围");return}let o="",y="",x="";a=="month"&&(o=e(l[0]).startOf("month").format("YYYY-MM-DD 00:00:00"),y=e(l[1]).add(1,"month").startOf("month").format("YYYY-MM-DD 00:00:00"),x="3"),a=="day"&&(o=e(l[0]).format("YYYY-MM-DD 00:00:00"),y=e(l[1]).add(1,"day").format("YYYY-MM-DD 00:00:00"),x="2"),a=="hour"&&(o=e(l[0]).format("YYYY-MM-DD HH:00:00"),y=e(l[1]).add(1,"day").format("YYYY-MM-DD 00:00:00"),x="1"),d.value=!0;const s=(yield Q({start_time:o,end_time:y,type:x}))||{};Y.value={xAxisData:s.spans||[],yAxisData:s.template_num||[]},c.value={xAxisData:s.spans||[],yAxisData:s.qa_num||[]},g.value={xAxisData:s.spans||[],yAxisData:s.rel_num||[]},p.value={xAxisData:s.spans||[],yAxisData:s.ent_num||[]},m.value={xAxisData:s.spans||[],yAxisData:s.doc_num||[]},v.value=((b=Object.keys(s.modelGroup||{}))==null?void 0:b.map(H=>({name:H,value:s.modelGroup[H]})))||[],d.value=!1});return S(()=>{h()}),(l,a)=>(E(),I("div",Z,[w("div",z,[a[5]||(a[5]=w("div",{class:"flex-1 px-2 text-base font-bold"},"知识统计",-1)),w("div",F,[t(u($),{ref:"select",value:n.value.type,"onUpdate:value":a[0]||(a[0]=o=>n.value.type=o),style:{width:"100px"},onChange:C},{default:r(()=>[t(u(M),{value:"month"},{default:r(()=>a[2]||(a[2]=[A("按月查询")])),_:1}),t(u(M),{value:"day"},{default:r(()=>a[3]||(a[3]=[A("按天查询")])),_:1}),t(u(M),{value:"hour"},{default:r(()=>a[4]||(a[4]=[A("按时查询")])),_:1})]),_:1},8,["value"]),t(u(k),{class:"ml-2",style:{width:"300px"},value:n.value.rangeDate,"onUpdate:value":a[1]||(a[1]=o=>n.value.rangeDate=o),picker:i.value,format:n.value.type=="month"?"YYYY-MM":n.value.type=="day"?"YYYY-MM-DD":n.value.type=="hour"?"YYYY-MM-DD HH:mm":"","value-format":"YYYY-MM-DD HH:mm","show-time":i.value=="day"&&n.value.type=="hour",onChange:O},null,8,["value","picker","format","show-time"])])]),t(u(L),{gutter:[20,20]},{default:r(()=>[t(u(D),{span:12},{default:r(()=>[t(R,{data:Y.value,loading:d.value},null,8,["data","loading"])]),_:1}),t(u(D),{span:12},{default:r(()=>[t(T,{data:c.value,loading:d.value},null,8,["data","loading"])]),_:1}),t(u(D),{span:12},{default:r(()=>[t(U,{data:g.value,loading:d.value},null,8,["data","loading"])]),_:1}),t(u(D),{span:12},{default:r(()=>[t(V,{data:p.value,loading:d.value},null,8,["data","loading"])]),_:1}),t(u(D),{span:12},{default:r(()=>[t(B,{data:v.value,loading:d.value},null,8,["data","loading"])]),_:1}),t(u(D),{span:12},{default:r(()=>[t(q,{data:m.value,loading:d.value},null,8,["data","loading"])]),_:1})]),_:1})]))}});export{ua as default};
