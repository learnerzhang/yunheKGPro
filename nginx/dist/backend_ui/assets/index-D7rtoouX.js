var Y=Object.defineProperty;var M=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var F=(i,s,l)=>s in i?Y(i,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[s]=l,S=(i,s)=>{for(var l in s||(s={}))G.call(s,l)&&F(i,l,s[l]);if(M)for(var l of M(s))H.call(s,l)&&F(i,l,s[l]);return i};var k=(i,s,l)=>new Promise((C,y)=>{var u=d=>{try{f(l.next(d))}catch(m){y(m)}},b=d=>{try{f(l.throw(d))}catch(m){y(m)}},f=d=>d.done?C(d.value):Promise.resolve(d.value).then(u,b);f((l=l.apply(i,s)).next())});import{u as W,_ as Z}from"./useTable-BldcMn6n.js";import"./TableImg.vue_vue_type_style_index_0_lang-2oS39uGR.js";import{_ as j}from"./BasicForm.vue_vue_type_style_index_0_lang-qpF-DMKT.js";import{c as z,an as x,ao as Q}from"./entry/index-B-McypeI-1739345778478.js";import{F as P}from"./FormBorder-BUeDstEP.js";import{g as X,k as ee,b as te,d as ae}from"./temp-BXVrim_O.js";import{P as le}from"./index-C7IcOeO2.js";import{t as oe,_ as se}from"./CreateUpdateConditionModal.vue_vue_type_script_setup_true_lang-CxGzhOoF.js";import{u as ne}from"./index-dXxTZxnK.js";import{J as re}from"./index-Bb1-DPSH.js";import{ae as ie,af as R,R as de,A as ue,S as me,M as pe}from"./antd-DuSlDOy9.js";import{d as ce,f as c,o as fe,u as e,Z as _,a4 as A,a5 as r,$ as B,k as n,G as T,l as ge,a8 as w,_ as D,a3 as I}from"./vue-7EN2lk9e.js";import"./useForm-Hn6EoxrV.js";import"./sortable.esm-BEDva30o.js";import"./onMountedOrActivated-8STL9zTa.js";import"./useWindowSizeFn-B30U4ulB.js";import"./index-BlCAdtVI.js";import"./useSortable-BZ0xEDrO.js";import"./download-CCBYjG8C.js";import"./index-Czo0YvQK.js";import"./copyTextToClipboard-CeRVlT3D.js";import"./useContentViewHeight-B3Yt78Z4.js";import"./rule-oooZlTFW.js";const _e={class:"w-100% h-100% p-4"},ye={class:"bg-light-50 p-4 mb-4"},ve={key:1},he={key:2},ke={key:3},He=ce({name:"DataAccessComponent",__name:"index",setup(i){const s=c([]),l=()=>k(this,null,function*(){let o=[];(yield ee()).data.map(a=>{o.push({value:a.id,label:a.name})}),s.value=o});fe(()=>{l()});const C=o=>{let t="";return s.value.map(a=>{o==a.value&&(t=a.label)}),t},y=z(),u=c([]),[b,{openModal:f}]=ne(),d=()=>{h()},m=c(!1),N=c([]),K=o=>{m.value=!1};let p=c({start_time:"",end_time:""});const v=c([]),O=({keys:o})=>{v.value=o},[$,{reload:h,clearSelectedRowKeys:q,deleteSelectRowByKey:we,getSelectRowKeys:Ce}]=W({title:"接口清单",api:X,rowKey:"id",columns:oe,beforeFetch:o=>S(S({},o),e(p)),fetchSetting:{listField:"data"},useSearchForm:!1,showTableSetting:!0,showIndexColumn:!0,bordered:!0,rowSelection:{type:"checkbox"},actionColumn:{width:150,title:"操作",dataIndex:"action"}}),E=()=>{u.value?(p.value.start_time=u.value[0],p.value.end_time=u.value[1]):(p.value.start_time="",p.value.end_time=""),h()},J=()=>{f(!0,{isUpdate:!1})},L=()=>k(this,null,function*(){let o=[];v.value.length>0&&v.value.map(a=>{o.push({id:JSON.stringify(a)})});const t={data:JSON.stringify({data:o})};yield te(t),q(),v.value=[],h()}),U=o=>{y(`/dataAccess/interfaceEdit?id=${o.id}`)},V=o=>k(this,null,function*(){try{yield ae({id:o.id})}catch(t){}h()});return(o,t)=>(_(),A(e(le),{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:r(()=>[B("div",_e,[B("div",ye,[n(e(x),{type:"primary",onClick:J,class:"mr-4"},{default:r(()=>t[3]||(t[3]=[T(" 新增API ")])),_:1}),n(e(x),{type:"danger",onClick:L,class:"mr-4"},{default:r(()=>t[4]||(t[4]=[T(" 批量删除 ")])),_:1}),n(e(ie),{layout:"inline",class:"float-right"},{default:r(()=>[n(e(R),null,{default:r(()=>[n(e(P),null,{default:r(()=>[n(e(de),{value:u.value,"onUpdate:value":t[0]||(t[0]=a=>u.value=a),presets:e(Q),"value-format":"YYYY-MM-DD",allowClear:""},null,8,["value","presets"])]),_:1})]),_:1}),n(e(R),null,{default:r(()=>[n(e(P),null,{default:r(()=>[n(e(ue),{value:e(p).keyword,"onUpdate:value":t[1]||(t[1]=a=>e(p).keyword=a),allowClear:"",placeholder:"搜索接口名称"},null,8,["value"])]),_:1})]),_:1}),n(e(R),null,{default:r(()=>[n(e(x),{type:"primary",onClick:E,icon:ge(e(me))},{default:r(()=>t[5]||(t[5]=[T("查询")])),_:1},8,["icon"])]),_:1})]),_:1})]),n(e(Z),{onRegister:e($),onSelectionChange:O},{bodyCell:r(({column:a,record:g})=>[a.key==="action"?(_(),A(e(j),{key:0,actions:[{label:"编辑",onClick:U.bind(null,g)},{label:"删除",color:"error",popConfirm:{title:"是否确认删除",placement:"left",confirm:V.bind(null,g)}}]},null,8,["actions"])):w("",!0),a.key==="req_type"?(_(),D("div",ve,I(g.req_type==0?"POST":"GET"),1)):w("",!0),a.key==="kgTag_id"?(_(),D("div",he,I(C(g.kgTag_id)),1)):w("",!0),a.key==="activate"?(_(),D("div",ke,I(g.req_type==0?"否":"是"),1)):w("",!0)]),_:1},8,["onRegister"])]),n(se,{onRegister:e(b),onSuccess:d},null,8,["onRegister"]),n(e(pe),{open:m.value,"onUpdate:open":t[2]||(t[2]=a=>m.value=a),title:"swagger格式",onOk:K},{default:r(()=>[n(e(re),{data:N.value,class:"h-400px overflow-y-scroll"},null,8,["data"])]),_:1},8,["open"])]),_:1}))}});export{He as default};
