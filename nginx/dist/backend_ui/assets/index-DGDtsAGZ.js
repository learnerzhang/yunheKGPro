var L=Object.defineProperty;var x=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var B=(i,l,a)=>l in i?L(i,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[l]=a,w=(i,l)=>{for(var a in l||(l={}))Q.call(l,a)&&B(i,a,l[a]);if(x)for(var a of x(l))U.call(l,a)&&B(i,a,l[a]);return i};var y=(i,l,a)=>new Promise((u,v)=>{var b=s=>{try{_(a.next(s))}catch(g){v(g)}},c=s=>{try{_(a.throw(s))}catch(g){v(g)}},_=s=>s.done?u(s.value):Promise.resolve(s.value).then(b,c);_((a=a.apply(i,l)).next())});import{u as j,_ as E}from"./useTable-BaaQy3Ug.js";import"./TableImg.vue_vue_type_style_index_0_lang-DHdWHvBk.js";import{_ as G}from"./BasicForm.vue_vue_type_style_index_0_lang-DeNCmJ5N.js";import{an as m,ao as W}from"./entry/index-CMbP4qrD-1735889696146.js";import{F as R}from"./FormBorder-CKc0r6VT.js";import{g as Z,c as z,_ as J,b as P,s as X}from"./UpdateModal.vue_vue_type_script_setup_true_lang-Dkbb9MvY.js";import{P as ee}from"./index-j8d3xuEr.js";import{_ as ae}from"./FolderTree.vue_vue_type_style_index_0_lang-Cc7YMRwu.js";import{u as te}from"./index-cSGZvoEm.js";import{M as le,ae as oe,af as k,R as se,A as ne,S as re,ak as T,j as ie}from"./antd-DuSlDOy9.js";import{d as ce,f as C,u as e,Z as F,a4 as M,a5 as r,k as o,$ as I,G as S,l as f,a8 as de}from"./vue-7EN2lk9e.js";import"./useForm-DGjywljk.js";import"./sortable.esm-BEDva30o.js";import"./onMountedOrActivated-8STL9zTa.js";import"./useWindowSizeFn-LSIiJum6.js";import"./index-B2XyhbVp.js";import"./useSortable-Wgj0Awpf.js";import"./download-D9JLiexF.js";import"./index-CUux1OiP.js";import"./copyTextToClipboard-CeRVlT3D.js";import"./useContentViewHeight-psDjuUgH.js";import"./index-CAJtQUpX.js";import"./file-CwdbWB1Z.js";const ue={class:"w-3/4 xl:w-4/5 p-4"},pe={class:"bg-light-50 p-4 mb-4 h-16"},Ne=ce({name:"FileManageComponent",__name:"index",setup(i){const[l,a]=le.useModal(),u=C([]),[v,{openModal:b}]=te();let c=C({keyword:"",cid:void 0,start_time:"",end_time:""});const[_,{reload:s,clearSelectedRowKeys:g,deleteSelectRowByKey:D,getSelectRowKeys:K}]=j({title:"指令回复列表",api:Z,rowKey:"id",columns:z,beforeFetch:t=>w(w({},t),e(c)),fetchSetting:{listField:"data"},useSearchForm:!1,showTableSetting:!0,showIndexColumn:!0,bordered:!0,showSelectionBar:!0,clickToRowSelect:!1,rowSelection:{type:"checkbox"},actionColumn:{width:100,title:"操作",dataIndex:"action"}}),$=()=>{u.value?(c.value.start_time=u.value[0],c.value.end_time=u.value[1]):(c.value.start_time="",c.value.end_time=""),s()},A=t=>{c.value.cid=t==0?void 0:t,s()},d=C([]),N=({keys:t})=>{d.value=t},O=t=>y(this,null,function*(){yield P({idstr:t.id}),D(t.id),d.value=K()||[],s()}),V=()=>y(this,null,function*(){l.confirm({title:"你确定删除所选项吗?",icon:f(T),okButtonProps:{class:"p-0 border-0 bg-transparent"},cancelButtonProps:{class:"p-0 border-0 bg-transparent"},okText:f(m,{type:"danger",class:"pl-2 pr-2"},"确认删除"),cancelText:f(m,{type:"default",class:"pl-2 pr-2"},"取消"),confirmLoading:!1,onOk:()=>y(this,null,function*(){yield P({idstr:d.value.join(",")}),g(),d.value=[],s()}),onCancel(){}})}),Y=()=>y(this,null,function*(){l.confirm({title:"你确定同步所选项至大模型吗?",icon:f(T),okButtonProps:{class:"p-0 border-0 bg-transparent"},cancelButtonProps:{class:"p-0 border-0 bg-transparent"},okText:f(m,{type:"primary",class:"pl-2 pr-2"},"确认同步"),cancelText:f(m,{type:"default",class:"pl-2 pr-2"},"取消"),confirmLoading:!1,onOk:()=>y(this,null,function*(){const t=yield X({qidlist:d.value});t.msg&&ie.info(t.msg),g(),d.value=[],s()}),onCancel(){}})}),q=t=>{const{id:n,question:p,answer:h}=t;b(!0,{record:{id:n,question:p,answer:h},isUpdate:!0})},H=()=>{s()};return(t,n)=>(F(),M(e(ee),{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:r(()=>[o(ae,{class:"w-1/4 xl:w-1/5",onSelect:A}),I("div",ue,[I("div",pe,[o(e(m),{type:"danger",onClick:V,class:"w-28 mr-4",disabled:d.value.length===0},{default:r(()=>n[2]||(n[2]=[S(" 批量删除 ")])),_:1},8,["disabled"]),o(e(m),{class:"mr-4 w-28",type:"primary",onClick:Y,disabled:d.value.length===0},{default:r(()=>n[3]||(n[3]=[S("同步数据")])),_:1},8,["disabled"]),o(e(oe),{layout:"inline",class:"float-right"},{default:r(()=>[o(e(k),null,{default:r(()=>[o(e(R),null,{default:r(()=>[o(e(se),{value:u.value,"onUpdate:value":n[0]||(n[0]=p=>u.value=p),presets:e(W),"value-format":"YYYY-MM-DD",allowClear:""},null,8,["value","presets"])]),_:1})]),_:1}),o(e(k),null,{default:r(()=>[o(e(R),null,{default:r(()=>[o(e(ne),{value:e(c).keyword,"onUpdate:value":n[1]||(n[1]=p=>e(c).keyword=p),allowClear:"",placeholder:"搜索指令名称"},null,8,["value"])]),_:1})]),_:1}),o(e(k),null,{default:r(()=>[o(e(m),{type:"primary",onClick:$,icon:f(e(re))},{default:r(()=>n[4]||(n[4]=[S("查询")])),_:1},8,["icon"])]),_:1})]),_:1})]),o(e(E),{onRegister:e(_),searchInfo:t.searchInfo,onSelectionChange:N},{bodyCell:r(({column:p,record:h})=>[p.key==="action"?(F(),M(e(G),{key:0,actions:[{label:"编辑",onClick:q.bind(null,h)},{label:"删除",color:"error",popConfirm:{title:"是否确认删除",placement:"left",confirm:O.bind(null,h)}}]},null,8,["actions"])):de("",!0)]),_:1},8,["onRegister","searchInfo"])]),o(e(a)),o(J,{onRegister:e(v),onSuccess:H},null,8,["onRegister"])]),_:1}))}});export{Ne as default};
