var W=Object.defineProperty,Z=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var K=(s,l,a)=>l in s?W(s,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[l]=a,v=(s,l)=>{for(var a in l||(l={}))Q.call(l,a)&&K(s,a,l[a]);if(B)for(var a of B(l))X.call(l,a)&&K(s,a,l[a]);return s},h=(s,l)=>Z(s,J(l));var D=(s,l,a)=>new Promise((u,_)=>{var g=d=>{try{m(a.next(d))}catch(p){_(p)}},w=d=>{try{m(a.throw(d))}catch(p){_(p)}},m=d=>d.done?u(d.value):Promise.resolve(d.value).then(g,w);m((a=a.apply(s,l)).next())});import{u as I,_ as N}from"./useTable-BldcMn6n.js";import"./TableImg.vue_vue_type_style_index_0_lang-2oS39uGR.js";import{_ as V}from"./BasicForm.vue_vue_type_style_index_0_lang-qpF-DMKT.js";import{an as y,ao as $}from"./entry/index-B-McypeI-1739345778478.js";import{F as b}from"./FormBorder-BUeDstEP.js";import{g as ee,a as te,d as ae,b as le}from"./rule-oooZlTFW.js";import{P as oe}from"./index-C7IcOeO2.js";import{u as H}from"./index-dXxTZxnK.js";import{_ as ne}from"./CreateUpdateRuleModal.vue_vue_type_script_setup_true_lang-ByDszRTM.js";import{_ as ie}from"./CreateUpdateConditionModal.vue_vue_type_script_setup_true_lang-sZP8IE8r.js";import{a as se,b as re}from"./condition.data-ZHc8PRmL.js";import{aa as ue,bj as A,ae as L,af as f,R as j,A as q,S as z}from"./antd-DuSlDOy9.js";import{d as de,f as M,u as e,Z as S,a4 as T,a5 as o,$ as C,k as t,H as me,G as k,l as E,a8 as G}from"./vue-7EN2lk9e.js";import"./useForm-Hn6EoxrV.js";import"./sortable.esm-BEDva30o.js";import"./onMountedOrActivated-8STL9zTa.js";import"./useWindowSizeFn-B30U4ulB.js";import"./index-BlCAdtVI.js";import"./useSortable-BZ0xEDrO.js";import"./download-CCBYjG8C.js";import"./index-Czo0YvQK.js";import"./copyTextToClipboard-CeRVlT3D.js";import"./useContentViewHeight-B3Yt78Z4.js";const pe={class:"p-4"},fe={class:"bg-light-50 p-4 mb-4"},ce={class:"mt-2"},ve={class:"mt-2"},He=de({name:"RelationManageKgComponent",__name:"index",setup(s){let l=M("1"),a=M({keyword:"",start_time:"",end_time:""});const u=M([]),[_,{openModal:g}]=H(),[w,{reload:m}]=I({title:"规则目标列表",api:ee,rowKey:"id",columns:se,beforeFetch:r=>h(v(v({},r),e(a)),{type:1}),fetchSetting:{listField:"data"},useSearchForm:!1,showTableSetting:!0,showIndexColumn:!0,bordered:!0,actionColumn:{width:100,title:"操作",dataIndex:"action"}}),[d,{openModal:p}]=H(),[O,{reload:R}]=I({title:"条件指标列表",api:te,rowKey:"id",columns:re,beforeFetch:r=>h(v(v({},r),e(a)),{type:2}),fetchSetting:{listField:"data"},useSearchForm:!1,showTableSetting:!0,showIndexColumn:!0,bordered:!0,actionColumn:{width:100,title:"操作",dataIndex:"action"}}),F=()=>{u.value?(a.value.start_time=u.value[0],a.value.end_time=u.value[1]):(a.value.start_time="",a.value.end_time=""),l.value==="1"?m():R()},x=()=>{l.value==="1"?g(!0,{isUpdate:!1}):p(!0,{isUpdate:!1})},U=r=>{l.value==="1"?g(!0,{record:r,isUpdate:!0}):p(!0,{record:r,isUpdate:!0})},P=r=>D(this,null,function*(){l.value==="1"?(yield ae({id:r.id}),m()):(yield le({id:r.id}),R())}),Y=()=>{l.value==="1"?m():R()};return(r,n)=>(S(),T(e(oe),{dense:"",contentFullHeight:"",fixedHeight:""},{default:o(()=>[C("div",pe,[C("div",fe,[t(e(ue),{activeKey:e(l),"onUpdate:activeKey":n[4]||(n[4]=i=>me(l)?l.value=i:l=i),type:"card",size:"large",animated:""},{default:o(()=>[t(e(A),{key:"1",tab:"规则目标"},{default:o(()=>[C("div",ce,[t(e(y),{type:"primary",onClick:x,class:"mr-4"},{default:o(()=>n[5]||(n[5]=[k(" 新建规则目标 ")])),_:1}),t(e(L),{layout:"inline",class:"float-right"},{default:o(()=>[t(e(f),null,{default:o(()=>[t(e(b),null,{default:o(()=>[t(e(j),{value:u.value,"onUpdate:value":n[0]||(n[0]=i=>u.value=i),presets:e($),"value-format":"YYYY-MM-DD",allowClear:""},null,8,["value","presets"])]),_:1})]),_:1}),t(e(f),null,{default:o(()=>[t(e(b),null,{default:o(()=>[t(e(q),{value:e(a).keyword,"onUpdate:value":n[1]||(n[1]=i=>e(a).keyword=i),allowClear:"",placeholder:"按规则目标名称检索"},null,8,["value"])]),_:1})]),_:1}),t(e(f),null,{default:o(()=>[t(e(y),{type:"primary",onClick:F,icon:E(e(z))},{default:o(()=>n[6]||(n[6]=[k("查询")])),_:1},8,["icon"])]),_:1})]),_:1})]),t(e(N),{onRegister:e(w),class:"mt-4"},{bodyCell:o(({column:i,record:c})=>[i.key==="action"?(S(),T(e(V),{key:0,actions:[{label:"编辑",onClick:U.bind(null,c)},{label:"删除",color:"error",popConfirm:{title:"是否确认删除",placement:"left",confirm:P.bind(null,c)}}]},null,8,["actions"])):G("",!0)]),_:1},8,["onRegister"])]),_:1}),t(e(A),{key:"2",tab:"条件指标"},{default:o(()=>[C("div",ve,[t(e(y),{type:"primary",onClick:x,class:"mr-4"},{default:o(()=>n[7]||(n[7]=[k(" 新建条件指标 ")])),_:1}),t(e(L),{layout:"inline",class:"float-right"},{default:o(()=>[t(e(f),null,{default:o(()=>[t(e(b),null,{default:o(()=>[t(e(j),{value:u.value,"onUpdate:value":n[2]||(n[2]=i=>u.value=i),presets:e($),"value-format":"YYYY-MM-DD",allowClear:""},null,8,["value","presets"])]),_:1})]),_:1}),t(e(f),null,{default:o(()=>[t(e(b),null,{default:o(()=>[t(e(q),{value:e(a).keyword,"onUpdate:value":n[3]||(n[3]=i=>e(a).keyword=i),allowClear:"",placeholder:"按条件指标名称检索"},null,8,["value"])]),_:1})]),_:1}),t(e(f),null,{default:o(()=>[t(e(y),{type:"primary",onClick:F,icon:E(e(z))},{default:o(()=>n[8]||(n[8]=[k("查询")])),_:1},8,["icon"])]),_:1})]),_:1})]),t(e(N),{onRegister:e(O),class:"mt-4"},{bodyCell:o(({column:i,record:c})=>[i.key==="action"?(S(),T(e(V),{key:0,actions:[{label:"编辑",onClick:U.bind(null,c)},{label:"删除",color:"error",popConfirm:{title:"是否确认删除",placement:"left",confirm:P.bind(null,c)}}]},null,8,["actions"])):G("",!0)]),_:1},8,["onRegister"])]),_:1})]),_:1},8,["activeKey"])])]),t(ne,{onRegister:e(_),onSuccess:Y},null,8,["onRegister"]),t(ie,{onRegister:e(d),onSuccess:Y},null,8,["onRegister"])]),_:1}))}});export{He as default};
