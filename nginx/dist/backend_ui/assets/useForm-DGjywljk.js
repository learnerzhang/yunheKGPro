var Je=Object.defineProperty,Ye=Object.defineProperties;var Xe=Object.getOwnPropertyDescriptors;var Pe=Object.getOwnPropertySymbols;var Ge=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable;var Ce=(e,f,i)=>f in e?Je(e,f,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[f]=i,T=(e,f)=>{for(var i in f||(f={}))Ge.call(f,i)&&Ce(e,i,f[i]);if(Pe)for(var i of Pe(f))Ze.call(f,i)&&Ce(e,i,f[i]);return e},Ve=(e,f)=>Ye(e,Xe(f));var S=(e,f,i)=>new Promise((l,I)=>{var P=d=>{try{u(i.next(d))}catch(b){I(b)}},n=d=>{try{u(i.throw(d))}catch(b){I(b)}},u=d=>d.done?l(d.value):Promise.resolve(d.value).then(P,n);u((i=i.apply(e,f)).next())});import{c as U,u as t,d as Me,I as Qe,m as et,k as M,i as tt,a9 as oe,A as nt,G as st,w as te,am as at,g as ot,y as ge,J as xe,h as rt,K as it,r as Te,f as G,o as lt,Z as Ae,a4 as Se,a5 as pe,ab as he,_ as ct,a7 as ve,aa as De,F as ft,ag as Be,ah as Oe,al as ut,b as dt}from"./vue-7EN2lk9e.js";import{F as mt}from"./FormBorder-CKc0r6VT.js";import{k as re,l as Re,N as je,m as Le,s as pt,n as Ne,o as ht,p as yt,q as bt,r as gt}from"./BasicForm.vue_vue_type_style_index_0_lang-DeNCmJ5N.js";import{u as At,ar as Ee,aI as vt,a$ as Ft,w as z,aD as ie,aw as J,am as wt,z as qe,aM as ye,d as Ke,f as It,at as Pt,aL as Ct}from"./entry/index-CMbP4qrD-1735889696146.js";import{aO as We,e as N,Y as Z,U as _e,a9 as Vt,ae as Fe,f as ee,r as xt,a$ as Tt,l as be,s as ne,at as le,b0 as ke,d as Q,v as $e,b1 as St,a5 as Dt,V as Bt}from"./antd-DuSlDOy9.js";import{b as Ot}from"./index-cSGZvoEm.js";function Rt(e){return"slot"in e}function jt(e){return!Rt(e)}function Lt(e,f){return U(()=>{const i=t(e),{labelCol:l={},wrapperCol:I={}}=i.itemProps||{},{labelWidth:P,disabledLabelWidth:n}=i,{labelWidth:u,labelCol:d,wrapperCol:b,layout:V}=t(f);if(!u&&!P&&!d||n)return l.style={textAlign:"left"},{labelCol:l,wrapperCol:I};let D=P||u;const j=T(T({},d),l),p=T(T({},b),I);return D&&(D=We(D)?`${D}px`:D),{labelCol:T({style:{width:D}},j),wrapperCol:T({style:{width:V==="vertical"?"100%":`calc(100% - ${D})`}},p)}})}function ae(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!tt(e)}const Et=["Input","InputNumber","Select","Cascader","DatePicker","TimePicker","Upload","ImageUpload","RangePicker","TimeRangePicker","InputPassword","InputSearch","InputTextArea","ApiSelect","ApiCascader","ApiTreeSelect","ApiCascaderTree","ApiSelectTransfer","ApiCascaderTransfer"],_t=Me({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object},isAdvanced:{type:Boolean}},setup(e,{slots:f}){const{t:i}=At(),{schema:l,formProps:I}=Qe(e);l.value.component==="CropperAvatar"&&typeof I.value.size=="string"&&(I.value.size=void 0);const P=Lt(l,I),n=U(()=>{const{allDefaultValues:o,formModel:a,schema:m}=e,{mergeDynamicData:F}=e.formProps;return{field:m.field,model:a,values:T(T(T({},F),o),a),schema:m}}),u=U(()=>{var w;const{schema:o,tableAction:a,formModel:m,formActionType:F}=e;let{componentProps:y={}}=o;return N(y)&&(y=(w=y({schema:o,tableAction:a,formModel:m,formActionType:F}))!=null?w:{}),re(o.component)&&(y=Object.assign({type:"horizontal"},{orientation:"left",plain:!0},y)),y}),d=U(()=>{const{disabled:o}=e.formProps,{dynamicDisabled:a}=e.schema,{disabled:m=!1}=t(u);let F=!!o||m;return Z(a)&&(F=a),N(a)&&(F=a(t(n))),F}),b=U(()=>{const{readonly:o}=e.formProps,{dynamicReadonly:a}=e.schema,{readonly:m=!1}=t(u);let F=o||m;return Z(a)&&(F=a),N(a)&&(F=a(t(n))),F});function V(){const{show:o,ifShow:a}=e.schema,{showAdvancedButton:m}=e.formProps,F=m&&Z(e.isAdvanced)?e.isAdvanced:!0;let y=!0,w=!0;return Z(o)&&(y=o),Z(a)&&(w=a),N(o)&&(y=o(t(n))),N(a)&&(w=a(t(n))),y=y&&F,{isShow:y,isIfShow:w}}function D(){var r;const{rules:o=[],component:a,rulesMessageJoinLabel:m,label:F,dynamicRules:y,required:w}=e.schema;if(N(y))return y(t(n));let A=ee(o);const{rulesMessageJoinLabel:L}=e.formProps,$=(Reflect.has(e.schema,"rulesMessageJoinLabel")?m:L)?N(F)?"":F:"",B=a?Le(a)+$:$;function x(h,v){const R=h.message||B;return v===void 0||xt(v)||Array.isArray(v)&&v.length===0||typeof v=="string"&&v.trim()===""||typeof v=="object"&&Reflect.has(v,"checked")&&Reflect.has(v,"halfChecked")&&Array.isArray(v.checked)&&Array.isArray(v.halfChecked)&&v.checked.length===0&&v.halfChecked.length===0?Promise.reject(R):Promise.resolve()}const s=N(w)?w(t(n)):w;if(s)if(!A||A.length===0){const h=je.includes(a||"Input")?"blur":"change";A=[{required:s,validator:x,trigger:h}]}else A.findIndex(v=>Reflect.has(v,"required"))===-1&&A.push({required:s,validator:x});const c=A.findIndex(h=>Reflect.has(h,"required")&&!Reflect.has(h,"validator"));if(c!==-1){const h=A[c],{isShow:v}=V();if(v||(h.required=!1),a){h.message=h.message||B,(a.includes("Input")||a.includes("Textarea"))&&(h.whitespace=!0);const R=(r=t(u))==null?void 0:r.valueFormat;pt(h,a,R)}}const g=A.findIndex(h=>h.max);return g!==-1&&!A[g].validator&&(A[g].message=A[g].message||i("component.form.maxTip",[A[g].max])),A}function j(){var h;if(!jt(e.schema))return null;const{renderComponentContent:o,component:a,field:m,changeEvent:F="change",valueField:y}=e.schema,w=a&&["Switch","Checkbox"].includes(a),A=`on${Tt(F)}`,L={[A]:(...v)=>{const[R]=v,O=R?R.target:null,q=O?w?O.checked:O.value:R;e.setFormModel(m,q,e.schema),x[A]&&x[A](...v)}},k=Re.get(a),{autoSetPlaceHolder:$,size:B}=e.formProps,x=Ve(T({allowClear:!0,size:B},t(u)),{disabled:t(d),readonly:t(b)});!x.disabled&&$&&a!=="RangePicker"&&a&&(x.placeholder=((h=t(u))==null?void 0:h.placeholder)||Le(a)),x.codeField=m,x.formValues=t(n);const c={[y||(w?"checked":"value")]:e.formModel[m]},g=T(T(T({},x),L),c);if(!o)return M(k,g,null);const r=N(o)?T({},o(t(n),{disabled:t(d),readonly:t(b)})):{default:()=>o};return M(k,g,ae(r)?r:{default:()=>[r]})}function p(){const{label:o,helpMessage:a,helpComponentProps:m,subLabel:F}=e.schema,y=N(o)?o(t(n)):o,w=F?M("span",null,[y,st(" "),M("span",{class:"text-secondary"},[F])]):y,A=N(a)?a(t(n)):a;return!A||Array.isArray(A)&&A.length===0?w:M("span",null,[w,M(Ft,oe({placement:"top",class:"mx-1",text:A},m),null)])}function E(){const{itemProps:o,slot:a,render:m,field:F,suffix:y,component:w,prefix:A}=e.schema,{labelCol:L,wrapperCol:k}=t(P),{colon:$}=e.formProps,B={disabled:t(d),readonly:t(b)};if(w==="Divider"){let x;return M(_e,{span:24},{default:()=>[M(Vt,t(u),ae(x=p())?x:{default:()=>[x]})]})}else if(w==="BasicTitle"){let x;return M(Fe.Item,{labelCol:L,wrapperCol:k,name:F,class:{"suffix-item":!!y,"prefix-item":!!A}},{default:()=>[M(vt,t(u),ae(x=p())?x:{default:()=>[x]})]})}else{let x;const s=()=>a?Ee(f,a,t(n),B):m?m(t(n),B):j(),c=!!y,g=N(y)?y(t(n)):y,r=!!A,h=N(A)?A(t(n)):A;return w&&je.includes(w)&&e.schema&&(e.schema.itemProps=T({autoLink:!1},e.schema.itemProps)),M(Fe.Item,oe({name:F,colon:$,class:{"suffix-item":c,"prefix-item":r}},o,{label:p(),rules:D(),labelCol:L,wrapperCol:k}),{default:()=>[M("div",{style:"display:flex"},[r&&M("span",{class:"prefix"},[h]),M("div",{style:"flex:1;"},[Et.includes(w)?M(mt,null,ae(x=s())?x:{default:()=>[x]}):s()]),c&&M("span",{class:"suffix"},[g])])]})}}return()=>{let o;const{colProps:a={},colSlot:m,renderColContent:F,component:y,slot:w}=e.schema;if(!(y&&Re.has(y)||w))return null;const{baseColProps:A={}}=e.formProps,L=T(T({},A),a),{isIfShow:k,isShow:$}=V(),B=t(n),x={disabled:t(d),readonly:t(b)};return k&&et(M(_e,L,ae(o=m?Ee(f,m,B,x):F?F(B,x):E())?o:{default:()=>[o]}),[[nt,$]])}}});function kt(e,f,i){const l=/^\[(.+)\]$/;if(l.test(e)){const I=e.match(l);if(I&&I[1]){const P=I[1].split(",");return f=Array.isArray(f)?f:[f],P.forEach((n,u)=>{ne(i,n.trim(),f[u])}),!0}}}function $t(e,f,i){const l=/^\{(.+)\}$/;if(l.test(e)){const I=e.match(l);if(I&&I[1]){const P=I[1].split(",");return f=z(f)?f:{},P.forEach(n=>{ne(i,n.trim(),f[n.trim()])}),!0}}}function Mt({defaultValueRef:e,getSchema:f,formModel:i,getProps:l}){function I(d){var V,D;if(!z(d))return{};const b={};for(const j of Object.entries(d)){let[,p]=j;const[E]=j;if(!E||ie(p)&&p.length===0||N(p))continue;const o=t(l).transformDateFunc;z(p)&&(p=o==null?void 0:o(p)),ie(p)&&((V=p[0])!=null&&V.format)&&((D=p[1])!=null&&D.format)&&(p=p.map(a=>o==null?void 0:o(a))),be(p)&&(p=p.trim()),!kt(E,p,b)&&!$t(E,p,b)&&ne(b,E,p)}return P(b)}function P(d){const b=t(l).fieldMapToTime;if(!b||!Array.isArray(b))return d;for(const[V,[D,j],p="YYYY-MM-DD"]of b){if(!V||!D||!j)continue;if(!le(d,V)){ke(d,V);continue}const[E,o]=le(d,V),[a,m]=Array.isArray(p)?p:[p,p];!Q(E)&&!$e(E)&&ne(d,D,n(E,a)),!Q(o)&&!$e(o)&&ne(d,j,n(o,m)),ke(d,V)}return d}function n(d,b){return b==="timestamp"?J(d).unix():b==="timestampStartDay"?J(d).startOf("day").unix():J(d).format(b)}function u(){const d=t(f),b={};d.forEach(V=>{const{defaultValue:D,defaultValueObj:j,componentProps:p={}}=V,E=Object.keys(j||{});E.length&&E.forEach(o=>{b[o]=j[o],i[o]===void 0&&(i[o]=j[o])}),Q(D)||(b[V.field]=D,i[V.field]===void 0&&(i[V.field]=D)),Q(p==null?void 0:p.defaultValue)||(b[V.field]=p==null?void 0:p.defaultValue,i[V.field]===void 0&&(i[V.field]=p==null?void 0:p.defaultValue))}),e.value=ee(b)}return{handleFormValues:I,initDefault:u}}const X=24;function Nt({advanceState:e,emit:f,getProps:i,getSchema:l,formModel:I,defaultValueRef:P}){const n=ot(),{realWidthRef:u,screenEnum:d,screenRef:b}=wt(),V=U(()=>{if(!e.isAdvanced)return 0;const a=t(i).emptySpan||0;if(We(a))return a;if(z(a)){const{span:m=0}=a,F=t(b);return a[F.toLowerCase()]||m||0}return 0}),D=qe(E,30);te([()=>t(l),()=>e.isAdvanced,()=>t(u)],()=>{const{showAdvancedButton:a}=t(i);a&&D()},{immediate:!0});function j(a,m=0,F=!1){const y=t(u),w=parseInt(a.md)||parseInt(a.xs)||parseInt(a.sm)||a.span||X,A=parseInt(a.lg)||w,L=parseInt(a.xl)||A,k=parseInt(a.xxl)||L;return y<=d.LG?m+=w:y<d.XL?m+=A:y<d.XXL?m+=L:m+=k,F?(e.hideAdvanceBtn=!1,m<=X*2?(e.hideAdvanceBtn=!0,e.isAdvanced=!0):m>X*2&&m<=X*(t(i).autoAdvancedLine||3)?e.hideAdvanceBtn=!1:e.isLoad||(e.isLoad=!0,e.isAdvanced=!e.isAdvanced),{isAdvanced:e.isAdvanced,itemColSum:m}):m>X*(t(i).alwaysShowLines||1)?{isAdvanced:e.isAdvanced,itemColSum:m}:{isAdvanced:!0,itemColSum:m}}const p=at({});function E(){var y;let a=0,m=0;const{baseColProps:F={}}=t(i);for(const w of t(l)){const{show:A,ifShow:L,colProps:k}=w,$={schema:w,model:I,field:w.field,values:T(T({},t(P)),I)};let B=!0;if(B&&Z(L)&&(B=L),B&&N(L)&&(B=L($)),B&&Z(A)&&(B=A),B&&N(A)&&(B=A($)),B&&(k||F)){const{itemColSum:x,isAdvanced:s}=j(T(T({},F),k),a);a=x||0,s&&(m=a),p[w.field]=s}}(y=n==null?void 0:n.proxy)==null||y.$forceUpdate(),e.actionSpan=m%X+t(V),j(t(i).actionColOptions||{span:X},a,!0),f("advanced-change",e.isAdvanced)}function o(){e.isAdvanced=!e.isAdvanced}return{handleToggleAdvanced:o,fieldsIsAdvancedMap:p}}function qt(e,f={}){const i=/^\[(.+)\]$/;if(i.test(e)){const l=e.match(i);if(l&&l[1]){const I=l[1].split(",");if(!I.length)return;const P=[];return I.forEach((n,u)=>{ne(P,u,f[n.trim()])}),P.filter(Boolean).length?P:void 0}}}function Kt({emit:e,getProps:f,formModel:i,getSchema:l,defaultValueRef:I,formElRef:P,schemaRef:n,handleFormValues:u}){function d(){return S(this,null,function*(){const{resetFunc:s,submitOnReset:c}=t(f);s&&N(s)&&(yield s()),t(P)&&(Object.keys(i).forEach(r=>{const h=t(l).find(O=>O.field===r),v=h==null?void 0:h.defaultValueObj,R=Object.keys(v||{});R.length&&R.forEach(O=>{i[O]=v[O]}),i[r]=Wt(h,I,r)}),ge(()=>k()),e("reset",xe(i)),c&&B())})}const b=()=>t(l).map(s=>[...s.fields||[],s.field]).flat(1).filter(Boolean);function V(s){return S(this,null,function*(){if(Object.keys(s).length===0)return;const c=b(),g=[];c.forEach(r=>{const h=t(l).find(K=>K.field===r),v=le(s,r),R=St(s,r),{componentProps:O}=h||{};let q=O;typeof O=="function"&&(q=q({formModel:t(i),formActionType:x}));let Y;const ce=K=>K?q!=null&&q.valueFormat?K:J(K):null;if(y(h==null?void 0:h.component)&&(Y=qt(r,s),Y)){const K=Y||v;if(Array.isArray(K)){const fe=[];for(const se of K)fe.push(ce(se));t(i)[r]=fe,g.push(r)}else t(i)[r]=ce(K),g.push(r)}if(R){Y=le(v,r);const K=Y||v;t(i)[r]=K,q!=null&&q.onChange&&(q==null||q.onChange(K)),g.push(r)}}),w(g).catch(r=>{})})}function D(s){if(!Array.isArray(s)||Array.isArray(s)&&s.length===0)return;const c=[],g=Object.keys(t(i));g&&(s.forEach(r=>{g.includes(r)&&(c.push(r),t(i)[r]=ee(t(le(I.value,r))))}),w(c).catch(r=>{}))}function j(s){return S(this,null,function*(){const c=ee(t(l));if(!s)return;let g=be(s)?[s]:s;be(s)&&(g=[s]);for(const r of g)p(r,c);n.value=c})}function p(s,c){if(be(s)){const g=c.findIndex(r=>r.field===s);g!==-1&&(delete i[s],c.splice(g,1))}}function E(s,c,g=!1){return S(this,null,function*(){const r=ee(t(l)),h=Array.isArray(s)?s.map(O=>O.field):[s.field];if(r.find(O=>h.includes(O.field))){ye("There are schemas that have already been added");return}const v=r.findIndex(O=>O.field===c),R=z(s)?[s]:s;!c||v===-1||g?g?r.unshift(...R):r.push(...R):v!==-1&&r.splice(v+1,0,...R),n.value=r,m(s)})}function o(s){return S(this,null,function*(){let c=[];if(z(s)&&c.push(s),ie(s)&&(c=[...s]),!c.every(r=>re(r.component)||Reflect.has(r,"field")&&r.field)){ye("All children of the form Schema array that need to be updated must contain the `field` field");return}n.value=c})}function a(s){return S(this,null,function*(){let c=[];if(z(s)&&c.push(s),ie(s)&&(c=[...s]),!c.every(v=>re(v.component)||Reflect.has(v,"field")&&v.field)){ye("All children of the form Schema array that need to be updated must contain the `field` field");return}const r=[],h=[];t(l).forEach(v=>{const R=c.find(O=>v.field===O.field);if(R){const O=Ke(v,R);h.push(O),r.push(O)}else r.push(v)}),m(h),n.value=Dt(r,"field")})}function m(s){let c=[];z(s)&&c.push(s),ie(s)&&(c=[...s]);const g={},r=F();c.forEach(h=>{!re(h.component)&&Reflect.has(h,"field")&&h.field&&!Q(h.defaultValue)&&(!(h.field in r)||Q(r[h.field]))&&(g[h.field]=h.defaultValue)}),V(g)}function F(){return t(P)?u(xe(t(i))):{}}function y(s){return Ne.includes(s)}function w(s){return S(this,null,function*(){var g;const c=yield(g=t(P))==null?void 0:g.validateFields(s);return u(c)})}function A(s){return S(this,null,function*(){var c;yield(c=t(P))==null?void 0:c.setProps(s)})}function L(s){return S(this,null,function*(){var r;let c;s===void 0?c=b():c=s===Array.isArray(s)?s:void 0;const g=yield(r=t(P))==null?void 0:r.validate(c);return u(g)})}function k(s){return S(this,null,function*(){var c;yield(c=t(P))==null?void 0:c.clearValidate(s)})}function $(s,c){return S(this,null,function*(){var g;yield(g=t(P))==null?void 0:g.scrollToField(s,c)})}function B(s){return S(this,null,function*(){s&&s.preventDefault();const{submitFunc:c}=t(f);if(c&&N(c)){yield c();return}if(t(P))try{const r=yield L();e("submit",r)}catch(r){if((r==null?void 0:r.outOfDate)===!1&&(r!=null&&r.errorFields))return;throw new Error(r)}})}const x={getFieldsValue:F,setFieldsValue:V,resetFields:d,updateSchema:a,resetSchema:o,setProps:A,removeSchemaByField:j,appendSchemaByField:E,clearValidate:k,validateFields:w,validate:L,submit:B,scrollToField:$};return{handleSubmit:B,clearValidate:k,validate:L,validateFields:w,getFieldsValue:F,updateSchema:a,resetSchema:o,appendSchemaByField:E,removeSchemaByField:j,resetFields:d,setFieldsValue:V,scrollToField:$,resetDefaultField:D}}function Wt(e,f,i){let l=ee(f.value[i]);return Ht(e)?Q(l)?void 0:l:(!l&&e&&Ut(e)&&(l=[0,0]),!l&&e&&e.component==="ApiTree"&&(l=[]),l)}function Ut(e){if(e.component==="Slider"&&e.componentProps&&"range"in e.componentProps)return!0}function Ht(e){return(e==null?void 0:e.component)&&ht.includes(e.component)}function zt(I){return S(this,arguments,function*({getSchema:e,getProps:f,formElRef:i,isInitedDefault:l}){rt(()=>S(this,null,function*(){if(t(l)||!t(f).autoFocusFirstItem)return;yield ge();const P=t(e),n=t(i),u=n==null?void 0:n.$el;if(!n||!u||!P||P.length===0)return;const d=P[0];if(!d.component||!d.component.includes("Input"))return;const b=u.querySelector(".ant-row:first-child input");b&&(b==null||b.focus())}))})}const tn=Me({name:"BasicForm",__name:"BasicForm",props:yt,emits:["advanced-change","reset","submit","register","field-value-change"],setup(e,{expose:f,emit:i}){const l=e,I=i,P=it(),n=Te({}),u=Ot(),d=Te({isAdvanced:!0,hideAdvanceBtn:!1,isLoad:!1,actionSpan:6}),b=G({}),V=G(!1),D=G(),j=G(null),p=G(null),{prefixCls:E}=It("basic-form"),o=U(()=>T(T({},l),t(D))),a=U(()=>[E,{[`${E}--compact`]:t(o).compact}]),m=U(()=>{const{baseRowStyle:C={},rowProps:W}=t(o);return T({style:C},W)}),F=U(()=>T(T(T({},P),l),t(o))),y=U(()=>{var W;const C=ee(t(j)||t(o).schemas);for(const _ of C){const{defaultValue:H,component:ue,componentProps:de={},isHandleDateDefaultValue:He=!0}=_;if(He&&H&&ue&&Ne.includes(ue)){const ze={schema:_,tableAction:(W=l.tableAction)!=null?W:{},formModel:n,formActionType:{}},me=de?typeof de=="function"?de(ze).valueFormat:de.valueFormat:null;if(!Array.isArray(H))_.defaultValue=me?J(H).format(me):J(H);else{const we=[];H.forEach(Ie=>{we.push(me?J(Ie).format(me):J(Ie))}),_.defaultValue=we}}}return t(o).showAdvancedButton?C.filter(_=>!re(_.component)):C}),{handleToggleAdvanced:w,fieldsIsAdvancedMap:A}=Nt({advanceState:d,emit:I,getProps:o,getSchema:y,formModel:n,defaultValueRef:b}),{handleFormValues:L,initDefault:k}=Mt({getProps:o,defaultValueRef:b,getSchema:y,formModel:n});zt({getSchema:y,getProps:o,isInitedDefault:V,formElRef:p});const{handleSubmit:$,setFieldsValue:B,clearValidate:x,validate:s,validateFields:c,getFieldsValue:g,updateSchema:r,resetSchema:h,appendSchemaByField:v,removeSchemaByField:R,resetFields:O,scrollToField:q,resetDefaultField:Y}=Kt({emit:I,getProps:o,formModel:n,getSchema:y,defaultValueRef:b,formElRef:p,schemaRef:j,handleFormValues:L});bt({resetAction:O,submitAction:$}),te(()=>t(o).model,()=>{const{model:C}=t(o);C&&B(C)},{immediate:!0}),te(()=>l.schemas,C=>{h(C!=null?C:[])}),te(()=>y.value,C=>{ge(()=>{var W;(W=u==null?void 0:u.redoModalHeight)==null||W.call(u)}),!t(V)&&C!=null&&C.length&&(k(),V.value=!0)}),te(()=>n,qe(()=>{t(o).submitOnChange&&$()},300),{deep:!0});function ce(C){return S(this,null,function*(){D.value=Ke(t(D)||{},C)})}function K(C,W,_){n[C]=W,I("field-value-change",C,W),_&&_.itemProps&&!_.itemProps.autoLink&&c([C]).catch(H=>{})}function fe(C){const{autoSubmitOnEnter:W}=t(o);if(W&&C.key==="Enter"&&C.target&&C.target instanceof HTMLElement){const _=C.target;_&&_.tagName&&_.tagName.toUpperCase()==="INPUT"&&$()}}const se={getFieldsValue:g,setFieldsValue:B,resetFields:O,updateSchema:r,resetSchema:h,setProps:ce,removeSchemaByField:R,appendSchemaByField:v,clearValidate:x,validateFields:c,validate:s,submit:$,scrollToField:q,resetDefaultField:Y},Ue=U(()=>T(T({},o.value),d));return f(T({},se)),lt(()=>{k(),I("register",se)}),(C,W)=>(Ae(),Se(t(Fe),oe(F.value,{class:a.value,ref_key:"formElRef",ref:p,model:n,onKeypress:ut(fe,["enter"])}),{default:pe(()=>[M(t(Bt),Be(Oe(m.value)),{default:pe(()=>[he(C.$slots,"formHeader"),(Ae(!0),ct(ft,null,ve(y.value,_=>(Ae(),Se(_t,{key:_.field,isAdvanced:t(A)[_.field],tableAction:C.tableAction,formActionType:se,schema:_,formProps:o.value,allDefaultValues:b.value,formModel:n,setFormModel:K},De({_:2},[ve(Object.keys(C.$slots),H=>({name:H,fn:pe(ue=>[he(C.$slots,H,oe({ref_for:!0},ue||{}))])}))]),1032,["isAdvanced","tableAction","schema","formProps","allDefaultValues","formModel"]))),128)),M(gt,oe(Ue.value,{onToggleAdvanced:t(w)}),De({_:2},[ve(["resetBefore","submitBefore","advanceBefore","advanceAfter"],_=>({name:_,fn:pe(H=>[he(C.$slots,_,Be(Oe(H||{})))])}))]),1040,["onToggleAdvanced"]),he(C.$slots,"formFooter")]),_:3},16)]),_:3},16,["class","model"]))}});function nn(e){const f=G(null),i=G(!1);function l(){return S(this,null,function*(){const n=t(f);return n||ye("The form instance has not been obtained, please make sure that the form has been rendered when performing the form operation!"),yield ge(),n})}function I(n){dt(()=>{f.value=null,i.value=null}),!(t(i)&&Pt()&&n===t(f))&&(f.value=n,i.value=!0,te(()=>e,()=>{e&&n.setProps(Ct(e))},{immediate:!0,deep:!0}))}return[I,{scrollToField:(n,u)=>S(this,null,function*(){(yield l()).scrollToField(n,u)}),setProps:n=>S(this,null,function*(){(yield l()).setProps(n)}),updateSchema:n=>S(this,null,function*(){(yield l()).updateSchema(n)}),resetSchema:n=>S(this,null,function*(){(yield l()).resetSchema(n)}),clearValidate:n=>S(this,null,function*(){(yield l()).clearValidate(n)}),resetFields:()=>S(this,null,function*(){l().then(n=>S(this,null,function*(){yield n.resetFields()}))}),removeSchemaByField:n=>S(this,null,function*(){var u;(u=t(f))==null||u.removeSchemaByField(n)}),getFieldsValue:()=>{var n;return(n=t(f))==null?void 0:n.getFieldsValue()},setFieldsValue:n=>S(this,null,function*(){(yield l()).setFieldsValue(n)}),appendSchemaByField:(n,u,d)=>S(this,null,function*(){(yield l()).appendSchemaByField(n,u,d)}),submit:()=>S(this,null,function*(){return(yield l()).submit()}),validate:n=>S(this,null,function*(){return(yield l()).validate(n)}),validateFields:n=>S(this,null,function*(){return(yield l()).validateFields(n)}),resetDefaultField:n=>S(this,null,function*(){var u;(u=t(f))==null||u.resetDefaultField(n)})}]}export{tn as _,nn as u};
