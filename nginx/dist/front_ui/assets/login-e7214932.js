import{C as _,_ as C,u as V,r as I,a as h,o as M,b as n,c as P,d as K,e as a,f as s,w as o,g as w,s as U,E as B}from"./index-5ec8344c.js";import{r as D}from"./index-8a07fa20.js";const b=`MIIBVAIBADANBgkqhkiG9w0BAQEFAASCAT4wggE6AgEAAkEAqhHyZfSsYourNxaY
7Nt+PrgrxkiA50efORdI5U5lsW79MmFnusUA355oaSXcLhu5xxB38SMSyP2KvuKN
PuH3owIDAQABAkAfoiLyL+Z4lf4Myxk6xUDgLaWGximj20CUf+5BKKnlrK+Ed8gA
kM0HqoTt2UZwA5E2MzS4EI2gjfQhz5X28uqxAiEA3wNFxfrCZlSZHb0gn2zDpWow
cSxQAgiCstxGUoOqlW8CIQDDOerGKH5OmCJ4Z21v+F25WaHYPxCFMvwxpcw99Ecv
DQIgIdhDTIqD2jfYjPTY8Jj3EDGPbH2HHuffvflECt3Ek60CIQCFRlCkHpi7hthh
YhovyloRYsM+IS9h/0BzlEAuO0ktMQIgSPT3aFAgJYwKpqRYKlLDVcflZFCKY7u3
UP8iWi1Qw0Y=`,F=c=>{const m=b;return _.AES.encrypt(c,m).toString()},Y=c=>{const m=b;return _.AES.decrypt(c,m).toString(_.enc.Utf8)},q=c=>D.post({url:"userapp/userapi/login",data:c});const H={class:"login"},j={class:"main"},N={class:"center"},Q={class:"content"},R={class:"flex"},T={class:"flex items-center w-100% justify-end"},Z={__name:"login",setup(c){const m=V(),y=I(),x={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]},f=I(!1),t=h({username:"",password:"",systemId:""}),S=p=>{const e="25r0d12g4h2gj4hhju7s5gh5j6nm";return _.AES.encrypt(p,e).toString()},v=()=>{y.value.validate(async p=>{if(p){if(f.value){localStorage.setItem("username",t.username);const i=F(t.password);localStorage.setItem("encryptedPassword",i),localStorage.setItem("rememberMe","true")}else localStorage.removeItem("username"),localStorage.removeItem("encryptedPassword"),localStorage.setItem("rememberMe","false");const e={username:t.username,password:t.password},l=await q(e),{id:d,username:g}=l;localStorage.setItem("userInfo",JSON.stringify(l));let r={userId:d,username:g};if(r=`{userId:${d},username:${g}}`,S(r),t.systemId==="1"){const i="http://192.168.2.182:5000?token=1";window.location.href=i}else t.systemId==="2"?(console.log("进入门户"),U(l.username),m.push({path:"/smart"})):m.push({path:"/login"})}else return B.error("表单验证失败，请检查输入"),!1})};return M(()=>{const p=localStorage.getItem("username"),e=localStorage.getItem("rememberMe"),l=localStorage.getItem("encryptedPassword");if(e==="true"){if(t.username=p||"",l){const d=Y(l);t.password=d}f.value=!0}}),(p,e)=>{const l=n("el-icon"),d=n("el-option"),g=n("el-select"),r=n("el-form-item"),i=n("el-input"),A=n("el-checkbox"),k=n("el-button"),E=n("el-form");return P(),K("div",H,[a("div",j,[a("div",N,[e[8]||(e[8]=a("div",{class:"title"},null,-1)),a("div",Q,[s(E,{model:t,rules:x,ref_key:"loginFormRef",ref:y},{default:o(()=>[s(r,{label:"",prop:"systemId"},{default:o(()=>[s(g,{modelValue:t.systemId,"onUpdate:modelValue":e[0]||(e[0]=u=>t.systemId=u),class:"select",filterable:"",size:"default"},{prefix:o(()=>[a("span",R,[s(l,{class:"el-icon-change"})])]),default:o(()=>[s(d,{label:"知识管理平台",value:"1"}),s(d,{label:"知识库门户",value:"2"})]),_:1},8,["modelValue"])]),_:1}),s(r,{label:"",prop:"username"},{default:o(()=>[s(i,{modelValue:t.username,"onUpdate:modelValue":e[1]||(e[1]=u=>t.username=u),placeholder:"请输入用户名",class:"input"},{prefix:o(()=>[s(l,{class:"el-icon-user"})]),_:1},8,["modelValue"])]),_:1}),s(r,{label:"",prop:"password"},{default:o(()=>[s(i,{modelValue:t.password,"onUpdate:modelValue":e[2]||(e[2]=u=>t.password=u),placeholder:"请输入密码",type:"password",class:"input"},{prefix:o(()=>[s(l,{class:"el-icon-pass"})]),_:1},8,["modelValue"])]),_:1}),s(r,{label:""},{default:o(()=>[a("div",T,[s(A,{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=u=>f.value=u),disabled:!1},{default:o(()=>e[4]||(e[4]=[w("记住密码")])),_:1},8,["modelValue"]),e[5]||(e[5]=a("span",{class:"checkbox-item"},null,-1)),e[6]||(e[6]=a("span",{class:"text-#fff"},"忘记密码",-1))])]),_:1}),s(r,{label:"",prop:""},{default:o(()=>[s(k,{class:"btnLogin",type:"primary",onClick:v},{default:o(()=>e[7]||(e[7]=[w("登录")])),_:1})]),_:1})]),_:1},8,["model"])])])])])}}},W=C(Z,[["__scopeId","data-v-f18ed48e"]]);export{W as default};
